  [1m[35m (117.2ms)[0m  [1m[35mCREATE DATABASE "messenger_development" ENCODING = 'unicode'[0m
  [1m[35m (30.4ms)[0m  [1m[35mCREATE DATABASE "messenger_test" ENCODING = 'unicode'[0m
  [1m[35m (11.6ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" character varying NOT NULL PRIMARY KEY)[0m
  [1m[35m (1.0ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" character varying NOT NULL PRIMARY KEY, "value" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT pg_try_advisory_lock(236261448955884765)[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.9ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::InternalMetadata Create (0.6ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('environment', 'development', '2024-11-02 18:39:05.780749', '2024-11-02 18:39:05.780750') RETURNING "key"[0m
Migrating to CreateUsers (20241102181340)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (4.2ms)[0m  [1m[35mCREATE TABLE "users" ("id" bigserial primary key, "username" character varying, "email" character varying, "password" character varying, "is_active" boolean, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.2ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ('20241102181340') RETURNING "version"[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mCOMMIT[0m
Migrating to CreateServers (20241102182155)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (1.5ms)[0m  [1m[35mCREATE TABLE "servers" ("id" bigserial primary key, "name" character varying, "description" text, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.1ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ('20241102182155') RETURNING "version"[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT[0m
Migrating to CreateMessages (20241102182402)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (2.4ms)[0m  [1m[35mCREATE TABLE "messages" ("id" bigserial primary key, "content" text, "user_id" bigint NOT NULL, "server_id" bigint NOT NULL, "parent_message_id" bigint, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL, CONSTRAINT "fk_rails_273a25a7a6"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
, CONSTRAINT "fk_rails_be2d7f827c"
FOREIGN KEY ("server_id")
  REFERENCES "servers" ("id")
, CONSTRAINT "fk_rails_c90b5a8a0c"
FOREIGN KEY ("parent_message_id")
  REFERENCES "messages" ("id")
)[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE INDEX "index_messages_on_user_id" ON "messages" ("user_id")[0m
  [1m[35m (0.2ms)[0m  [1m[35mCREATE INDEX "index_messages_on_server_id" ON "messages" ("server_id")[0m
  [1m[35m (0.2ms)[0m  [1m[35mCREATE INDEX "index_messages_on_parent_message_id" ON "messages" ("parent_message_id")[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.0ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ('20241102182402') RETURNING "version"[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT[0m
Migrating to CreateServerMembers (20241102182500)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (1.2ms)[0m  [1m[35mCREATE TABLE "server_members" ("id" bigserial primary key, "user_id" bigint NOT NULL, "server_id" bigint NOT NULL, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL, CONSTRAINT "fk_rails_a520b156c7"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
, CONSTRAINT "fk_rails_d79fcdde06"
FOREIGN KEY ("server_id")
  REFERENCES "servers" ("id")
)[0m
  [1m[35m (0.2ms)[0m  [1m[35mCREATE INDEX "index_server_members_on_user_id" ON "server_members" ("user_id")[0m
  [1m[35m (0.2ms)[0m  [1m[35mCREATE INDEX "index_server_members_on_server_id" ON "server_members" ("server_id")[0m
  [1m[35m (0.2ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_server_members_on_user_id_and_server_id" ON "server_members" ("user_id", "server_id")[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.1ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ('20241102182500') RETURNING "version"[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT pg_advisory_unlock(236261448955884765)[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT pg_try_advisory_lock(236261448955884765)[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Load (1.0ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
Migrating to AddAuthenticationToUsers (20241102183000)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (4.8ms)[0m  [1m[35mALTER TABLE "users" ADD "password_digest" character varying[0m
  [1m[35m (2.8ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_users_on_username" ON "users" ("username")[0m
  [1m[35m (3.6ms)[0m  [1m[35mALTER TABLE "users" DROP COLUMN "password"[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.3ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ('20241102183000') RETURNING "version"[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT pg_advisory_unlock(236261448955884765)[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Started POST "/login" for ::1 at 2024-11-02 15:00:21 -0400
  [1m[36mActiveRecord::SchemaMigration Load (1.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by SessionsController#create as */*
  Parameters: {"email"=>"[FILTERED]", "password"=>"[FILTERED]", "session"=>{"email"=>"[FILTERED]", "password"=>"[FILTERED]"}}
  [1m[36mUser Load (1.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:8:in `set_current_user'
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."username" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  â†³ app/controllers/sessions_controller.rb:3:in `create'
Completed 401 Unauthorized in 33ms (Views: 0.1ms | ActiveRecord: 10.7ms (2 queries, 0 cached) | GC: 0.9ms)


Started POST "/signup" for ::1 at 2024-11-02 15:00:40 -0400
Processing by UsersController#create as */*
  Parameters: {"email"=>"[FILTERED]", "password"=>"[FILTERED]", "username"=>"user1", "user"=>{"username"=>"user1", "email"=>"[FILTERED]"}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:8:in `set_current_user'
[31mUnpermitted parameters: :email, :user. Context: { controller: UsersController, action: create, request: #<ActionDispatch::Request:0x00000001070ea6e8>, params: {"email"=>"[FILTERED]", "password"=>"[FILTERED]", "username"=>"user1", "controller"=>"users", "action"=>"create", "user"=>{"username"=>"user1", "email"=>"[FILTERED]"}} }[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/users_controller.rb:4:in `create'
  [1m[36mUser Exists? (1.8ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "user1"], ["LIMIT", 1]]
  â†³ app/controllers/users_controller.rb:4:in `create'
  [1m[36mUser Create (1.5ms)[0m  [1m[32mINSERT INTO "users" ("username", "email", "is_active", "created_at", "updated_at", "password_digest") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["username", "user1"], ["email", "[FILTERED]"], ["is_active", nil], ["created_at", "2024-11-02 19:00:41.095232"], ["updated_at", "2024-11-02 19:00:41.095232"], ["password_digest", "[FILTERED]"]]
  â†³ app/controllers/users_controller.rb:4:in `create'
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/users_controller.rb:4:in `create'
Completed 201 Created in 303ms (Views: 0.1ms | ActiveRecord: 9.6ms (3 queries, 0 cached) | GC: 15.6ms)


Started POST "/signup" for ::1 at 2024-11-02 15:01:16 -0400
Processing by UsersController#create as */*
  Parameters: {"email"=>"[FILTERED]", "password"=>"[FILTERED]", "username"=>"user1", "user"=>{"username"=>"user1", "email"=>"[FILTERED]"}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:8:in `set_current_user'
[31mUnpermitted parameter: :user. Context: { controller: UsersController, action: create, request: #<ActionDispatch::Request:0x0000000118011a58>, params: {"email"=>"[FILTERED]", "password"=>"[FILTERED]", "username"=>"user1", "controller"=>"users", "action"=>"create", "user"=>{"username"=>"user1", "email"=>"[FILTERED]"}} }[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/users_controller.rb:4:in `create'
  [1m[36mUser Exists? (0.7ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "user1"], ["LIMIT", 1]]
  â†³ app/controllers/users_controller.rb:4:in `create'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  â†³ app/controllers/users_controller.rb:4:in `create'
Completed 422 Unprocessable Content in 253ms (Views: 0.1ms | ActiveRecord: 5.9ms (2 queries, 0 cached) | GC: 0.4ms)


Started POST "/login" for ::1 at 2024-11-02 15:03:18 -0400
Processing by SessionsController#create as */*
  Parameters: {"email"=>"[FILTERED]", "password"=>"[FILTERED]", "session"=>{"email"=>"[FILTERED]", "password"=>"[FILTERED]"}}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:8:in `set_current_user'
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."username" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  â†³ app/controllers/sessions_controller.rb:3:in `create'
Completed 401 Unauthorized in 9ms (Views: 0.1ms | ActiveRecord: 3.7ms (2 queries, 0 cached) | GC: 0.4ms)


Started POST "/login" for ::1 at 2024-11-02 15:03:23 -0400
Processing by SessionsController#create as */*
  Parameters: {"username"=>"user1@example.com", "password"=>"[FILTERED]", "session"=>{"username"=>"user1@example.com", "password"=>"[FILTERED]"}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:8:in `set_current_user'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "user1@example.com"], ["LIMIT", 1]]
  â†³ app/controllers/sessions_controller.rb:3:in `create'
Completed 401 Unauthorized in 4ms (Views: 0.1ms | ActiveRecord: 0.5ms (2 queries, 0 cached) | GC: 0.0ms)


Started POST "/login" for ::1 at 2024-11-02 15:03:26 -0400
Processing by SessionsController#create as */*
  Parameters: {"username"=>"user1", "password"=>"[FILTERED]", "session"=>{"username"=>"user1", "password"=>"[FILTERED]"}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:8:in `set_current_user'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "user1"], ["LIMIT", 1]]
  â†³ app/controllers/sessions_controller.rb:3:in `create'
Completed 201 Created in 271ms (Views: 0.5ms | ActiveRecord: 0.5ms (2 queries, 0 cached) | GC: 0.2ms)


Started POST "/signup" for ::1 at 2024-11-02 15:06:44 -0400
Processing by UsersController#create as */*
  Parameters: {"email"=>"[FILTERED]", "password"=>"[FILTERED]", "username"=>"user2", "user"=>{"username"=>"user2", "email"=>"[FILTERED]"}}
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:8:in `set_current_user'
[31mUnpermitted parameter: :user. Context: { controller: UsersController, action: create, request: #<ActionDispatch::Request:0x00000001180d5480>, params: {"email"=>"[FILTERED]", "password"=>"[FILTERED]", "username"=>"user2", "controller"=>"users", "action"=>"create", "user"=>{"username"=>"user2", "email"=>"[FILTERED]"}} }[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/users_controller.rb:4:in `create'
  [1m[36mUser Exists? (2.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "user2"], ["LIMIT", 1]]
  â†³ app/controllers/users_controller.rb:4:in `create'
  [1m[36mUser Create (2.2ms)[0m  [1m[32mINSERT INTO "users" ("username", "email", "is_active", "created_at", "updated_at", "password_digest") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["username", "user2"], ["email", "[FILTERED]"], ["is_active", nil], ["created_at", "2024-11-02 19:06:44.847797"], ["updated_at", "2024-11-02 19:06:44.847797"], ["password_digest", "[FILTERED]"]]
  â†³ app/controllers/users_controller.rb:4:in `create'
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/users_controller.rb:4:in `create'
Completed 201 Created in 273ms (Views: 0.2ms | ActiveRecord: 5.5ms (3 queries, 0 cached) | GC: 1.2ms)


  [1m[35m (0.2ms)[0m  [1m[34mSELECT pg_try_advisory_lock(236261448955884765)[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.6ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
Migrating to AddDefaultValueToActiveUser (20241102190837)
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (2.5ms)[0m  [1m[35mALTER TABLE "users" ALTER COLUMN "is_active" SET DEFAULT FALSE[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.1ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ('20241102190837') RETURNING "version"[0m
  [1m[36mTRANSACTION (1.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT pg_advisory_unlock(236261448955884765)[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Started POST "/servers" for ::1 at 2024-11-02 15:21:26 -0400
  [1m[36mActiveRecord::SchemaMigration Load (1.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by ServersController#create as */*
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:8:in `set_current_user'
Completed 400 Bad Request in 40ms (ActiveRecord: 11.7ms (1 query, 0 cached) | GC: 1.6ms)


  
ActionController::ParameterMissing (param is missing or the value is empty: server):
  
app/controllers/servers_controller.rb:49:in `server_params'
app/controllers/servers_controller.rb:18:in `create'
Started POST "/servers" for ::1 at 2024-11-02 15:22:13 -0400
Processing by ServersController#create as */*
  Parameters: {"server"=>{"name"=>"Carlo's Room", "description"=>"my first server"}}
  [1m[36mUser Load (0.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:8:in `set_current_user'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/servers_controller.rb:20:in `create'
  [1m[36mServer Create (4.0ms)[0m  [1m[32mINSERT INTO "servers" ("name", "description", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["name", "Carlo's Room"], ["description", "my first server"], ["created_at", "2024-11-02 19:22:13.948429"], ["updated_at", "2024-11-02 19:22:13.948429"]]
  â†³ app/controllers/servers_controller.rb:20:in `create'
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/servers_controller.rb:20:in `create'
Completed 201 Created in 24ms (Views: 1.1ms | ActiveRecord: 10.8ms (2 queries, 0 cached) | GC: 0.0ms)


Started GET "/servers/1" for ::1 at 2024-11-02 15:23:07 -0400
Processing by ServersController#show as */*
  Parameters: {"id"=>"1"}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:8:in `set_current_user'
  [1m[36mServer Load (0.2ms)[0m  [1m[34mSELECT "servers".* FROM "servers" WHERE "servers"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/servers_controller.rb:44:in `set_server'
  [1m[36mMessage Load (2.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."server_id" = $1[0m  [["server_id", 1]]
  â†³ app/controllers/servers_controller.rb:13:in `show'
Completed 200 OK in 30ms (Views: 11.8ms | ActiveRecord: 11.9ms (3 queries, 0 cached) | GC: 0.5ms)


Started GET "/servers/1" for ::1 at 2024-11-02 15:23:21 -0400
Processing by ServersController#show as */*
  Parameters: {"id"=>"1"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:8:in `set_current_user'
  [1m[36mServer Load (0.2ms)[0m  [1m[34mSELECT "servers".* FROM "servers" WHERE "servers"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/servers_controller.rb:44:in `set_server'
  [1m[36mUser Load (2.1ms)[0m  [1m[34mSELECT "users".* FROM "users" INNER JOIN "server_members" ON "users"."id" = "server_members"."user_id" WHERE "server_members"."server_id" = $1[0m  [["server_id", 1]]
  â†³ app/controllers/servers_controller.rb:13:in `show'
Completed 200 OK in 25ms (Views: 6.4ms | ActiveRecord: 13.9ms (3 queries, 0 cached) | GC: 0.0ms)


Started GET "/servers/1" for ::1 at 2024-11-02 15:23:28 -0400
Processing by ServersController#show as */*
  Parameters: {"id"=>"1"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:8:in `set_current_user'
  [1m[36mServer Load (0.5ms)[0m  [1m[34mSELECT "servers".* FROM "servers" WHERE "servers"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/servers_controller.rb:44:in `set_server'
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" INNER JOIN "server_members" ON "users"."id" = "server_members"."user_id" WHERE "server_members"."server_id" = $1[0m  [["server_id", 1]]
  â†³ app/controllers/servers_controller.rb:13:in `show'
  [1m[36mMessage Load (0.2ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."server_id" = $1[0m  [["server_id", 1]]
  â†³ app/controllers/servers_controller.rb:13:in `show'
Completed 200 OK in 24ms (Views: 5.8ms | ActiveRecord: 12.8ms (4 queries, 0 cached) | GC: 2.1ms)


  [1m[35m (0.1ms)[0m  [1m[34mSELECT pg_try_advisory_lock(236261448955884765)[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.6ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
Migrating to AddOwnerIdToServers (20241102192653)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (4.7ms)[0m  [1m[35mALTER TABLE "servers" ADD "owner_id_id" bigint NOT NULL[0m
  [1m[35m (2.4ms)[0m  [1m[35mCREATE INDEX "index_servers_on_owner_id_id" ON "servers" ("owner_id_id")[0m
  [1m[35m (2.7ms)[0m  [1m[35mALTER TABLE "servers" ADD CONSTRAINT "fk_rails_8e5466096a"
FOREIGN KEY ("owner_id_id")
  REFERENCES "users" ("id")
[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.3ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ('20241102192653') RETURNING "version"[0m
  [1m[36mTRANSACTION (2.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT pg_advisory_unlock(236261448955884765)[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Started GET "/servers/1" for ::1 at 2024-11-02 15:33:57 -0400
  [1m[36mActiveRecord::SchemaMigration Load (0.7ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by ServersController#show as */*
  Parameters: {"id"=>"1"}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:8:in `set_current_user'
  [1m[36mServer Load (0.3ms)[0m  [1m[34mSELECT "servers".* FROM "servers" WHERE "servers"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/servers_controller.rb:60:in `set_server'
Completed 404 Not Found in 38ms (ActiveRecord: 17.4ms (2 queries, 0 cached) | GC: 1.2ms)


  
ActiveRecord::RecordNotFound (Couldn't find Server with 'id'=1):
  
app/controllers/servers_controller.rb:60:in `set_server'
Started POST "/servers" for ::1 at 2024-11-02 15:34:00 -0400
Processing by ServersController#create as */*
  Parameters: {"server"=>{"name"=>"Carlo's Room", "description"=>"my first server"}}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:8:in `set_current_user'
Completed 500 Internal Server Error in 31ms (ActiveRecord: 4.7ms (1 query, 0 cached) | GC: 0.0ms)


  
NoMethodError (undefined method `owner=' for #<Server id: nil, name: "Carlo's Room", description: "my first server", created_at: nil, updated_at: nil, owner_id_id: nil>):
  
app/controllers/servers_controller.rb:20:in `create'
Started POST "/login" for ::1 at 2024-11-02 15:34:04 -0400
Processing by SessionsController#create as */*
  Parameters: {"username"=>"user1", "password"=>"[FILTERED]", "session"=>{"username"=>"user1", "password"=>"[FILTERED]"}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:8:in `set_current_user'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "user1"], ["LIMIT", 1]]
  â†³ app/controllers/sessions_controller.rb:3:in `create'
Completed 401 Unauthorized in 6ms (Views: 0.2ms | ActiveRecord: 0.4ms (2 queries, 0 cached) | GC: 2.1ms)


Started POST "/login" for ::1 at 2024-11-02 15:34:14 -0400
Processing by SessionsController#create as */*
  Parameters: {"username"=>"user2", "password"=>"[FILTERED]", "session"=>{"username"=>"user2", "password"=>"[FILTERED]"}}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:8:in `set_current_user'
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "user2"], ["LIMIT", 1]]
  â†³ app/controllers/sessions_controller.rb:3:in `create'
Completed 201 Created in 281ms (Views: 0.2ms | ActiveRecord: 0.8ms (2 queries, 0 cached) | GC: 0.3ms)


Started POST "/servers" for ::1 at 2024-11-02 15:34:52 -0400
Processing by ServersController#create as */*
  Parameters: {"server"=>{"name"=>"Carlo's Room", "description"=>"my first server"}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:8:in `set_current_user'
Completed 500 Internal Server Error in 3ms (ActiveRecord: 0.3ms (1 query, 0 cached) | GC: 0.0ms)


  
NoMethodError (undefined method `owner=' for #<Server id: nil, name: "Carlo's Room", description: "my first server", created_at: nil, updated_at: nil, owner_id_id: nil>):
  
app/controllers/servers_controller.rb:20:in `create'
  [1m[36mActiveRecord::SchemaMigration Load (0.8ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.7ms)[0m  [1m[34mSELECT pg_try_advisory_lock(236261448955884765)[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Migrating to AddOwnerIdToServers (20241102192653)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (3.0ms)[0m  [1m[35mALTER TABLE "servers" DROP CONSTRAINT "fk_rails_8e5466096a"[0m
  [1m[35m (0.3ms)[0m  [1m[35mALTER TABLE "servers" DROP COLUMN "owner_id_id"[0m
  [1m[36mActiveRecord::SchemaMigration Destroy (0.4ms)[0m  [1m[31mDELETE FROM "schema_migrations" WHERE "schema_migrations"."version" = '20241102192653'[0m
  [1m[36mTRANSACTION (6.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT pg_advisory_unlock(236261448955884765)[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT pg_try_advisory_lock(236261448955884765)[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.7ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.8ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
Migrating to AddOwnerIdToServers (20241102192653)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (1.1ms)[0m  [1m[35mALTER TABLE "servers" ADD "owner_id" bigint NOT NULL[0m
  [1m[35m (2.1ms)[0m  [1m[35mCREATE INDEX "index_servers_on_owner_id" ON "servers" ("owner_id")[0m
  [1m[35m (1.3ms)[0m  [1m[35mALTER TABLE "servers" ADD CONSTRAINT "fk_rails_09f4d3002e"
FOREIGN KEY ("owner_id")
  REFERENCES "users" ("id")
[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.1ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ('20241102192653') RETURNING "version"[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT pg_advisory_unlock(236261448955884765)[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Started POST "/servers" for ::1 at 2024-11-02 15:36:50 -0400
  [1m[36mActiveRecord::SchemaMigration Load (0.8ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by ServersController#create as */*
  Parameters: {"server"=>{"name"=>"Carlo's Room", "description"=>"my first server"}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:8:in `set_current_user'
Completed 500 Internal Server Error in 32ms (ActiveRecord: 10.9ms (1 query, 0 cached) | GC: 1.4ms)


  
NoMethodError (undefined method `owner=' for #<Server id: nil, name: "Carlo's Room", description: "my first server", created_at: nil, updated_at: nil, owner_id: nil>):
  
app/controllers/servers_controller.rb:20:in `create'
Started POST "/servers" for ::1 at 2024-11-02 15:37:55 -0400
Processing by ServersController#create as */*
  Parameters: {"server"=>{"name"=>"Carlo's Room", "description"=>"my first server"}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:8:in `set_current_user'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/servers_controller.rb:22:in `create'
  [1m[36mUser Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 AND "users"."id" != $2 LIMIT $3[0m  [["email", "[FILTERED]"], ["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/servers_controller.rb:22:in `create'
  [1m[36mServer Create (1.4ms)[0m  [1m[32mINSERT INTO "servers" ("name", "description", "created_at", "updated_at", "owner_id") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Carlo's Room"], ["description", "my first server"], ["created_at", "2024-11-02 19:37:55.355479"], ["updated_at", "2024-11-02 19:37:55.355479"], ["owner_id", 2]]
  â†³ app/controllers/servers_controller.rb:22:in `create'
  [1m[36mServerMember Create (2.4ms)[0m  [1m[32mINSERT INTO "server_members" ("user_id", "server_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 2], ["server_id", 2], ["created_at", "2024-11-02 19:37:55.357708"], ["updated_at", "2024-11-02 19:37:55.357708"]]
  â†³ app/controllers/servers_controller.rb:22:in `create'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/servers_controller.rb:22:in `create'
Completed 201 Created in 29ms (Views: 0.2ms | ActiveRecord: 19.5ms (4 queries, 0 cached) | GC: 0.5ms)


Started POST "/servers/2/join" for ::1 at 2024-11-02 15:40:06 -0400
Processing by ServersController#join as */*
  Parameters: {"id"=>"2"}
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:8:in `set_current_user'
Completed 500 Internal Server Error in 10ms (ActiveRecord: 0.6ms (1 query, 0 cached) | GC: 0.0ms)


  
NoMethodError (undefined method `users' for nil:NilClass):
  
app/controllers/servers_controller.rb:39:in `join'
Started POST "/servers/2/join" for ::1 at 2024-11-02 15:41:01 -0400
Processing by ServersController#join as */*
  Parameters: {"id"=>"2"}
  [1m[36mUser Load (1.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:8:in `set_current_user'
  [1m[36mServer Load (0.1ms)[0m  [1m[34mSELECT "servers".* FROM "servers" WHERE "servers"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/servers_controller.rb:60:in `set_server'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/servers_controller.rb:39:in `join'
  [1m[36mServerMember Create (1.0ms)[0m  [1m[32mINSERT INTO "server_members" ("user_id", "server_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 2], ["server_id", 2], ["created_at", "2024-11-02 19:41:01.248672"], ["updated_at", "2024-11-02 19:41:01.248672"]]
  â†³ app/controllers/servers_controller.rb:39:in `join'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK[0m
  â†³ app/controllers/servers_controller.rb:39:in `join'
Completed 500 Internal Server Error in 24ms (ActiveRecord: 14.5ms (3 queries, 0 cached) | GC: 0.3ms)


  
ActiveRecord::RecordNotUnique (PG::UniqueViolation: ERROR:  duplicate key value violates unique constraint "index_server_members_on_user_id_and_server_id"
DETAIL:  Key (user_id, server_id)=(2, 2) already exists.
):

Causes:
PG::UniqueViolation (ERROR:  duplicate key value violates unique constraint "index_server_members_on_user_id_and_server_id"
DETAIL:  Key (user_id, server_id)=(2, 2) already exists.
)
  
Started POST "/servers/2/join" for ::1 at 2024-11-02 15:43:39 -0400
Processing by ServersController#join as */*
  Parameters: {"id"=>"2"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:8:in `set_current_user'
  [1m[36mServer Load (0.4ms)[0m  [1m[34mSELECT "servers".* FROM "servers" WHERE "servers"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/servers_controller.rb:67:in `set_server'
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/servers_controller.rb:40:in `join'
  [1m[36mServerMember Create (0.9ms)[0m  [1m[32mINSERT INTO "server_members" ("user_id", "server_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 2], ["server_id", 2], ["created_at", "2024-11-02 19:43:39.463970"], ["updated_at", "2024-11-02 19:43:39.463970"]]
  â†³ app/controllers/servers_controller.rb:40:in `join'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  â†³ app/controllers/servers_controller.rb:40:in `join'
Completed 422 Unprocessable Content in 26ms (Views: 0.1ms | ActiveRecord: 17.5ms (3 queries, 0 cached) | GC: 0.4ms)


Started DELETE "/servers/2/leave" for ::1 at 2024-11-02 15:43:44 -0400
Processing by ServersController#leave as */*
  Parameters: {"id"=>"2"}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:8:in `set_current_user'
  [1m[36mServer Load (0.2ms)[0m  [1m[34mSELECT "servers".* FROM "servers" WHERE "servers"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/servers_controller.rb:67:in `set_server'
Completed 401 Unauthorized in 4ms (Views: 0.2ms | ActiveRecord: 0.6ms (2 queries, 0 cached) | GC: 0.0ms)


Started POST "/signup" for ::1 at 2024-11-02 15:48:10 -0400
Processing by UsersController#create as */*
  Parameters: {"email"=>"[FILTERED]", "password"=>"[FILTERED]", "username"=>"user3", "user"=>{"username"=>"user3", "email"=>"[FILTERED]"}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:8:in `set_current_user'
[31mUnpermitted parameter: :user. Context: { controller: UsersController, action: create, request: #<ActionDispatch::Request:0x00000001083729f0>, params: {"email"=>"[FILTERED]", "password"=>"[FILTERED]", "username"=>"user3", "controller"=>"users", "action"=>"create", "user"=>{"username"=>"user3", "email"=>"[FILTERED]"}} }[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/users_controller.rb:4:in `create'
  [1m[36mUser Exists? (1.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "user3"], ["LIMIT", 1]]
  â†³ app/controllers/users_controller.rb:4:in `create'
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  â†³ app/controllers/users_controller.rb:4:in `create'
  [1m[36mUser Create (2.2ms)[0m  [1m[32mINSERT INTO "users" ("username", "email", "is_active", "created_at", "updated_at", "password_digest") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["username", "user3"], ["email", "[FILTERED]"], ["is_active", false], ["created_at", "2024-11-02 19:48:10.755244"], ["updated_at", "2024-11-02 19:48:10.755244"], ["password_digest", "[FILTERED]"]]
  â†³ app/controllers/users_controller.rb:4:in `create'
  [1m[36mTRANSACTION (2.4ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/users_controller.rb:4:in `create'
Completed 201 Created in 257ms (Views: 0.1ms | ActiveRecord: 16.4ms (4 queries, 0 cached) | GC: 0.0ms)


Started GET "/servers/1" for ::1 at 2024-11-02 15:49:11 -0400
Processing by ServersController#show as */*
  Parameters: {"id"=>"1"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:8:in `set_current_user'
  [1m[36mServer Load (0.2ms)[0m  [1m[34mSELECT "servers".* FROM "servers" WHERE "servers"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/servers_controller.rb:72:in `set_server'
Completed 404 Not Found in 10ms (ActiveRecord: 5.3ms (2 queries, 0 cached) | GC: 0.0ms)


  
ActiveRecord::RecordNotFound (Couldn't find Server with 'id'=1):
  
app/controllers/servers_controller.rb:72:in `set_server'
Started GET "/servers/2" for ::1 at 2024-11-02 15:49:16 -0400
Processing by ServersController#show as */*
  Parameters: {"id"=>"2"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:8:in `set_current_user'
  [1m[36mServer Load (0.3ms)[0m  [1m[34mSELECT "servers".* FROM "servers" WHERE "servers"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/servers_controller.rb:72:in `set_server'
  [1m[36mUser Load (1.3ms)[0m  [1m[34mSELECT "users".* FROM "users" INNER JOIN "server_members" ON "users"."id" = "server_members"."user_id" WHERE "server_members"."server_id" = $1[0m  [["server_id", 2]]
  â†³ app/controllers/servers_controller.rb:13:in `show'
  [1m[36mMessage Load (0.7ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."server_id" = $1[0m  [["server_id", 2]]
  â†³ app/controllers/servers_controller.rb:13:in `show'
Completed 200 OK in 37ms (Views: 19.2ms | ActiveRecord: 9.8ms (4 queries, 0 cached) | GC: 3.6ms)


Started GET "/me" for ::1 at 2024-11-02 15:49:32 -0400
Processing by UsersController#show as */*
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:8:in `set_current_user'
Completed 200 OK in 4ms (Views: 0.3ms | ActiveRecord: 0.2ms (1 query, 0 cached) | GC: 1.2ms)


Started GET "/me" for ::1 at 2024-11-02 15:50:05 -0400
Processing by UsersController#show as */*
  [1m[36mUser Load (0.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:8:in `set_current_user'
Completed 200 OK in 22ms (Views: 0.7ms | ActiveRecord: 12.4ms (1 query, 0 cached) | GC: 0.0ms)


Started GET "/me" for ::1 at 2024-11-02 15:50:17 -0400
Processing by UsersController#show as */*
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:8:in `set_current_user'
Completed 200 OK in 6ms (Views: 0.1ms | ActiveRecord: 2.9ms (1 query, 0 cached) | GC: 0.0ms)


Started GET "/servers/2" for ::1 at 2024-11-02 15:50:22 -0400
Processing by ServersController#show as */*
  Parameters: {"id"=>"2"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:8:in `set_current_user'
  [1m[36mServer Load (0.2ms)[0m  [1m[34mSELECT "servers".* FROM "servers" WHERE "servers"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/servers_controller.rb:73:in `set_server'
  [1m[36mUser Exists? (1.0ms)[0m  [1m[34mSELECT 1 AS one FROM "users" INNER JOIN "server_members" ON "users"."id" = "server_members"."user_id" WHERE "server_members"."server_id" = $1 AND "users"."id" = $2 LIMIT $3[0m  [["server_id", 2], ["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/servers_controller.rb:90:in `is_member_of_server?'
Filter chain halted as :is_member_of_server? rendered or redirected
Completed 401 Unauthorized in 20ms (Views: 0.3ms | ActiveRecord: 4.9ms (3 queries, 0 cached) | GC: 0.0ms)


Started POST "/servers/2/join" for ::1 at 2024-11-02 15:51:08 -0400
Processing by ServersController#join as */*
  Parameters: {"id"=>"2"}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:8:in `set_current_user'
  [1m[36mServer Load (0.3ms)[0m  [1m[34mSELECT "servers".* FROM "servers" WHERE "servers"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/servers_controller.rb:73:in `set_server'
  [1m[36mUser Exists? (0.7ms)[0m  [1m[34mSELECT 1 AS one FROM "users" INNER JOIN "server_members" ON "users"."id" = "server_members"."user_id" WHERE "server_members"."server_id" = $1 AND "users"."id" = $2 LIMIT $3[0m  [["server_id", 2], ["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/servers_controller.rb:90:in `is_member_of_server?'
Filter chain halted as :is_member_of_server? rendered or redirected
Completed 401 Unauthorized in 26ms (Views: 0.5ms | ActiveRecord: 1.4ms (3 queries, 0 cached) | GC: 0.0ms)


Started POST "/servers/2/join" for ::1 at 2024-11-02 15:51:17 -0400
Processing by ServersController#join as */*
  Parameters: {"id"=>"2"}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:8:in `set_current_user'
  [1m[36mServer Load (0.1ms)[0m  [1m[34mSELECT "servers".* FROM "servers" WHERE "servers"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/servers_controller.rb:73:in `set_server'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/servers_controller.rb:41:in `join'
  [1m[36mServerMember Create (1.0ms)[0m  [1m[32mINSERT INTO "server_members" ("user_id", "server_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 3], ["server_id", 2], ["created_at", "2024-11-02 19:51:17.684489"], ["updated_at", "2024-11-02 19:51:17.684489"]]
  â†³ app/controllers/servers_controller.rb:41:in `join'
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/servers_controller.rb:41:in `join'
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" INNER JOIN "server_members" ON "users"."id" = "server_members"."user_id" WHERE "server_members"."server_id" = $1[0m  [["server_id", 2]]
  â†³ app/controllers/servers_controller.rb:42:in `join'
Completed 201 Created in 24ms (Views: 0.9ms | ActiveRecord: 14.4ms (4 queries, 0 cached) | GC: 0.6ms)


Started DELETE "/servers/2/leave" for ::1 at 2024-11-02 15:51:25 -0400
Processing by ServersController#leave as */*
  Parameters: {"id"=>"2"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:8:in `set_current_user'
  [1m[36mServer Load (0.1ms)[0m  [1m[34mSELECT "servers".* FROM "servers" WHERE "servers"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/servers_controller.rb:73:in `set_server'
  [1m[36mUser Exists? (1.5ms)[0m  [1m[34mSELECT 1 AS one FROM "users" INNER JOIN "server_members" ON "users"."id" = "server_members"."user_id" WHERE "server_members"."server_id" = $1 AND "users"."id" = $2 LIMIT $3[0m  [["server_id", 2], ["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/servers_controller.rb:90:in `is_member_of_server?'
  [1m[36mCACHE User Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "users" INNER JOIN "server_members" ON "users"."id" = "server_members"."user_id" WHERE "server_members"."server_id" = $1 AND "users"."id" = $2 LIMIT $3[0m  [["server_id", 2], ["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/servers_controller.rb:52:in `leave'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/servers_controller.rb:55:in `leave'
  [1m[36mServerMember Delete All (1.0ms)[0m  [1m[31mDELETE FROM "server_members" WHERE "server_members"."server_id" = $1 AND "server_members"."user_id" = $2[0m  [["server_id", 2], ["user_id", 3]]
  â†³ app/controllers/servers_controller.rb:55:in `leave'
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/servers_controller.rb:55:in `leave'
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT "users".* FROM "users" INNER JOIN "server_members" ON "users"."id" = "server_members"."user_id" WHERE "server_members"."server_id" = $1[0m  [["server_id", 2]]
  â†³ app/controllers/servers_controller.rb:56:in `leave'
Completed 200 OK in 15ms (Views: 2.1ms | ActiveRecord: 4.1ms (6 queries, 1 cached) | GC: 0.5ms)


Started POST "/login" for ::1 at 2024-11-02 15:55:02 -0400
  [1m[36mActiveRecord::SchemaMigration Load (0.7ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by SessionsController#create as */*
  Parameters: {"username"=>"user2", "password"=>"[FILTERED]", "session"=>{"username"=>"user2", "password"=>"[FILTERED]"}}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:8:in `set_current_user'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "user2"], ["LIMIT", 1]]
  â†³ app/controllers/sessions_controller.rb:3:in `create'
Completed 201 Created in 272ms (Views: 0.6ms | ActiveRecord: 12.2ms (2 queries, 0 cached) | GC: 1.6ms)


Started GET "/me" for ::1 at 2024-11-02 15:55:25 -0400
Processing by UsersController#show as */*
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:8:in `set_current_user'
Completed 200 OK in 3ms (Views: 0.3ms | ActiveRecord: 0.6ms (1 query, 0 cached) | GC: 0.0ms)


Started PATCH "/servers/2/transfer_ownership" for ::1 at 2024-11-02 15:56:46 -0400
  
SyntaxError (/Users/cdugo/Desktop/Projects/whop-messenger/app/controllers/servers_controller.rb:99: syntax error, unexpected end-of-input):
  
app/controllers/servers_controller.rb:99: syntax error, unexpected end-of-input
Started PATCH "/servers/2/transfer_ownership" for ::1 at 2024-11-02 15:56:58 -0400
Processing by ServersController#transfer_ownership as */*
  Parameters: {"user_id"=>3, "id"=>"2", "server"=>{}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:8:in `set_current_user'
  [1m[36mServer Load (0.8ms)[0m  [1m[34mSELECT "servers".* FROM "servers" WHERE "servers"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/servers_controller.rb:77:in `set_server'
Completed 500 Internal Server Error in 19ms (ActiveRecord: 10.9ms (2 queries, 0 cached) | GC: 0.0ms)


  
NoMethodError (undefined method `[]' for nil:NilClass):
  
app/controllers/servers_controller.rb:61:in `transfer_ownership'
Started PATCH "/servers/2/transfer_ownership" for ::1 at 2024-11-02 15:57:45 -0400
Processing by ServersController#transfer_ownership as */*
  Parameters: {"owner_id"=>3, "id"=>"2", "server"=>{"owner_id"=>3}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:8:in `set_current_user'
  [1m[36mServer Load (1.0ms)[0m  [1m[34mSELECT "servers".* FROM "servers" WHERE "servers"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/servers_controller.rb:77:in `set_server'
Completed 500 Internal Server Error in 12ms (ActiveRecord: 9.4ms (2 queries, 0 cached) | GC: 0.1ms)


  
NoMethodError (undefined method `[]' for nil:NilClass):
  
app/controllers/servers_controller.rb:61:in `transfer_ownership'
Started PATCH "/servers/2/transfer_ownership" for ::1 at 2024-11-02 15:58:13 -0400
Processing by ServersController#transfer_ownership as */*
  Parameters: {"owner_id"=>3, "id"=>"2", "server"=>{"owner_id"=>3}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:8:in `set_current_user'
  [1m[36mServer Load (0.2ms)[0m  [1m[34mSELECT "servers".* FROM "servers" WHERE "servers"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/servers_controller.rb:77:in `set_server'
Completed 500 Internal Server Error in 10ms (ActiveRecord: 7.8ms (2 queries, 0 cached) | GC: 0.3ms)


  
NoMethodError (undefined method `[]' for nil:NilClass):
  
app/controllers/servers_controller.rb:61:in `transfer_ownership'
Started PATCH "/servers/2/transfer_ownership" for ::1 at 2024-11-02 16:00:29 -0400
Processing by ServersController#transfer_ownership as */*
  Parameters: {"owner_id"=>3, "id"=>"2", "server"=>{"owner_id"=>3}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:8:in `set_current_user'
  [1m[36mServer Load (0.2ms)[0m  [1m[34mSELECT "servers".* FROM "servers" WHERE "servers"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/servers_controller.rb:81:in `set_server'
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/servers_controller.rb:61:in `transfer_ownership'
  [1m[36mUser Exists? (1.0ms)[0m  [1m[34mSELECT 1 AS one FROM "users" INNER JOIN "server_members" ON "users"."id" = "server_members"."user_id" WHERE "server_members"."server_id" = $1 AND "users"."id" = $2 LIMIT $3[0m  [["server_id", 2], ["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/servers_controller.rb:63:in `transfer_ownership'
Completed 401 Unauthorized in 20ms (Views: 0.1ms | ActiveRecord: 12.6ms (4 queries, 0 cached) | GC: 3.3ms)


Started GET "/servers/2" for ::1 at 2024-11-02 16:00:59 -0400
Processing by ServersController#show as */*
  Parameters: {"id"=>"2"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:8:in `set_current_user'
  [1m[36mServer Load (0.2ms)[0m  [1m[34mSELECT "servers".* FROM "servers" WHERE "servers"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/servers_controller.rb:81:in `set_server'
  [1m[36mUser Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" INNER JOIN "server_members" ON "users"."id" = "server_members"."user_id" WHERE "server_members"."server_id" = $1 AND "users"."id" = $2 LIMIT $3[0m  [["server_id", 2], ["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/servers_controller.rb:98:in `is_member_of_server?'
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" INNER JOIN "server_members" ON "users"."id" = "server_members"."user_id" WHERE "server_members"."server_id" = $1[0m  [["server_id", 2]]
  â†³ app/controllers/servers_controller.rb:14:in `show'
  [1m[36mMessage Load (0.7ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."server_id" = $1[0m  [["server_id", 2]]
  â†³ app/controllers/servers_controller.rb:14:in `show'
Completed 200 OK in 19ms (Views: 9.2ms | ActiveRecord: 4.7ms (5 queries, 0 cached) | GC: 0.3ms)


Started POST "/login" for ::1 at 2024-11-02 16:01:07 -0400
Processing by SessionsController#create as */*
  Parameters: {"username"=>"user3", "password"=>"[FILTERED]", "session"=>{"username"=>"user3", "password"=>"[FILTERED]"}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:8:in `set_current_user'
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "user3"], ["LIMIT", 1]]
  â†³ app/controllers/sessions_controller.rb:3:in `create'
Completed 201 Created in 268ms (Views: 0.4ms | ActiveRecord: 0.5ms (2 queries, 0 cached) | GC: 0.1ms)


Started GET "/me" for ::1 at 2024-11-02 16:01:18 -0400
Processing by UsersController#show as */*
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:8:in `set_current_user'
Completed 200 OK in 3ms (Views: 0.3ms | ActiveRecord: 0.2ms (1 query, 0 cached) | GC: 0.3ms)


Started POST "/servers/2/join" for ::1 at 2024-11-02 16:01:21 -0400
Processing by ServersController#join as */*
  Parameters: {"id"=>"2"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:8:in `set_current_user'
  [1m[36mServer Load (0.2ms)[0m  [1m[34mSELECT "servers".* FROM "servers" WHERE "servers"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/servers_controller.rb:81:in `set_server'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/servers_controller.rb:41:in `join'
  [1m[36mServerMember Create (0.8ms)[0m  [1m[32mINSERT INTO "server_members" ("user_id", "server_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 3], ["server_id", 2], ["created_at", "2024-11-02 20:01:21.280156"], ["updated_at", "2024-11-02 20:01:21.280156"]]
  â†³ app/controllers/servers_controller.rb:41:in `join'
  [1m[36mTRANSACTION (1.1ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/servers_controller.rb:41:in `join'
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT "users".* FROM "users" INNER JOIN "server_members" ON "users"."id" = "server_members"."user_id" WHERE "server_members"."server_id" = $1[0m  [["server_id", 2]]
  â†³ app/controllers/servers_controller.rb:42:in `join'
Completed 201 Created in 21ms (Views: 1.3ms | ActiveRecord: 6.2ms (4 queries, 0 cached) | GC: 0.4ms)


Started POST "/login" for ::1 at 2024-11-02 16:01:34 -0400
Processing by SessionsController#create as */*
  Parameters: {"username"=>"user2", "password"=>"[FILTERED]", "session"=>{"username"=>"user2", "password"=>"[FILTERED]"}}
  [1m[36mUser Load (3.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:8:in `set_current_user'
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "user2"], ["LIMIT", 1]]
  â†³ app/controllers/sessions_controller.rb:3:in `create'
Completed 201 Created in 293ms (Views: 1.0ms | ActiveRecord: 3.6ms (2 queries, 0 cached) | GC: 0.0ms)


Started PATCH "/servers/2/transfer_ownership" for ::1 at 2024-11-02 16:01:46 -0400
Processing by ServersController#transfer_ownership as */*
  Parameters: {"owner_id"=>3, "id"=>"2", "server"=>{"owner_id"=>3}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:8:in `set_current_user'
  [1m[36mServer Load (0.2ms)[0m  [1m[34mSELECT "servers".* FROM "servers" WHERE "servers"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/servers_controller.rb:81:in `set_server'
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/servers_controller.rb:61:in `transfer_ownership'
  [1m[36mUser Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM "users" INNER JOIN "server_members" ON "users"."id" = "server_members"."user_id" WHERE "server_members"."server_id" = $1 AND "users"."id" = $2 LIMIT $3[0m  [["server_id", 2], ["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/servers_controller.rb:63:in `transfer_ownership'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/servers_controller.rb:66:in `transfer_ownership'
  [1m[36mServer Update (1.8ms)[0m  [1m[33mUPDATE "servers" SET "updated_at" = $1, "owner_id" = $2 WHERE "servers"."id" = $3[0m  [["updated_at", "2024-11-02 20:01:46.130010"], ["owner_id", 3], ["id", 2]]
  â†³ app/controllers/servers_controller.rb:66:in `transfer_ownership'
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/servers_controller.rb:66:in `transfer_ownership'
Completed 200 OK in 14ms (Views: 0.3ms | ActiveRecord: 3.3ms (5 queries, 0 cached) | GC: 0.0ms)


Started PATCH "/servers/2/transfer_ownership" for ::1 at 2024-11-02 16:01:53 -0400
Processing by ServersController#transfer_ownership as */*
  Parameters: {"owner_id"=>3, "id"=>"2", "server"=>{"owner_id"=>3}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:8:in `set_current_user'
  [1m[36mServer Load (0.2ms)[0m  [1m[34mSELECT "servers".* FROM "servers" WHERE "servers"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/servers_controller.rb:81:in `set_server'
Filter chain halted as :can_edit_server? rendered or redirected
Completed 401 Unauthorized in 3ms (Views: 0.1ms | ActiveRecord: 0.3ms (2 queries, 0 cached) | GC: 0.0ms)


Started POST "/login" for ::1 at 2024-11-04 23:32:40 -0500
  [1m[36mActiveRecord::SchemaMigration Load (1.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by SessionsController#create as */*
  Parameters: {"username"=>"user2", "password"=>"[FILTERED]", "session"=>{"username"=>"user2", "password"=>"[FILTERED]"}}
  [1m[36mUser Load (1.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:8:in `set_current_user'
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "user2"], ["LIMIT", 1]]
  â†³ app/controllers/sessions_controller.rb:3:in `create'
Completed 201 Created in 504ms (Views: 3.1ms | ActiveRecord: 18.2ms (2 queries, 0 cached) | GC: 1.6ms)


Started POST "/login" for ::1 at 2024-11-04 23:45:45 -0500
Processing by SessionsController#create as */*
  Parameters: {"username"=>"user2", "password"=>"[FILTERED]", "session"=>{"username"=>"user2", "password"=>"[FILTERED]"}}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:8:in `set_current_user'
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "user2"], ["LIMIT", 1]]
  â†³ app/controllers/sessions_controller.rb:3:in `create'
Completed 201 Created in 306ms (Views: 0.7ms | ActiveRecord: 11.4ms (2 queries, 0 cached) | GC: 12.1ms)


Started GET "/servers" for ::1 at 2024-11-04 23:45:46 -0500
Processing by ServersController#index as */*
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:8:in `set_current_user'
  [1m[36mServer Load (3.3ms)[0m  [1m[34mSELECT "servers".* FROM "servers"[0m
  â†³ app/controllers/servers_controller.rb:9:in `index'
Completed 200 OK in 16ms (Views: 2.9ms | ActiveRecord: 9.5ms (2 queries, 0 cached) | GC: 0.3ms)


Started GET "/servers" for ::1 at 2024-11-04 23:45:46 -0500
Processing by ServersController#index as */*
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:8:in `set_current_user'
  [1m[36mServer Load (0.3ms)[0m  [1m[34mSELECT "servers".* FROM "servers"[0m
  â†³ app/controllers/servers_controller.rb:9:in `index'
Completed 200 OK in 5ms (Views: 1.6ms | ActiveRecord: 0.8ms (2 queries, 0 cached) | GC: 0.3ms)


Started POST "/servers/2/join" for ::1 at 2024-11-04 23:45:54 -0500
Processing by ServersController#join as */*
  Parameters: {"id"=>"2"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:8:in `set_current_user'
  [1m[36mServer Load (0.5ms)[0m  [1m[34mSELECT "servers".* FROM "servers" WHERE "servers"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/servers_controller.rb:81:in `set_server'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/servers_controller.rb:41:in `join'
  [1m[36mServerMember Create (4.9ms)[0m  [1m[32mINSERT INTO "server_members" ("user_id", "server_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 2], ["server_id", 2], ["created_at", "2024-11-05 04:45:54.358622"], ["updated_at", "2024-11-05 04:45:54.358622"]]
  â†³ app/controllers/servers_controller.rb:41:in `join'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  â†³ app/controllers/servers_controller.rb:41:in `join'
Completed 422 Unprocessable Content in 26ms (Views: 0.1ms | ActiveRecord: 9.1ms (3 queries, 0 cached) | GC: 0.7ms)


Started POST "/servers/2/join" for ::1 at 2024-11-04 23:46:32 -0500
Processing by ServersController#join as */*
  Parameters: {"id"=>"2"}
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:8:in `set_current_user'
  [1m[36mServer Load (0.3ms)[0m  [1m[34mSELECT "servers".* FROM "servers" WHERE "servers"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/servers_controller.rb:81:in `set_server'
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/servers_controller.rb:41:in `join'
  [1m[36mServerMember Create (2.9ms)[0m  [1m[32mINSERT INTO "server_members" ("user_id", "server_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 2], ["server_id", 2], ["created_at", "2024-11-05 04:46:32.169612"], ["updated_at", "2024-11-05 04:46:32.169612"]]
  â†³ app/controllers/servers_controller.rb:41:in `join'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  â†³ app/controllers/servers_controller.rb:41:in `join'
Completed 422 Unprocessable Content in 20ms (Views: 0.3ms | ActiveRecord: 4.1ms (3 queries, 0 cached) | GC: 1.4ms)


Started POST "/servers/2/join" for ::1 at 2024-11-04 23:47:30 -0500
Processing by ServersController#join as */*
  Parameters: {"id"=>"2"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:8:in `set_current_user'
  [1m[36mServer Load (0.2ms)[0m  [1m[34mSELECT "servers".* FROM "servers" WHERE "servers"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/servers_controller.rb:85:in `set_server'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/servers_controller.rb:41:in `join'
  [1m[36mServerMember Create (1.2ms)[0m  [1m[32mINSERT INTO "server_members" ("user_id", "server_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 2], ["server_id", 2], ["created_at", "2024-11-05 04:47:30.862900"], ["updated_at", "2024-11-05 04:47:30.862900"]]
  â†³ app/controllers/servers_controller.rb:41:in `join'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  â†³ app/controllers/servers_controller.rb:41:in `join'
Completed 422 Unprocessable Content in 37ms (Views: 0.1ms | ActiveRecord: 22.3ms (3 queries, 0 cached) | GC: 1.1ms)


Started POST "/servers/2/join" for ::1 at 2024-11-04 23:50:56 -0500
Processing by ServersController#join as */*
  Parameters: {"id"=>"2"}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:8:in `set_current_user'
  [1m[36mServer Load (0.2ms)[0m  [1m[34mSELECT "servers".* FROM "servers" WHERE "servers"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/servers_controller.rb:81:in `set_server'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/servers_controller.rb:41:in `join'
  [1m[36mServerMember Create (0.7ms)[0m  [1m[32mINSERT INTO "server_members" ("user_id", "server_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 2], ["server_id", 2], ["created_at", "2024-11-05 04:50:56.322787"], ["updated_at", "2024-11-05 04:50:56.322787"]]
  â†³ app/controllers/servers_controller.rb:41:in `join'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  â†³ app/controllers/servers_controller.rb:41:in `join'
Completed 422 Unprocessable Content in 24ms (Views: 0.1ms | ActiveRecord: 13.5ms (3 queries, 0 cached) | GC: 0.0ms)


Started POST "/servers/2/join" for ::1 at 2024-11-04 23:52:36 -0500
Processing by ServersController#join as */*
  Parameters: {"id"=>"2"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:8:in `set_current_user'
  [1m[36mServer Load (0.3ms)[0m  [1m[34mSELECT "servers".* FROM "servers" WHERE "servers"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/servers_controller.rb:81:in `set_server'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/servers_controller.rb:41:in `join'
  [1m[36mServerMember Create (2.5ms)[0m  [1m[32mINSERT INTO "server_members" ("user_id", "server_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 2], ["server_id", 2], ["created_at", "2024-11-05 04:52:36.833736"], ["updated_at", "2024-11-05 04:52:36.833736"]]
  â†³ app/controllers/servers_controller.rb:41:in `join'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  â†³ app/controllers/servers_controller.rb:41:in `join'
Completed 422 Unprocessable Content in 19ms (Views: 0.2ms | ActiveRecord: 3.4ms (3 queries, 0 cached) | GC: 0.0ms)


Started POST "/servers/2/join" for ::1 at 2024-11-04 23:53:35 -0500
Processing by ServersController#join as */*
  Parameters: {"id"=>"2"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:8:in `set_current_user'
  [1m[36mServer Load (0.3ms)[0m  [1m[34mSELECT "servers".* FROM "servers" WHERE "servers"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/servers_controller.rb:81:in `set_server'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/servers_controller.rb:41:in `join'
  [1m[36mServerMember Create (1.8ms)[0m  [1m[32mINSERT INTO "server_members" ("user_id", "server_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 2], ["server_id", 2], ["created_at", "2024-11-05 04:53:35.335427"], ["updated_at", "2024-11-05 04:53:35.335427"]]
  â†³ app/controllers/servers_controller.rb:41:in `join'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  â†³ app/controllers/servers_controller.rb:41:in `join'
Completed 422 Unprocessable Content in 8ms (Views: 0.1ms | ActiveRecord: 2.3ms (3 queries, 0 cached) | GC: 0.0ms)


Started POST "/servers/2/join" for ::1 at 2024-11-04 23:53:35 -0500
Processing by ServersController#join as */*
  Parameters: {"id"=>"2"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:8:in `set_current_user'
  [1m[36mServer Load (0.1ms)[0m  [1m[34mSELECT "servers".* FROM "servers" WHERE "servers"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/servers_controller.rb:81:in `set_server'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/servers_controller.rb:41:in `join'
  [1m[36mServerMember Create (1.5ms)[0m  [1m[32mINSERT INTO "server_members" ("user_id", "server_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 2], ["server_id", 2], ["created_at", "2024-11-05 04:53:36.000800"], ["updated_at", "2024-11-05 04:53:36.000800"]]
  â†³ app/controllers/servers_controller.rb:41:in `join'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  â†³ app/controllers/servers_controller.rb:41:in `join'
Completed 422 Unprocessable Content in 7ms (Views: 0.2ms | ActiveRecord: 1.9ms (3 queries, 0 cached) | GC: 0.0ms)


Started POST "/servers/2/join" for ::1 at 2024-11-04 23:53:46 -0500
Processing by ServersController#join as */*
  Parameters: {"id"=>"2"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:8:in `set_current_user'
  [1m[36mServer Load (0.1ms)[0m  [1m[34mSELECT "servers".* FROM "servers" WHERE "servers"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/servers_controller.rb:81:in `set_server'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/servers_controller.rb:41:in `join'
  [1m[36mServerMember Create (3.0ms)[0m  [1m[32mINSERT INTO "server_members" ("user_id", "server_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 2], ["server_id", 2], ["created_at", "2024-11-05 04:53:46.492350"], ["updated_at", "2024-11-05 04:53:46.492350"]]
  â†³ app/controllers/servers_controller.rb:41:in `join'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  â†³ app/controllers/servers_controller.rb:41:in `join'
Completed 422 Unprocessable Content in 9ms (Views: 0.2ms | ActiveRecord: 3.5ms (3 queries, 0 cached) | GC: 0.0ms)


Started POST "/servers/2/join" for ::1 at 2024-11-04 23:53:46 -0500
Processing by ServersController#join as */*
  Parameters: {"id"=>"2"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:8:in `set_current_user'
  [1m[36mServer Load (0.2ms)[0m  [1m[34mSELECT "servers".* FROM "servers" WHERE "servers"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/servers_controller.rb:81:in `set_server'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/servers_controller.rb:41:in `join'
  [1m[36mServerMember Create (2.4ms)[0m  [1m[32mINSERT INTO "server_members" ("user_id", "server_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 2], ["server_id", 2], ["created_at", "2024-11-05 04:53:46.902802"], ["updated_at", "2024-11-05 04:53:46.902802"]]
  â†³ app/controllers/servers_controller.rb:41:in `join'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  â†³ app/controllers/servers_controller.rb:41:in `join'
Completed 422 Unprocessable Content in 8ms (Views: 0.1ms | ActiveRecord: 2.9ms (3 queries, 0 cached) | GC: 0.9ms)


Started GET "/servers" for ::1 at 2024-11-04 23:53:48 -0500
Processing by ServersController#index as */*
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:8:in `set_current_user'
  [1m[36mServer Load (0.6ms)[0m  [1m[34mSELECT "servers".* FROM "servers"[0m
  â†³ app/controllers/servers_controller.rb:9:in `index'
Completed 200 OK in 30ms (Views: 2.2ms | ActiveRecord: 0.9ms (2 queries, 0 cached) | GC: 1.4ms)


Started GET "/servers" for ::1 at 2024-11-04 23:53:50 -0500
Processing by ServersController#index as */*
  [1m[36mUser Load (4.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:8:in `set_current_user'
  [1m[36mServer Load (0.4ms)[0m  [1m[34mSELECT "servers".* FROM "servers"[0m
  â†³ app/controllers/servers_controller.rb:9:in `index'
Completed 200 OK in 49ms (Views: 2.3ms | ActiveRecord: 4.3ms (2 queries, 0 cached) | GC: 0.8ms)


Started POST "/servers/2/join" for ::1 at 2024-11-04 23:53:51 -0500
Processing by ServersController#join as */*
  Parameters: {"id"=>"2"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:8:in `set_current_user'
  [1m[36mServer Load (0.2ms)[0m  [1m[34mSELECT "servers".* FROM "servers" WHERE "servers"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/servers_controller.rb:81:in `set_server'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/servers_controller.rb:41:in `join'
  [1m[36mServerMember Create (2.0ms)[0m  [1m[32mINSERT INTO "server_members" ("user_id", "server_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 2], ["server_id", 2], ["created_at", "2024-11-05 04:53:51.404211"], ["updated_at", "2024-11-05 04:53:51.404211"]]
  â†³ app/controllers/servers_controller.rb:41:in `join'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  â†³ app/controllers/servers_controller.rb:41:in `join'
Completed 422 Unprocessable Content in 10ms (Views: 0.2ms | ActiveRecord: 2.5ms (3 queries, 0 cached) | GC: 0.5ms)


Started POST "/servers/2/join" for ::1 at 2024-11-04 23:55:13 -0500
Processing by ServersController#join as */*
  Parameters: {"id"=>"2"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:8:in `set_current_user'
  [1m[36mServer Load (0.3ms)[0m  [1m[34mSELECT "servers".* FROM "servers" WHERE "servers"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/servers_controller.rb:81:in `set_server'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/servers_controller.rb:41:in `join'
  [1m[36mServerMember Create (2.0ms)[0m  [1m[32mINSERT INTO "server_members" ("user_id", "server_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 2], ["server_id", 2], ["created_at", "2024-11-05 04:55:13.787461"], ["updated_at", "2024-11-05 04:55:13.787461"]]
  â†³ app/controllers/servers_controller.rb:41:in `join'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  â†³ app/controllers/servers_controller.rb:41:in `join'
Completed 422 Unprocessable Content in 10ms (Views: 0.5ms | ActiveRecord: 2.8ms (3 queries, 0 cached) | GC: 0.2ms)


Started POST "/servers/2/join" for ::1 at 2024-11-04 23:55:42 -0500
Processing by ServersController#join as */*
  Parameters: {"id"=>"2"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:8:in `set_current_user'
  [1m[36mServer Load (0.1ms)[0m  [1m[34mSELECT "servers".* FROM "servers" WHERE "servers"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/servers_controller.rb:81:in `set_server'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/servers_controller.rb:41:in `join'
  [1m[36mServerMember Create (1.9ms)[0m  [1m[32mINSERT INTO "server_members" ("user_id", "server_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 2], ["server_id", 2], ["created_at", "2024-11-05 04:55:42.719681"], ["updated_at", "2024-11-05 04:55:42.719681"]]
  â†³ app/controllers/servers_controller.rb:41:in `join'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  â†³ app/controllers/servers_controller.rb:41:in `join'
Completed 422 Unprocessable Content in 9ms (Views: 0.1ms | ActiveRecord: 2.4ms (3 queries, 0 cached) | GC: 0.6ms)


Started POST "/servers/2/join" for ::1 at 2024-11-04 23:55:43 -0500
Processing by ServersController#join as */*
  Parameters: {"id"=>"2"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:8:in `set_current_user'
  [1m[36mServer Load (2.4ms)[0m  [1m[34mSELECT "servers".* FROM "servers" WHERE "servers"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/servers_controller.rb:81:in `set_server'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/servers_controller.rb:41:in `join'
  [1m[36mServerMember Create (2.9ms)[0m  [1m[32mINSERT INTO "server_members" ("user_id", "server_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 2], ["server_id", 2], ["created_at", "2024-11-05 04:55:43.504596"], ["updated_at", "2024-11-05 04:55:43.504596"]]
  â†³ app/controllers/servers_controller.rb:41:in `join'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  â†³ app/controllers/servers_controller.rb:41:in `join'
Completed 422 Unprocessable Content in 28ms (Views: 0.2ms | ActiveRecord: 6.8ms (3 queries, 0 cached) | GC: 0.5ms)


Started POST "/servers/2/join" for ::1 at 2024-11-04 23:56:07 -0500
Processing by ServersController#join as */*
  Parameters: {"id"=>"2"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:8:in `set_current_user'
  [1m[36mServer Load (0.2ms)[0m  [1m[34mSELECT "servers".* FROM "servers" WHERE "servers"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/servers_controller.rb:81:in `set_server'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/servers_controller.rb:41:in `join'
  [1m[36mServerMember Create (2.7ms)[0m  [1m[32mINSERT INTO "server_members" ("user_id", "server_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 2], ["server_id", 2], ["created_at", "2024-11-05 04:56:07.508867"], ["updated_at", "2024-11-05 04:56:07.508867"]]
  â†³ app/controllers/servers_controller.rb:41:in `join'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  â†³ app/controllers/servers_controller.rb:41:in `join'
Completed 422 Unprocessable Content in 14ms (Views: 0.3ms | ActiveRecord: 3.5ms (3 queries, 0 cached) | GC: 1.0ms)


Started POST "/servers/2/join" for ::1 at 2024-11-04 23:56:39 -0500
Processing by ServersController#join as */*
  Parameters: {"id"=>"2"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:8:in `set_current_user'
  [1m[36mServer Load (0.1ms)[0m  [1m[34mSELECT "servers".* FROM "servers" WHERE "servers"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/servers_controller.rb:81:in `set_server'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/servers_controller.rb:41:in `join'
  [1m[36mServerMember Create (2.5ms)[0m  [1m[32mINSERT INTO "server_members" ("user_id", "server_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 2], ["server_id", 2], ["created_at", "2024-11-05 04:56:39.415133"], ["updated_at", "2024-11-05 04:56:39.415133"]]
  â†³ app/controllers/servers_controller.rb:41:in `join'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  â†³ app/controllers/servers_controller.rb:41:in `join'
Completed 422 Unprocessable Content in 9ms (Views: 0.1ms | ActiveRecord: 2.9ms (3 queries, 0 cached) | GC: 1.2ms)


Started POST "/servers/2/join" for ::1 at 2024-11-04 23:58:43 -0500
Processing by ServersController#join as */*
  Parameters: {"id"=>"2"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:8:in `set_current_user'
  [1m[36mServer Load (0.2ms)[0m  [1m[34mSELECT "servers".* FROM "servers" WHERE "servers"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/servers_controller.rb:81:in `set_server'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/servers_controller.rb:41:in `join'
  [1m[36mServerMember Create (2.4ms)[0m  [1m[32mINSERT INTO "server_members" ("user_id", "server_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 2], ["server_id", 2], ["created_at", "2024-11-05 04:58:43.513137"], ["updated_at", "2024-11-05 04:58:43.513137"]]
  â†³ app/controllers/servers_controller.rb:41:in `join'
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  â†³ app/controllers/servers_controller.rb:41:in `join'
Completed 422 Unprocessable Content in 41ms (Views: 0.1ms | ActiveRecord: 18.4ms (3 queries, 0 cached) | GC: 4.1ms)


Started POST "/servers/2/join" for ::1 at 2024-11-04 23:58:43 -0500
Processing by ServersController#join as */*
  Parameters: {"id"=>"2"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:8:in `set_current_user'
  [1m[36mServer Load (0.1ms)[0m  [1m[34mSELECT "servers".* FROM "servers" WHERE "servers"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/servers_controller.rb:81:in `set_server'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/servers_controller.rb:41:in `join'
  [1m[36mServerMember Create (1.8ms)[0m  [1m[32mINSERT INTO "server_members" ("user_id", "server_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 2], ["server_id", 2], ["created_at", "2024-11-05 04:58:43.797725"], ["updated_at", "2024-11-05 04:58:43.797725"]]
  â†³ app/controllers/servers_controller.rb:41:in `join'
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[31mROLLBACK[0m
  â†³ app/controllers/servers_controller.rb:41:in `join'
Completed 422 Unprocessable Content in 11ms (Views: 0.5ms | ActiveRecord: 2.7ms (3 queries, 0 cached) | GC: 0.3ms)


Started GET "/servers" for ::1 at 2024-11-04 23:59:42 -0500
Processing by ServersController#index as */*
  [1m[36mUser Load (2.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:8:in `set_current_user'
  [1m[36mServer Load (2.3ms)[0m  [1m[34mSELECT "servers".* FROM "servers"[0m
  â†³ app/controllers/servers_controller.rb:9:in `index'
Completed 200 OK in 23ms (Views: 5.2ms | ActiveRecord: 4.8ms (2 queries, 0 cached) | GC: 0.0ms)


Started POST "/login" for ::1 at 2024-11-04 23:59:59 -0500
Processing by SessionsController#create as */*
  Parameters: {"username"=>"user2", "password"=>"[FILTERED]", "session"=>{"username"=>"user2", "password"=>"[FILTERED]"}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:8:in `set_current_user'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "user2"], ["LIMIT", 1]]
  â†³ app/controllers/sessions_controller.rb:3:in `create'
Completed 201 Created in 255ms (Views: 0.4ms | ActiveRecord: 0.4ms (2 queries, 0 cached) | GC: 0.0ms)


Started GET "/servers" for ::1 at 2024-11-04 23:59:59 -0500
Processing by ServersController#index as */*
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:8:in `set_current_user'
  [1m[36mServer Load (0.2ms)[0m  [1m[34mSELECT "servers".* FROM "servers"[0m
  â†³ app/controllers/servers_controller.rb:9:in `index'
Completed 200 OK in 2ms (Views: 0.7ms | ActiveRecord: 0.3ms (2 queries, 0 cached) | GC: 0.0ms)


Started GET "/servers" for ::1 at 2024-11-04 23:59:59 -0500
Processing by ServersController#index as */*
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:8:in `set_current_user'
  [1m[36mServer Load (0.5ms)[0m  [1m[34mSELECT "servers".* FROM "servers"[0m
  â†³ app/controllers/servers_controller.rb:9:in `index'
Completed 200 OK in 3ms (Views: 1.0ms | ActiveRecord: 0.8ms (2 queries, 0 cached) | GC: 0.2ms)


Started POST "/servers/2/join" for ::1 at 2024-11-05 00:02:19 -0500
Processing by ServersController#join as */*
  Parameters: {"id"=>"2"}
  [1m[36mUser Load (3.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:8:in `set_current_user'
  [1m[36mServer Load (0.1ms)[0m  [1m[34mSELECT "servers".* FROM "servers" WHERE "servers"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/servers_controller.rb:81:in `set_server'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/servers_controller.rb:41:in `join'
  [1m[36mServerMember Create (1.3ms)[0m  [1m[32mINSERT INTO "server_members" ("user_id", "server_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 2], ["server_id", 2], ["created_at", "2024-11-05 05:02:19.499776"], ["updated_at", "2024-11-05 05:02:19.499776"]]
  â†³ app/controllers/servers_controller.rb:41:in `join'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  â†³ app/controllers/servers_controller.rb:41:in `join'
Completed 422 Unprocessable Content in 33ms (Views: 0.2ms | ActiveRecord: 17.1ms (3 queries, 0 cached) | GC: 0.0ms)


Started GET "/servers/2" for ::1 at 2024-11-05 00:02:49 -0500
Processing by ServersController#show as */*
  Parameters: {"id"=>"2"}
  [1m[36mUser Load (8.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:8:in `set_current_user'
  [1m[36mServer Load (0.6ms)[0m  [1m[34mSELECT "servers".* FROM "servers" WHERE "servers"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/servers_controller.rb:81:in `set_server'
  [1m[36mUser Exists? (42.9ms)[0m  [1m[34mSELECT 1 AS one FROM "users" INNER JOIN "server_members" ON "users"."id" = "server_members"."user_id" WHERE "server_members"."server_id" = $1 AND "users"."id" = $2 LIMIT $3[0m  [["server_id", 2], ["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/servers_controller.rb:98:in `is_member_of_server?'
  [1m[36mUser Load (3.8ms)[0m  [1m[34mSELECT "users".* FROM "users" INNER JOIN "server_members" ON "users"."id" = "server_members"."user_id" WHERE "server_members"."server_id" = $1[0m  [["server_id", 2]]
  â†³ app/controllers/servers_controller.rb:14:in `show'
  [1m[36mMessage Load (1.5ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."server_id" = $1[0m  [["server_id", 2]]
  â†³ app/controllers/servers_controller.rb:14:in `show'
Completed 200 OK in 155ms (Views: 58.5ms | ActiveRecord: 64.4ms (5 queries, 0 cached) | GC: 0.0ms)


Started GET "/servers/2" for ::1 at 2024-11-05 00:02:50 -0500
Processing by ServersController#show as */*
  Parameters: {"id"=>"2"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:8:in `set_current_user'
  [1m[36mServer Load (0.4ms)[0m  [1m[34mSELECT "servers".* FROM "servers" WHERE "servers"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/servers_controller.rb:81:in `set_server'
  [1m[36mUser Exists? (2.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" INNER JOIN "server_members" ON "users"."id" = "server_members"."user_id" WHERE "server_members"."server_id" = $1 AND "users"."id" = $2 LIMIT $3[0m  [["server_id", 2], ["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/servers_controller.rb:98:in `is_member_of_server?'
  [1m[36mUser Load (1.3ms)[0m  [1m[34mSELECT "users".* FROM "users" INNER JOIN "server_members" ON "users"."id" = "server_members"."user_id" WHERE "server_members"."server_id" = $1[0m  [["server_id", 2]]
  â†³ app/controllers/servers_controller.rb:14:in `show'
  [1m[36mMessage Load (1.1ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."server_id" = $1[0m  [["server_id", 2]]
  â†³ app/controllers/servers_controller.rb:14:in `show'
Completed 200 OK in 87ms (Views: 14.9ms | ActiveRecord: 5.5ms (5 queries, 0 cached) | GC: 0.9ms)


Started GET "/servers/2" for ::1 at 2024-11-05 00:08:59 -0500
Started GET "/cable" for ::1 at 2024-11-05 00:08:59 -0500
Processing by ServersController#show as */*
  Parameters: {"id"=>"2"}
  [1m[36mUser Load (1.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:8:in `set_current_user'
  [1m[36mServer Load (1.6ms)[0m  [1m[34mSELECT "servers".* FROM "servers" WHERE "servers"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/servers_controller.rb:81:in `set_server'
  [1m[36mUser Exists? (131.0ms)[0m  [1m[34mSELECT 1 AS one FROM "users" INNER JOIN "server_members" ON "users"."id" = "server_members"."user_id" WHERE "server_members"."server_id" = $1 AND "users"."id" = $2 LIMIT $3[0m  [["server_id", 2], ["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/servers_controller.rb:98:in `is_member_of_server?'
  [1m[36mUser Load (4.5ms)[0m  [1m[34mSELECT "users".* FROM "users" INNER JOIN "server_members" ON "users"."id" = "server_members"."user_id" WHERE "server_members"."server_id" = $1[0m  [["server_id", 2]]
  â†³ app/controllers/servers_controller.rb:14:in `show'
Started GET "/cable" [WebSocket] for ::1 at 2024-11-05 00:09:00 -0500
  [1m[36mMessage Load (2.4ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."server_id" = $1[0m  [["server_id", 2]]
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
  â†³ app/controllers/servers_controller.rb:14:in `show'
Completed 200 OK in 737ms (Views: 486.6ms | ActiveRecord: 154.7ms (5 queries, 0 cached) | GC: 2.1ms)


  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/channels/application_cable/connection.rb:12:in `find_verified_user'
Registered connection (Z2lkOi8vbWVzc2VuZ2VyL1VzZXIvMg)
Finished "/cable" [WebSocket] for ::1 at 2024-11-05 00:09:00 -0500
Started GET "/servers/2" for ::1 at 2024-11-05 00:09:02 -0500
Processing by ServersController#show as */*
  Parameters: {"id"=>"2"}
Started GET "/cable" for ::1 at 2024-11-05 00:09:02 -0500
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:8:in `set_current_user'
  [1m[36mServer Load (0.6ms)[0m  [1m[34mSELECT "servers".* FROM "servers" WHERE "servers"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/servers_controller.rb:81:in `set_server'
  [1m[36mUser Exists? (4.5ms)[0m  [1m[34mSELECT 1 AS one FROM "users" INNER JOIN "server_members" ON "users"."id" = "server_members"."user_id" WHERE "server_members"."server_id" = $1 AND "users"."id" = $2 LIMIT $3[0m  [["server_id", 2], ["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/servers_controller.rb:98:in `is_member_of_server?'
  [1m[36mUser Load (1.0ms)[0m  [1m[34mSELECT "users".* FROM "users" INNER JOIN "server_members" ON "users"."id" = "server_members"."user_id" WHERE "server_members"."server_id" = $1[0m  [["server_id", 2]]
  â†³ app/controllers/servers_controller.rb:14:in `show'
  [1m[36mMessage Load (0.4ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."server_id" = $1[0m  [["server_id", 2]]
  â†³ app/controllers/servers_controller.rb:14:in `show'
Completed 200 OK in 24ms (Views: 5.7ms | ActiveRecord: 5.3ms (5 queries, 0 cached) | GC: 0.7ms)


Started GET "/cable" [WebSocket] for ::1 at 2024-11-05 00:09:02 -0500
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/channels/application_cable/connection.rb:12:in `find_verified_user'
Registered connection (Z2lkOi8vbWVzc2VuZ2VyL1VzZXIvMg)
Finished "/cable" [WebSocket] for ::1 at 2024-11-05 00:09:28 -0500
Started GET "/servers/2" for ::1 at 2024-11-05 00:09:29 -0500
Started GET "/cable" for ::1 at 2024-11-05 00:09:29 -0500
Processing by ServersController#show as */*
  Parameters: {"id"=>"2"}
  [1m[36mUser Load (0.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:8:in `set_current_user'
  [1m[36mServer Load (0.5ms)[0m  [1m[34mSELECT "servers".* FROM "servers" WHERE "servers"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/servers_controller.rb:81:in `set_server'
  [1m[36mUser Exists? (2.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" INNER JOIN "server_members" ON "users"."id" = "server_members"."user_id" WHERE "server_members"."server_id" = $1 AND "users"."id" = $2 LIMIT $3[0m  [["server_id", 2], ["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/servers_controller.rb:98:in `is_member_of_server?'
Started GET "/cable" [WebSocket] for ::1 at 2024-11-05 00:09:29 -0500
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
  [1m[36mUser Load (1.8ms)[0m  [1m[34mSELECT "users".* FROM "users" INNER JOIN "server_members" ON "users"."id" = "server_members"."user_id" WHERE "server_members"."server_id" = $1[0m  [["server_id", 2]]
  â†³ app/controllers/servers_controller.rb:14:in `show'
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/channels/application_cable/connection.rb:12:in `find_verified_user'
Registered connection (Z2lkOi8vbWVzc2VuZ2VyL1VzZXIvMg)
  [1m[36mMessage Load (0.4ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."server_id" = $1[0m  [["server_id", 2]]
  â†³ app/controllers/servers_controller.rb:14:in `show'
Completed 200 OK in 52ms (Views: 0.5ms | ActiveRecord: 25.2ms (5 queries, 0 cached) | GC: 0.8ms)


Finished "/cable" [WebSocket] for ::1 at 2024-11-05 00:10:21 -0500
Started GET "/servers/2" for ::1 at 2024-11-05 00:10:22 -0500
Started GET "/cable" for ::1 at 2024-11-05 00:10:22 -0500
Processing by ServersController#show as */*
  Parameters: {"id"=>"2"}
Started GET "/cable" [WebSocket] for ::1 at 2024-11-05 00:10:23 -0500
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
  [1m[36mUser Load (2.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mUser Load (11.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:8:in `set_current_user'
  â†³ app/channels/application_cable/connection.rb:12:in `find_verified_user'
Registered connection (Z2lkOi8vbWVzc2VuZ2VyL1VzZXIvMg)
  [1m[36mServer Load (15.8ms)[0m  [1m[34mSELECT "servers".* FROM "servers" WHERE "servers"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/servers_controller.rb:81:in `set_server'
  [1m[36mUser Exists? (18.7ms)[0m  [1m[34mSELECT 1 AS one FROM "users" INNER JOIN "server_members" ON "users"."id" = "server_members"."user_id" WHERE "server_members"."server_id" = $1 AND "users"."id" = $2 LIMIT $3[0m  [["server_id", 2], ["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/servers_controller.rb:98:in `is_member_of_server?'
  [1m[36mUser Load (3.3ms)[0m  [1m[34mSELECT "users".* FROM "users" INNER JOIN "server_members" ON "users"."id" = "server_members"."user_id" WHERE "server_members"."server_id" = $1[0m  [["server_id", 2]]
  â†³ app/controllers/servers_controller.rb:14:in `show'
  [1m[36mMessage Load (7.1ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."server_id" = $1[0m  [["server_id", 2]]
  â†³ app/controllers/servers_controller.rb:14:in `show'
Completed 200 OK in 258ms (Views: 60.2ms | ActiveRecord: 56.7ms (5 queries, 0 cached) | GC: 0.6ms)


  [1m[36mServer Load (0.8ms)[0m  [1m[34mSELECT "servers".* FROM "servers" WHERE "servers"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/channels/message_channel.rb:3:in `subscribed'
  [1m[36mUser Exists? (7.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" INNER JOIN "server_members" ON "users"."id" = "server_members"."user_id" WHERE "server_members"."server_id" = $1 AND "users"."id" = $2 LIMIT $3[0m  [["server_id", 2], ["id", 2], ["LIMIT", 1]]
  â†³ app/channels/message_channel.rb:4:in `subscribed'
MessageChannel is transmitting the subscription confirmation
MessageChannel is streaming from server_2
Started POST "/login" for ::1 at 2024-11-05 00:11:14 -0500
Processing by SessionsController#create as */*
  Parameters: {"username"=>"user3", "password"=>"[FILTERED]", "session"=>{"username"=>"user3", "password"=>"[FILTERED]"}}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:8:in `set_current_user'
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "user3"], ["LIMIT", 1]]
  â†³ app/controllers/sessions_controller.rb:3:in `create'
Completed 201 Created in 255ms (Views: 0.5ms | ActiveRecord: 1.1ms (2 queries, 0 cached) | GC: 0.0ms)


Started GET "/servers" for ::1 at 2024-11-05 00:11:15 -0500
Processing by ServersController#index as */*
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:8:in `set_current_user'
  [1m[36mServer Load (0.3ms)[0m  [1m[34mSELECT "servers".* FROM "servers"[0m
  â†³ app/controllers/servers_controller.rb:9:in `index'
Completed 200 OK in 2ms (Views: 0.6ms | ActiveRecord: 0.7ms (2 queries, 0 cached) | GC: 0.0ms)


Started GET "/servers" for ::1 at 2024-11-05 00:11:15 -0500
Processing by ServersController#index as */*
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:8:in `set_current_user'
  [1m[36mServer Load (0.2ms)[0m  [1m[34mSELECT "servers".* FROM "servers"[0m
  â†³ app/controllers/servers_controller.rb:9:in `index'
Completed 200 OK in 2ms (Views: 0.5ms | ActiveRecord: 0.4ms (2 queries, 0 cached) | GC: 0.0ms)


Started GET "/servers/2" for ::1 at 2024-11-05 00:11:16 -0500
Started GET "/cable" for ::1 at 2024-11-05 00:11:16 -0500
Processing by ServersController#show as */*
  Parameters: {"id"=>"2"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:8:in `set_current_user'
  [1m[36mServer Load (0.2ms)[0m  [1m[34mSELECT "servers".* FROM "servers" WHERE "servers"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/servers_controller.rb:81:in `set_server'
  [1m[36mUser Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM "users" INNER JOIN "server_members" ON "users"."id" = "server_members"."user_id" WHERE "server_members"."server_id" = $1 AND "users"."id" = $2 LIMIT $3[0m  [["server_id", 2], ["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/servers_controller.rb:98:in `is_member_of_server?'
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" INNER JOIN "server_members" ON "users"."id" = "server_members"."user_id" WHERE "server_members"."server_id" = $1[0m  [["server_id", 2]]
  â†³ app/controllers/servers_controller.rb:14:in `show'
Started GET "/cable" [WebSocket] for ::1 at 2024-11-05 00:11:16 -0500
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
  [1m[36mMessage Load (1.1ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."server_id" = $1[0m  [["server_id", 2]]
  â†³ app/controllers/servers_controller.rb:14:in `show'
Completed 200 OK in 11ms (Views: 3.3ms | ActiveRecord: 2.5ms (5 queries, 0 cached) | GC: 0.0ms)


  [1m[36mUser Load (0.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/channels/application_cable/connection.rb:12:in `find_verified_user'
Registered connection (Z2lkOi8vbWVzc2VuZ2VyL1VzZXIvMw)
Started GET "/servers/2" for ::1 at 2024-11-05 00:11:16 -0500
Processing by ServersController#show as */*
  Parameters: {"id"=>"2"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:8:in `set_current_user'
  [1m[36mServer Load (0.8ms)[0m  [1m[34mSELECT "servers".* FROM "servers" WHERE "servers"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/servers_controller.rb:81:in `set_server'
Started GET "/cable" for ::1 at 2024-11-05 00:11:16 -0500
  [1m[36mUser Exists? (0.9ms)[0m  [1m[34mSELECT 1 AS one FROM "users" INNER JOIN "server_members" ON "users"."id" = "server_members"."user_id" WHERE "server_members"."server_id" = $1 AND "users"."id" = $2 LIMIT $3[0m  [["server_id", 2], ["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/servers_controller.rb:98:in `is_member_of_server?'
  [1m[36mUser Load (1.7ms)[0m  [1m[34mSELECT "users".* FROM "users" INNER JOIN "server_members" ON "users"."id" = "server_members"."user_id" WHERE "server_members"."server_id" = $1[0m  [["server_id", 2]]
  â†³ app/controllers/servers_controller.rb:14:in `show'
  [1m[36mMessage Load (0.4ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."server_id" = $1[0m  [["server_id", 2]]
  â†³ app/controllers/servers_controller.rb:14:in `show'
Completed 200 OK in 19ms (Views: 5.1ms | ActiveRecord: 3.0ms (5 queries, 0 cached) | GC: 0.0ms)


Started GET "/cable" [WebSocket] for ::1 at 2024-11-05 00:11:16 -0500
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/channels/application_cable/connection.rb:12:in `find_verified_user'
Registered connection (Z2lkOi8vbWVzc2VuZ2VyL1VzZXIvMw)
Started GET "/cable" for ::1 at 2024-11-05 00:11:16 -0500
Started GET "/cable" [WebSocket] for ::1 at 2024-11-05 00:11:16 -0500
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/channels/application_cable/connection.rb:12:in `find_verified_user'
Registered connection (Z2lkOi8vbWVzc2VuZ2VyL1VzZXIvMw)
Could not execute command from ({"command"=>"message", "identifier"=>"{\"channel\":\"MessageChannel\",\"server_id\":\"2\"}", "data"=>"{\"action\":\"create\",\"server_id\":\"2\",\"content\":\"hey\"}"}) [RuntimeError - Unable to find subscription with identifier: {"channel":"MessageChannel","server_id":"2"}]: /Users/cdugo/.rbenv/versions/3.2.2/lib/ruby/gems/3.2.0/gems/actioncable-7.2.2/lib/action_cable/connection/subscriptions.rb:80:in `find' | /Users/cdugo/.rbenv/versions/3.2.2/lib/ruby/gems/3.2.0/gems/actioncable-7.2.2/lib/action_cable/connection/subscriptions.rb:61:in `perform_action' | /Users/cdugo/.rbenv/versions/3.2.2/lib/ruby/gems/3.2.0/gems/actioncable-7.2.2/lib/action_cable/connection/subscriptions.rb:24:in `execute_command' | /Users/cdugo/.rbenv/versions/3.2.2/lib/ruby/gems/3.2.0/gems/actioncable-7.2.2/lib/action_cable/connection/base.rb:111:in `block in handle_channel_command' | /Users/cdugo/.rbenv/versions/3.2.2/lib/ruby/gems/3.2.0/gems/activesupport-7.2.2/lib/active_support/callbacks.rb:101:in `run_callbacks'
Finished "/cable" [WebSocket] for ::1 at 2024-11-05 00:14:10 -0500
Finished "/cable" [WebSocket] for ::1 at 2024-11-05 00:14:10 -0500
Finished "/cable" [WebSocket] for ::1 at 2024-11-05 00:14:10 -0500
Started GET "/cable" for ::1 at 2024-11-05 00:14:10 -0500
Started GET "/servers/2" for ::1 at 2024-11-05 00:14:10 -0500
Started GET "/cable" [WebSocket] for ::1 at 2024-11-05 00:14:10 -0500
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
  [1m[36mUser Load (4.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
Processing by ServersController#show as */*
  Parameters: {"id"=>"2"}
  â†³ app/channels/application_cable/connection.rb:12:in `find_verified_user'
Registered connection (Z2lkOi8vbWVzc2VuZ2VyL1VzZXIvMw)
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:8:in `set_current_user'
  [1m[36mServer Load (1.4ms)[0m  [1m[34mSELECT "servers".* FROM "servers" WHERE "servers"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/servers_controller.rb:81:in `set_server'
  [1m[36mServer Load (4.7ms)[0m  [1m[34mSELECT "servers".* FROM "servers" WHERE "servers"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/channels/message_channel.rb:3:in `subscribed'
  [1m[36mUser Exists? (1.8ms)[0m  [1m[34mSELECT 1 AS one FROM "users" INNER JOIN "server_members" ON "users"."id" = "server_members"."user_id" WHERE "server_members"."server_id" = $1 AND "users"."id" = $2 LIMIT $3[0m  [["server_id", 2], ["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/servers_controller.rb:98:in `is_member_of_server?'
  [1m[36mUser Exists? (1.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" INNER JOIN "server_members" ON "users"."id" = "server_members"."user_id" WHERE "server_members"."server_id" = $1 AND "users"."id" = $2 LIMIT $3[0m  [["server_id", 2], ["id", 3], ["LIMIT", 1]]
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" INNER JOIN "server_members" ON "users"."id" = "server_members"."user_id" WHERE "server_members"."server_id" = $1[0m  [["server_id", 2]]
  â†³ app/channels/message_channel.rb:4:in `subscribed'
  â†³ app/controllers/servers_controller.rb:14:in `show'
MessageChannel is transmitting the subscription confirmation
MessageChannel is streaming from server_2
  [1m[36mMessage Load (0.3ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."server_id" = $1[0m  [["server_id", 2]]
  â†³ app/controllers/servers_controller.rb:14:in `show'
Completed 200 OK in 21ms (Views: 5.6ms | ActiveRecord: 4.5ms (5 queries, 0 cached) | GC: 0.3ms)


Finished "/cable" [WebSocket] for ::1 at 2024-11-05 00:14:12 -0500
MessageChannel stopped streaming from server_2
Started GET "/servers/2" for ::1 at 2024-11-05 00:14:12 -0500
Started GET "/cable" for ::1 at 2024-11-05 00:14:12 -0500
Started GET "/cable" [WebSocket] for ::1 at 2024-11-05 00:14:12 -0500
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
Processing by ServersController#show as */*
  Parameters: {"id"=>"2"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:8:in `set_current_user'
  [1m[36mUser Load (2.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/channels/application_cable/connection.rb:12:in `find_verified_user'
Registered connection (Z2lkOi8vbWVzc2VuZ2VyL1VzZXIvMg)
  [1m[36mServer Load (0.9ms)[0m  [1m[34mSELECT "servers".* FROM "servers" WHERE "servers"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/servers_controller.rb:81:in `set_server'
  [1m[36mUser Exists? (1.8ms)[0m  [1m[34mSELECT 1 AS one FROM "users" INNER JOIN "server_members" ON "users"."id" = "server_members"."user_id" WHERE "server_members"."server_id" = $1 AND "users"."id" = $2 LIMIT $3[0m  [["server_id", 2], ["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/servers_controller.rb:98:in `is_member_of_server?'
  [1m[36mServer Load (2.9ms)[0m  [1m[34mSELECT "servers".* FROM "servers" WHERE "servers"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/channels/message_channel.rb:3:in `subscribed'
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT "users".* FROM "users" INNER JOIN "server_members" ON "users"."id" = "server_members"."user_id" WHERE "server_members"."server_id" = $1[0m  [["server_id", 2]]
  [1m[36mUser Exists? (1.0ms)[0m  [1m[34mSELECT 1 AS one FROM "users" INNER JOIN "server_members" ON "users"."id" = "server_members"."user_id" WHERE "server_members"."server_id" = $1 AND "users"."id" = $2 LIMIT $3[0m  [["server_id", 2], ["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/servers_controller.rb:14:in `show'
  â†³ app/channels/message_channel.rb:4:in `subscribed'
MessageChannel is transmitting the subscription confirmation
MessageChannel is streaming from server_2
  [1m[36mMessage Load (0.3ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."server_id" = $1[0m  [["server_id", 2]]
  â†³ app/controllers/servers_controller.rb:14:in `show'
Completed 200 OK in 29ms (Views: 10.1ms | ActiveRecord: 4.1ms (5 queries, 0 cached) | GC: 0.6ms)


Could not execute command from ({"command"=>"message", "identifier"=>"{\"channel\":\"MessageChannel\",\"server_id\":2}", "data"=>"{\"action\":\"create\",\"server_id\":\"2\",\"content\":\"hi\",\"parent_id\":null}"}) [RuntimeError - Unable to find subscription with identifier: {"channel":"MessageChannel","server_id":2}]: /Users/cdugo/.rbenv/versions/3.2.2/lib/ruby/gems/3.2.0/gems/actioncable-7.2.2/lib/action_cable/connection/subscriptions.rb:80:in `find' | /Users/cdugo/.rbenv/versions/3.2.2/lib/ruby/gems/3.2.0/gems/actioncable-7.2.2/lib/action_cable/connection/subscriptions.rb:61:in `perform_action' | /Users/cdugo/.rbenv/versions/3.2.2/lib/ruby/gems/3.2.0/gems/actioncable-7.2.2/lib/action_cable/connection/subscriptions.rb:24:in `execute_command' | /Users/cdugo/.rbenv/versions/3.2.2/lib/ruby/gems/3.2.0/gems/actioncable-7.2.2/lib/action_cable/connection/base.rb:111:in `block in handle_channel_command' | /Users/cdugo/.rbenv/versions/3.2.2/lib/ruby/gems/3.2.0/gems/activesupport-7.2.2/lib/active_support/callbacks.rb:101:in `run_callbacks'
Started GET "/cable" for ::1 at 2024-11-05 00:15:59 -0500
Started GET "/cable" for ::1 at 2024-11-05 00:15:59 -0500
  [1m[36mActiveRecord::SchemaMigration Load (1.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Started GET "/cable" [WebSocket] for ::1 at 2024-11-05 00:15:59 -0500
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
Started GET "/cable" [WebSocket] for ::1 at 2024-11-05 00:15:59 -0500
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/channels/application_cable/connection.rb:12:in `find_verified_user'
Registered connection (Z2lkOi8vbWVzc2VuZ2VyL1VzZXIvMg)
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/channels/application_cable/connection.rb:12:in `find_verified_user'
Registered connection (Z2lkOi8vbWVzc2VuZ2VyL1VzZXIvMw)
Could not execute command from ({"command"=>"message", "identifier"=>"{\"channel\":\"MessageChannel\",\"server_id\":2}", "data"=>"{\"action\":\"create\",\"server_id\":\"2\",\"content\":\"s\",\"parent_id\":null}"}) [RuntimeError - Unable to find subscription with identifier: {"channel":"MessageChannel","server_id":2}]: /Users/cdugo/.rbenv/versions/3.2.2/lib/ruby/gems/3.2.0/gems/actioncable-7.2.2/lib/action_cable/connection/subscriptions.rb:80:in `find' | /Users/cdugo/.rbenv/versions/3.2.2/lib/ruby/gems/3.2.0/gems/actioncable-7.2.2/lib/action_cable/connection/subscriptions.rb:61:in `perform_action' | /Users/cdugo/.rbenv/versions/3.2.2/lib/ruby/gems/3.2.0/gems/actioncable-7.2.2/lib/action_cable/connection/subscriptions.rb:24:in `execute_command' | /Users/cdugo/.rbenv/versions/3.2.2/lib/ruby/gems/3.2.0/gems/actioncable-7.2.2/lib/action_cable/connection/base.rb:111:in `block in handle_channel_command' | /Users/cdugo/.rbenv/versions/3.2.2/lib/ruby/gems/3.2.0/gems/activesupport-7.2.2/lib/active_support/callbacks.rb:101:in `run_callbacks'
Finished "/cable" [WebSocket] for ::1 at 2024-11-05 00:16:11 -0500
Started GET "/cable" for ::1 at 2024-11-05 00:16:11 -0500
Started GET "/servers/2" for ::1 at 2024-11-05 00:16:11 -0500
Started GET "/cable" [WebSocket] for ::1 at 2024-11-05 00:16:11 -0500
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/channels/application_cable/connection.rb:12:in `find_verified_user'
Registered connection (Z2lkOi8vbWVzc2VuZ2VyL1VzZXIvMw)
Attempting to subscribe with params: {"channel"=>"MessageChannel", "server_id"=>"2"}
Current user: #<User id: 3, username: "user3", email: [FILTERED], is_active: false, created_at: "2024-11-02 19:48:10.755244000 +0000", updated_at: "2024-11-02 19:48:10.755244000 +0000", password_digest: [FILTERED]>
  [1m[36mServer Load (0.4ms)[0m  [1m[34mSELECT "servers".* FROM "servers" WHERE "servers"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/channels/message_channel.rb:6:in `subscribed'
Processing by ServersController#show as */*
  Parameters: {"id"=>"2"}
  [1m[36mUser Exists? (2.8ms)[0m  [1m[34mSELECT 1 AS one FROM "users" INNER JOIN "server_members" ON "users"."id" = "server_members"."user_id" WHERE "server_members"."server_id" = $1 AND "users"."id" = $2 LIMIT $3[0m  [["server_id", 2], ["id", 3], ["LIMIT", 1]]
  â†³ app/channels/message_channel.rb:7:in `subscribed'
Successfully subscribed to server_2
MessageChannel is transmitting the subscription confirmation
  [1m[36mUser Load (1.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
MessageChannel is streaming from server_2
  â†³ app/controllers/application_controller.rb:8:in `set_current_user'
  [1m[36mServer Load (0.6ms)[0m  [1m[34mSELECT "servers".* FROM "servers" WHERE "servers"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/servers_controller.rb:82:in `set_server'
  [1m[36mUser Exists? (1.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" INNER JOIN "server_members" ON "users"."id" = "server_members"."user_id" WHERE "server_members"."server_id" = $1 AND "users"."id" = $2 LIMIT $3[0m  [["server_id", 2], ["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/servers_controller.rb:99:in `is_member_of_server?'
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT "users".* FROM "users" INNER JOIN "server_members" ON "users"."id" = "server_members"."user_id" WHERE "server_members"."server_id" = $1[0m  [["server_id", 2]]
  â†³ app/controllers/servers_controller.rb:15:in `show'
  [1m[36mMessage Load (0.6ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."server_id" = $1[0m  [["server_id", 2]]
  â†³ app/controllers/servers_controller.rb:15:in `show'
Completed 200 OK in 42ms (Views: 18.9ms | ActiveRecord: 7.1ms (5 queries, 0 cached) | GC: 17.5ms)


Could not execute command from ({"command"=>"message", "identifier"=>"{\"channel\":\"MessageChannel\",\"server_id\":2}", "data"=>"{\"action\":\"create\",\"server_id\":\"2\",\"content\":\"s\",\"parent_id\":null}"}) [RuntimeError - Unable to find subscription with identifier: {"channel":"MessageChannel","server_id":2}]: /Users/cdugo/.rbenv/versions/3.2.2/lib/ruby/gems/3.2.0/gems/actioncable-7.2.2/lib/action_cable/connection/subscriptions.rb:80:in `find' | /Users/cdugo/.rbenv/versions/3.2.2/lib/ruby/gems/3.2.0/gems/actioncable-7.2.2/lib/action_cable/connection/subscriptions.rb:61:in `perform_action' | /Users/cdugo/.rbenv/versions/3.2.2/lib/ruby/gems/3.2.0/gems/actioncable-7.2.2/lib/action_cable/connection/subscriptions.rb:24:in `execute_command' | /Users/cdugo/.rbenv/versions/3.2.2/lib/ruby/gems/3.2.0/gems/actioncable-7.2.2/lib/action_cable/connection/base.rb:111:in `block in handle_channel_command' | /Users/cdugo/.rbenv/versions/3.2.2/lib/ruby/gems/3.2.0/gems/activesupport-7.2.2/lib/active_support/callbacks.rb:101:in `run_callbacks'
Could not execute command from ({"command"=>"message", "identifier"=>"{\"channel\":\"MessageChannel\",\"server_id\":2}", "data"=>"{\"action\":\"create\",\"server_id\":\"2\",\"content\":\"s\",\"parent_id\":null}"}) [RuntimeError - Unable to find subscription with identifier: {"channel":"MessageChannel","server_id":2}]: /Users/cdugo/.rbenv/versions/3.2.2/lib/ruby/gems/3.2.0/gems/actioncable-7.2.2/lib/action_cable/connection/subscriptions.rb:80:in `find' | /Users/cdugo/.rbenv/versions/3.2.2/lib/ruby/gems/3.2.0/gems/actioncable-7.2.2/lib/action_cable/connection/subscriptions.rb:61:in `perform_action' | /Users/cdugo/.rbenv/versions/3.2.2/lib/ruby/gems/3.2.0/gems/actioncable-7.2.2/lib/action_cable/connection/subscriptions.rb:24:in `execute_command' | /Users/cdugo/.rbenv/versions/3.2.2/lib/ruby/gems/3.2.0/gems/actioncable-7.2.2/lib/action_cable/connection/base.rb:111:in `block in handle_channel_command' | /Users/cdugo/.rbenv/versions/3.2.2/lib/ruby/gems/3.2.0/gems/activesupport-7.2.2/lib/active_support/callbacks.rb:101:in `run_callbacks'
Finished "/cable" [WebSocket] for ::1 at 2024-11-05 00:16:44 -0500
MessageChannel stopped streaming from server_2
Started GET "/cable" for ::1 at 2024-11-05 00:16:44 -0500
Started GET "/servers/2" for ::1 at 2024-11-05 00:16:44 -0500
Processing by ServersController#show as */*
  Parameters: {"id"=>"2"}
Started GET "/cable" [WebSocket] for ::1 at 2024-11-05 00:16:45 -0500
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:8:in `set_current_user'
  â†³ app/channels/application_cable/connection.rb:12:in `find_verified_user'
Registered connection (Z2lkOi8vbWVzc2VuZ2VyL1VzZXIvMw)
Current user: #<User id: 3, username: "user3", email: [FILTERED], is_active: false, created_at: "2024-11-02 19:48:10.755244000 +0000", updated_at: "2024-11-02 19:48:10.755244000 +0000", password_digest: [FILTERED]>
  [1m[36mServer Load (0.2ms)[0m  [1m[34mSELECT "servers".* FROM "servers" WHERE "servers"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/servers_controller.rb:82:in `set_server'
  [1m[36mServer Load (0.4ms)[0m  [1m[34mSELECT "servers".* FROM "servers" WHERE "servers"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/channels/message_channel.rb:6:in `subscribed'
  [1m[36mUser Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" INNER JOIN "server_members" ON "users"."id" = "server_members"."user_id" WHERE "server_members"."server_id" = $1 AND "users"."id" = $2 LIMIT $3[0m  [["server_id", 2], ["id", 3], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" INNER JOIN "server_members" ON "users"."id" = "server_members"."user_id" WHERE "server_members"."server_id" = $1 AND "users"."id" = $2 LIMIT $3[0m  [["server_id", 2], ["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/servers_controller.rb:99:in `is_member_of_server?'
  â†³ app/channels/message_channel.rb:7:in `subscribed'
Successfully subscribed to server_2
MessageChannel is transmitting the subscription confirmation
MessageChannel is streaming from server_2
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" INNER JOIN "server_members" ON "users"."id" = "server_members"."user_id" WHERE "server_members"."server_id" = $1[0m  [["server_id", 2]]
  â†³ app/controllers/servers_controller.rb:15:in `show'
  [1m[36mMessage Load (0.4ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."server_id" = $1[0m  [["server_id", 2]]
  â†³ app/controllers/servers_controller.rb:15:in `show'
Completed 200 OK in 35ms (Views: 4.7ms | ActiveRecord: 17.6ms (5 queries, 0 cached) | GC: 0.0ms)


Started GET "/cable" for ::1 at 2024-11-05 00:16:46 -0500
Started GET "/cable" [WebSocket] for ::1 at 2024-11-05 00:16:46 -0500
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/channels/application_cable/connection.rb:12:in `find_verified_user'
Registered connection (Z2lkOi8vbWVzc2VuZ2VyL1VzZXIvMg)
Finished "/cable" [WebSocket] for ::1 at 2024-11-05 00:17:22 -0500
MessageChannel stopped streaming from server_2
Started GET "/cable" for ::1 at 2024-11-05 00:17:22 -0500
Started GET "/servers/2" for ::1 at 2024-11-05 00:17:22 -0500
Processing by ServersController#show as */*
  Parameters: {"id"=>"2"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:8:in `set_current_user'
Started GET "/cable" [WebSocket] for ::1 at 2024-11-05 00:17:22 -0500
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/channels/application_cable/connection.rb:12:in `find_verified_user'
Registered connection (Z2lkOi8vbWVzc2VuZ2VyL1VzZXIvMw)
  [1m[36mServer Load (0.8ms)[0m  [1m[34mSELECT "servers".* FROM "servers" WHERE "servers"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/servers_controller.rb:82:in `set_server'
  [1m[36mServer Load (0.2ms)[0m  [1m[34mSELECT "servers".* FROM "servers" WHERE "servers"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/channels/message_channel.rb:6:in `subscribed'
  [1m[36mUser Exists? (0.8ms)[0m  [1m[34mSELECT 1 AS one FROM "users" INNER JOIN "server_members" ON "users"."id" = "server_members"."user_id" WHERE "server_members"."server_id" = $1 AND "users"."id" = $2 LIMIT $3[0m  [["server_id", 2], ["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/servers_controller.rb:99:in `is_member_of_server?'
  [1m[36mUser Exists? (0.7ms)[0m  [1m[34mSELECT 1 AS one FROM "users" INNER JOIN "server_members" ON "users"."id" = "server_members"."user_id" WHERE "server_members"."server_id" = $1 AND "users"."id" = $2 LIMIT $3[0m  [["server_id", 2], ["id", 3], ["LIMIT", 1]]
  â†³ app/channels/message_channel.rb:7:in `subscribed'
MessageChannel is transmitting the subscription confirmation
MessageChannel is streaming from server_2
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" INNER JOIN "server_members" ON "users"."id" = "server_members"."user_id" WHERE "server_members"."server_id" = $1[0m  [["server_id", 2]]
  â†³ app/controllers/servers_controller.rb:15:in `show'
  [1m[36mMessage Load (0.1ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."server_id" = $1[0m  [["server_id", 2]]
  â†³ app/controllers/servers_controller.rb:15:in `show'
Completed 200 OK in 31ms (Views: 3.2ms | ActiveRecord: 18.6ms (5 queries, 0 cached) | GC: 4.8ms)


Started GET "/cable" for ::1 at 2024-11-05 00:17:24 -0500
Started GET "/cable" [WebSocket] for ::1 at 2024-11-05 00:17:24 -0500
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/channels/application_cable/connection.rb:12:in `find_verified_user'
Registered connection (Z2lkOi8vbWVzc2VuZ2VyL1VzZXIvMg)
Started GET "/cable" for ::1 at 2024-11-05 00:19:51 -0500
Started GET "/cable" [WebSocket] for ::1 at 2024-11-05 00:19:51 -0500
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/channels/application_cable/connection.rb:12:in `find_verified_user'
Registered connection (Z2lkOi8vbWVzc2VuZ2VyL1VzZXIvMw)
Could not execute command from ({"command"=>"message", "identifier"=>"{\"channel\":\"MessageChannel\",\"server_id\":2}", "data"=>"{\"action\":\"create\",\"server_id\":\"2\",\"content\":\"hi\",\"parent_id\":null}"}) [RuntimeError - Unable to find subscription with identifier: {"channel":"MessageChannel","server_id":2}]: /Users/cdugo/.rbenv/versions/3.2.2/lib/ruby/gems/3.2.0/gems/actioncable-7.2.2/lib/action_cable/connection/subscriptions.rb:80:in `find' | /Users/cdugo/.rbenv/versions/3.2.2/lib/ruby/gems/3.2.0/gems/actioncable-7.2.2/lib/action_cable/connection/subscriptions.rb:61:in `perform_action' | /Users/cdugo/.rbenv/versions/3.2.2/lib/ruby/gems/3.2.0/gems/actioncable-7.2.2/lib/action_cable/connection/subscriptions.rb:24:in `execute_command' | /Users/cdugo/.rbenv/versions/3.2.2/lib/ruby/gems/3.2.0/gems/actioncable-7.2.2/lib/action_cable/connection/base.rb:111:in `block in handle_channel_command' | /Users/cdugo/.rbenv/versions/3.2.2/lib/ruby/gems/3.2.0/gems/activesupport-7.2.2/lib/active_support/callbacks.rb:101:in `run_callbacks'
Finished "/cable" [WebSocket] for ::1 at 2024-11-05 00:24:05 -0500
MessageChannel stopped streaming from server_2
Finished "/cable" [WebSocket] for ::1 at 2024-11-05 00:24:05 -0500
Started GET "/cable" for ::1 at 2024-11-05 00:24:06 -0500
Started GET "/servers/2" for ::1 at 2024-11-05 00:24:06 -0500
Processing by ServersController#show as */*
  Parameters: {"id"=>"2"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:8:in `set_current_user'
Started GET "/cable" [WebSocket] for ::1 at 2024-11-05 00:24:06 -0500
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
  [1m[36mServer Load (0.1ms)[0m  [1m[34mSELECT "servers".* FROM "servers" WHERE "servers"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/servers_controller.rb:82:in `set_server'
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" INNER JOIN "server_members" ON "users"."id" = "server_members"."user_id" WHERE "server_members"."server_id" = $1 AND "users"."id" = $2 LIMIT $3[0m  [["server_id", 2], ["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/servers_controller.rb:99:in `is_member_of_server?'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" INNER JOIN "server_members" ON "users"."id" = "server_members"."user_id" WHERE "server_members"."server_id" = $1[0m  [["server_id", 2]]
  â†³ app/controllers/servers_controller.rb:15:in `show'
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/channels/application_cable/connection.rb:12:in `find_verified_user'
Registered connection (Z2lkOi8vbWVzc2VuZ2VyL1VzZXIvMw)
  [1m[36mMessage Load (0.7ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."server_id" = $1[0m  [["server_id", 2]]
  â†³ app/controllers/servers_controller.rb:15:in `show'
Completed 200 OK in 29ms (Views: 4.3ms | ActiveRecord: 15.4ms (5 queries, 0 cached) | GC: 0.0ms)


  [1m[36mServer Load (0.4ms)[0m  [1m[34mSELECT "servers".* FROM "servers" WHERE "servers"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/channels/message_channel.rb:7:in `subscribed'
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" INNER JOIN "server_members" ON "users"."id" = "server_members"."user_id" WHERE "server_members"."server_id" = $1 AND "users"."id" = $2 LIMIT $3[0m  [["server_id", 2], ["id", 3], ["LIMIT", 1]]
  â†³ app/channels/message_channel.rb:8:in `subscribed'
MessageChannel transmitting {:type=>"confirm_subscription", :server_id=>"2"}
MessageChannel is streaming from server_2
MessageChannel is transmitting the subscription confirmation
Started GET "/cable" for ::1 at 2024-11-05 00:24:07 -0500
Started GET "/servers/2" for ::1 at 2024-11-05 00:24:07 -0500
Processing by ServersController#show as */*
  Parameters: {"id"=>"2"}
Started GET "/cable" [WebSocket] for ::1 at 2024-11-05 00:24:08 -0500
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
  [1m[36mUser Load (3.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:8:in `set_current_user'
  [1m[36mUser Load (3.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/channels/application_cable/connection.rb:12:in `find_verified_user'
Registered connection (Z2lkOi8vbWVzc2VuZ2VyL1VzZXIvMg)
  [1m[36mServer Load (2.1ms)[0m  [1m[34mSELECT "servers".* FROM "servers" WHERE "servers"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/servers_controller.rb:82:in `set_server'
  [1m[36mServer Load (2.4ms)[0m  [1m[34mSELECT "servers".* FROM "servers" WHERE "servers"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/channels/message_channel.rb:7:in `subscribed'
  [1m[36mUser Exists? (1.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" INNER JOIN "server_members" ON "users"."id" = "server_members"."user_id" WHERE "server_members"."server_id" = $1 AND "users"."id" = $2 LIMIT $3[0m  [["server_id", 2], ["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/servers_controller.rb:99:in `is_member_of_server?'
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT "users".* FROM "users" INNER JOIN "server_members" ON "users"."id" = "server_members"."user_id" WHERE "server_members"."server_id" = $1[0m  [["server_id", 2]]
  â†³ app/controllers/servers_controller.rb:15:in `show'
  [1m[36mMessage Load (0.2ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."server_id" = $1[0m  [["server_id", 2]]
  â†³ app/controllers/servers_controller.rb:15:in `show'
Completed 200 OK in 26ms (Views: 3.0ms | ActiveRecord: 7.8ms (5 queries, 0 cached) | GC: 0.0ms)


  [1m[36mUser Exists? (4.8ms)[0m  [1m[34mSELECT 1 AS one FROM "users" INNER JOIN "server_members" ON "users"."id" = "server_members"."user_id" WHERE "server_members"."server_id" = $1 AND "users"."id" = $2 LIMIT $3[0m  [["server_id", 2], ["id", 2], ["LIMIT", 1]]
  â†³ app/channels/message_channel.rb:8:in `subscribed'
MessageChannel transmitting {:type=>"confirm_subscription", :server_id=>"2"}
MessageChannel is transmitting the subscription confirmation
MessageChannel is streaming from server_2
Could not execute command from ({"command"=>"message", "identifier"=>"{\"channel\":\"MessageChannel\",\"server_id\":2}", "data"=>"{\"action\":\"create\",\"server_id\":\"2\",\"content\":\"hi\",\"parent_id\":null}"}) [RuntimeError - Unable to find subscription with identifier: {"channel":"MessageChannel","server_id":2}]: /Users/cdugo/.rbenv/versions/3.2.2/lib/ruby/gems/3.2.0/gems/actioncable-7.2.2/lib/action_cable/connection/subscriptions.rb:80:in `find' | /Users/cdugo/.rbenv/versions/3.2.2/lib/ruby/gems/3.2.0/gems/actioncable-7.2.2/lib/action_cable/connection/subscriptions.rb:61:in `perform_action' | /Users/cdugo/.rbenv/versions/3.2.2/lib/ruby/gems/3.2.0/gems/actioncable-7.2.2/lib/action_cable/connection/subscriptions.rb:24:in `execute_command' | /Users/cdugo/.rbenv/versions/3.2.2/lib/ruby/gems/3.2.0/gems/actioncable-7.2.2/lib/action_cable/connection/base.rb:111:in `block in handle_channel_command' | /Users/cdugo/.rbenv/versions/3.2.2/lib/ruby/gems/3.2.0/gems/activesupport-7.2.2/lib/active_support/callbacks.rb:101:in `run_callbacks'
Could not execute command from ({"command"=>"message", "identifier"=>"{\"channel\":\"MessageChannel\",\"server_id\":2}", "data"=>"{\"action\":\"create\",\"server_id\":\"2\",\"content\":\"s\",\"parent_id\":null}"}) [RuntimeError - Unable to find subscription with identifier: {"channel":"MessageChannel","server_id":2}]: /Users/cdugo/.rbenv/versions/3.2.2/lib/ruby/gems/3.2.0/gems/actioncable-7.2.2/lib/action_cable/connection/subscriptions.rb:80:in `find' | /Users/cdugo/.rbenv/versions/3.2.2/lib/ruby/gems/3.2.0/gems/actioncable-7.2.2/lib/action_cable/connection/subscriptions.rb:61:in `perform_action' | /Users/cdugo/.rbenv/versions/3.2.2/lib/ruby/gems/3.2.0/gems/actioncable-7.2.2/lib/action_cable/connection/subscriptions.rb:24:in `execute_command' | /Users/cdugo/.rbenv/versions/3.2.2/lib/ruby/gems/3.2.0/gems/actioncable-7.2.2/lib/action_cable/connection/base.rb:111:in `block in handle_channel_command' | /Users/cdugo/.rbenv/versions/3.2.2/lib/ruby/gems/3.2.0/gems/activesupport-7.2.2/lib/active_support/callbacks.rb:101:in `run_callbacks'
Started GET "/cable" for ::1 at 2024-11-05 00:26:14 -0500
Started GET "/cable" [WebSocket] for ::1 at 2024-11-05 00:26:14 -0500
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/channels/application_cable/connection.rb:12:in `find_verified_user'
Registered connection (Z2lkOi8vbWVzc2VuZ2VyL1VzZXIvMw)
Could not execute command from ({"command"=>"message", "identifier"=>"{\"channel\":\"MessageChannel\",\"server_id\":2}", "data"=>"{\"action\":\"create\",\"server_id\":\"2\",\"content\":\"s\",\"parent_id\":null}"}) [RuntimeError - Unable to find subscription with identifier: {"channel":"MessageChannel","server_id":2}]: /Users/cdugo/.rbenv/versions/3.2.2/lib/ruby/gems/3.2.0/gems/actioncable-7.2.2/lib/action_cable/connection/subscriptions.rb:80:in `find' | /Users/cdugo/.rbenv/versions/3.2.2/lib/ruby/gems/3.2.0/gems/actioncable-7.2.2/lib/action_cable/connection/subscriptions.rb:61:in `perform_action' | /Users/cdugo/.rbenv/versions/3.2.2/lib/ruby/gems/3.2.0/gems/actioncable-7.2.2/lib/action_cable/connection/subscriptions.rb:24:in `execute_command' | /Users/cdugo/.rbenv/versions/3.2.2/lib/ruby/gems/3.2.0/gems/actioncable-7.2.2/lib/action_cable/connection/base.rb:111:in `block in handle_channel_command' | /Users/cdugo/.rbenv/versions/3.2.2/lib/ruby/gems/3.2.0/gems/activesupport-7.2.2/lib/active_support/callbacks.rb:101:in `run_callbacks'
Finished "/cable" [WebSocket] for ::1 at 2024-11-05 00:26:28 -0500
MessageChannel stopped streaming from server_2
Finished "/cable" [WebSocket] for ::1 at 2024-11-05 00:26:28 -0500
Started GET "/servers/2" for ::1 at 2024-11-05 00:26:28 -0500
Started GET "/cable" for ::1 at 2024-11-05 00:26:28 -0500
Processing by ServersController#show as */*
  Parameters: {"id"=>"2"}
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:8:in `set_current_user'
  [1m[36mServer Load (0.3ms)[0m  [1m[34mSELECT "servers".* FROM "servers" WHERE "servers"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/servers_controller.rb:82:in `set_server'
  [1m[36mUser Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM "users" INNER JOIN "server_members" ON "users"."id" = "server_members"."user_id" WHERE "server_members"."server_id" = $1 AND "users"."id" = $2 LIMIT $3[0m  [["server_id", 2], ["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/servers_controller.rb:99:in `is_member_of_server?'
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT "users".* FROM "users" INNER JOIN "server_members" ON "users"."id" = "server_members"."user_id" WHERE "server_members"."server_id" = $1[0m  [["server_id", 2]]
  â†³ app/controllers/servers_controller.rb:15:in `show'
  [1m[36mMessage Load (0.5ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."server_id" = $1[0m  [["server_id", 2]]
  â†³ app/controllers/servers_controller.rb:15:in `show'
Completed 200 OK in 13ms (Views: 4.4ms | ActiveRecord: 2.6ms (5 queries, 0 cached) | GC: 0.4ms)


Started GET "/cable" [WebSocket] for ::1 at 2024-11-05 00:26:29 -0500
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/channels/application_cable/connection.rb:12:in `find_verified_user'
Registered connection (Z2lkOi8vbWVzc2VuZ2VyL1VzZXIvMw)
  [1m[36mServer Load (0.7ms)[0m  [1m[34mSELECT "servers".* FROM "servers" WHERE "servers"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/channels/message_channel.rb:7:in `subscribed'
  [1m[36mUser Exists? (1.6ms)[0m  [1m[34mSELECT 1 AS one FROM "users" INNER JOIN "server_members" ON "users"."id" = "server_members"."user_id" WHERE "server_members"."server_id" = $1 AND "users"."id" = $2 LIMIT $3[0m  [["server_id", 2], ["id", 3], ["LIMIT", 1]]
  â†³ app/channels/message_channel.rb:8:in `subscribed'
MessageChannel transmitting {:type=>"confirm_subscription", :server_id=>"2"}
MessageChannel is streaming from server_2
MessageChannel is transmitting the subscription confirmation
Finished "/cable" [WebSocket] for ::1 at 2024-11-05 00:27:21 -0500
MessageChannel stopped streaming from server_2
Started GET "/cable" for ::1 at 2024-11-05 00:27:21 -0500
Started GET "/servers/2" for ::1 at 2024-11-05 00:27:21 -0500
Started GET "/cable" [WebSocket] for ::1 at 2024-11-05 00:27:21 -0500
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
  [1m[36mUser Load (1.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/channels/application_cable/connection.rb:12:in `find_verified_user'
Registered connection (Z2lkOi8vbWVzc2VuZ2VyL1VzZXIvMw)
  [1m[36mServer Load (0.5ms)[0m  [1m[34mSELECT "servers".* FROM "servers" WHERE "servers"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/channels/message_channel.rb:7:in `subscribed'
  [1m[36mUser Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM "users" INNER JOIN "server_members" ON "users"."id" = "server_members"."user_id" WHERE "server_members"."server_id" = $1 AND "users"."id" = $2 LIMIT $3[0m  [["server_id", 2], ["id", 3], ["LIMIT", 1]]
  â†³ app/channels/message_channel.rb:8:in `subscribed'
MessageChannel transmitting {:type=>"confirm_subscription", :server_id=>"2"}
MessageChannel is streaming from server_2
MessageChannel is transmitting the subscription confirmation
Processing by ServersController#show as */*
  Parameters: {"id"=>"2"}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:8:in `set_current_user'
  [1m[36mServer Load (0.2ms)[0m  [1m[34mSELECT "servers".* FROM "servers" WHERE "servers"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/servers_controller.rb:82:in `set_server'
  [1m[36mUser Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" INNER JOIN "server_members" ON "users"."id" = "server_members"."user_id" WHERE "server_members"."server_id" = $1 AND "users"."id" = $2 LIMIT $3[0m  [["server_id", 2], ["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/servers_controller.rb:99:in `is_member_of_server?'
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" INNER JOIN "server_members" ON "users"."id" = "server_members"."user_id" WHERE "server_members"."server_id" = $1[0m  [["server_id", 2]]
  â†³ app/controllers/servers_controller.rb:15:in `show'
  [1m[36mMessage Load (0.1ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."server_id" = $1[0m  [["server_id", 2]]
  â†³ app/controllers/servers_controller.rb:15:in `show'
Completed 200 OK in 5ms (Views: 2.1ms | ActiveRecord: 1.1ms (5 queries, 0 cached) | GC: 0.4ms)


Could not execute command from ({"command"=>"message", "identifier"=>"{\"channel\":\"MessageChannel\",\"server_id\":2}", "data"=>"{\"action\":\"create\",\"server_id\":\"2\",\"content\":\"s\",\"parent_id\":null}"}) [RuntimeError - Unable to find subscription with identifier: {"channel":"MessageChannel","server_id":2}]: /Users/cdugo/.rbenv/versions/3.2.2/lib/ruby/gems/3.2.0/gems/actioncable-7.2.2/lib/action_cable/connection/subscriptions.rb:80:in `find' | /Users/cdugo/.rbenv/versions/3.2.2/lib/ruby/gems/3.2.0/gems/actioncable-7.2.2/lib/action_cable/connection/subscriptions.rb:61:in `perform_action' | /Users/cdugo/.rbenv/versions/3.2.2/lib/ruby/gems/3.2.0/gems/actioncable-7.2.2/lib/action_cable/connection/subscriptions.rb:24:in `execute_command' | /Users/cdugo/.rbenv/versions/3.2.2/lib/ruby/gems/3.2.0/gems/actioncable-7.2.2/lib/action_cable/connection/base.rb:111:in `block in handle_channel_command' | /Users/cdugo/.rbenv/versions/3.2.2/lib/ruby/gems/3.2.0/gems/activesupport-7.2.2/lib/active_support/callbacks.rb:101:in `run_callbacks'
Finished "/cable" [WebSocket] for ::1 at 2024-11-05 00:28:57 -0500
MessageChannel stopped streaming from server_2
Started GET "/servers/2" for ::1 at 2024-11-05 00:28:57 -0500
Started GET "/cable" for ::1 at 2024-11-05 00:28:57 -0500
Processing by ServersController#show as */*
  Parameters: {"id"=>"2"}
  [1m[36mUser Load (2.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:8:in `set_current_user'
  [1m[36mServer Load (0.6ms)[0m  [1m[34mSELECT "servers".* FROM "servers" WHERE "servers"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/servers_controller.rb:82:in `set_server'
  [1m[36mUser Exists? (2.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" INNER JOIN "server_members" ON "users"."id" = "server_members"."user_id" WHERE "server_members"."server_id" = $1 AND "users"."id" = $2 LIMIT $3[0m  [["server_id", 2], ["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/servers_controller.rb:99:in `is_member_of_server?'
  [1m[36mUser Load (1.1ms)[0m  [1m[34mSELECT "users".* FROM "users" INNER JOIN "server_members" ON "users"."id" = "server_members"."user_id" WHERE "server_members"."server_id" = $1[0m  [["server_id", 2]]
  â†³ app/controllers/servers_controller.rb:15:in `show'
  [1m[36mMessage Load (0.4ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."server_id" = $1[0m  [["server_id", 2]]
  â†³ app/controllers/servers_controller.rb:15:in `show'
Completed 200 OK in 27ms (Views: 5.8ms | ActiveRecord: 6.3ms (5 queries, 0 cached) | GC: 0.2ms)


Started GET "/cable" [WebSocket] for ::1 at 2024-11-05 00:28:57 -0500
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/channels/application_cable/connection.rb:12:in `find_verified_user'
Registered connection (Z2lkOi8vbWVzc2VuZ2VyL1VzZXIvMw)
  [1m[36mServer Load (0.2ms)[0m  [1m[34mSELECT "servers".* FROM "servers" WHERE "servers"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/channels/message_channel.rb:7:in `subscribed'
  [1m[36mUser Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM "users" INNER JOIN "server_members" ON "users"."id" = "server_members"."user_id" WHERE "server_members"."server_id" = $1 AND "users"."id" = $2 LIMIT $3[0m  [["server_id", 2], ["id", 3], ["LIMIT", 1]]
  â†³ app/channels/message_channel.rb:8:in `subscribed'
MessageChannel transmitting {:type=>"confirm_subscription", :server_id=>"2"}
MessageChannel is transmitting the subscription confirmation
MessageChannel is streaming from server_2
Could not execute command from ({"command"=>"message", "identifier"=>{"channel"=>"MessageChannel", "server_id"=>2}, "data"=>{"action"=>"create", "server_id"=>"2", "content"=>"s", "parent_id"=>nil}}) [RuntimeError - Unable to find subscription with identifier: {"channel"=>"MessageChannel", "server_id"=>2}]: /Users/cdugo/.rbenv/versions/3.2.2/lib/ruby/gems/3.2.0/gems/actioncable-7.2.2/lib/action_cable/connection/subscriptions.rb:80:in `find' | /Users/cdugo/.rbenv/versions/3.2.2/lib/ruby/gems/3.2.0/gems/actioncable-7.2.2/lib/action_cable/connection/subscriptions.rb:61:in `perform_action' | /Users/cdugo/.rbenv/versions/3.2.2/lib/ruby/gems/3.2.0/gems/actioncable-7.2.2/lib/action_cable/connection/subscriptions.rb:24:in `execute_command' | /Users/cdugo/.rbenv/versions/3.2.2/lib/ruby/gems/3.2.0/gems/actioncable-7.2.2/lib/action_cable/connection/base.rb:111:in `block in handle_channel_command' | /Users/cdugo/.rbenv/versions/3.2.2/lib/ruby/gems/3.2.0/gems/activesupport-7.2.2/lib/active_support/callbacks.rb:101:in `run_callbacks'
Could not execute command from ({"command"=>"message", "identifier"=>{"channel"=>"MessageChannel", "server_id"=>2}, "data"=>{"action"=>"create", "server_id"=>"2", "content"=>"s", "parent_id"=>nil}}) [RuntimeError - Unable to find subscription with identifier: {"channel"=>"MessageChannel", "server_id"=>2}]: /Users/cdugo/.rbenv/versions/3.2.2/lib/ruby/gems/3.2.0/gems/actioncable-7.2.2/lib/action_cable/connection/subscriptions.rb:80:in `find' | /Users/cdugo/.rbenv/versions/3.2.2/lib/ruby/gems/3.2.0/gems/actioncable-7.2.2/lib/action_cable/connection/subscriptions.rb:61:in `perform_action' | /Users/cdugo/.rbenv/versions/3.2.2/lib/ruby/gems/3.2.0/gems/actioncable-7.2.2/lib/action_cable/connection/subscriptions.rb:24:in `execute_command' | /Users/cdugo/.rbenv/versions/3.2.2/lib/ruby/gems/3.2.0/gems/actioncable-7.2.2/lib/action_cable/connection/base.rb:111:in `block in handle_channel_command' | /Users/cdugo/.rbenv/versions/3.2.2/lib/ruby/gems/3.2.0/gems/activesupport-7.2.2/lib/active_support/callbacks.rb:101:in `run_callbacks'
Finished "/cable" [WebSocket] for ::1 at 2024-11-05 00:31:24 -0500
MessageChannel stopped streaming from server_2
Started GET "/cable" for ::1 at 2024-11-05 00:31:25 -0500
Started GET "/servers/2" for ::1 at 2024-11-05 00:31:25 -0500
Started GET "/cable" [WebSocket] for ::1 at 2024-11-05 00:31:25 -0500
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
Processing by ServersController#show as */*
  [1m[36mUser Load (2.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  Parameters: {"id"=>"2"}
  â†³ app/channels/application_cable/connection.rb:12:in `find_verified_user'
Registered connection (Z2lkOi8vbWVzc2VuZ2VyL1VzZXIvMw)
  [1m[36mUser Load (1.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:8:in `set_current_user'
  [1m[36mServer Load (0.7ms)[0m  [1m[34mSELECT "servers".* FROM "servers" WHERE "servers"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/channels/message_channel.rb:7:in `subscribed'
  [1m[36mServer Load (0.5ms)[0m  [1m[34mSELECT "servers".* FROM "servers" WHERE "servers"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/servers_controller.rb:82:in `set_server'
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" INNER JOIN "server_members" ON "users"."id" = "server_members"."user_id" WHERE "server_members"."server_id" = $1 AND "users"."id" = $2 LIMIT $3[0m  [["server_id", 2], ["id", 3], ["LIMIT", 1]]
  â†³ app/channels/message_channel.rb:8:in `subscribed'
MessageChannel transmitting {:type=>"confirm_subscription", :server_id=>"2"}
MessageChannel is streaming from server_2
MessageChannel is transmitting the subscription confirmation
  [1m[36mUser Exists? (0.8ms)[0m  [1m[34mSELECT 1 AS one FROM "users" INNER JOIN "server_members" ON "users"."id" = "server_members"."user_id" WHERE "server_members"."server_id" = $1 AND "users"."id" = $2 LIMIT $3[0m  [["server_id", 2], ["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/servers_controller.rb:99:in `is_member_of_server?'
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" INNER JOIN "server_members" ON "users"."id" = "server_members"."user_id" WHERE "server_members"."server_id" = $1[0m  [["server_id", 2]]
  â†³ app/controllers/servers_controller.rb:15:in `show'
  [1m[36mMessage Load (0.7ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."server_id" = $1[0m  [["server_id", 2]]
  â†³ app/controllers/servers_controller.rb:15:in `show'
Completed 200 OK in 31ms (Views: 7.8ms | ActiveRecord: 14.6ms (5 queries, 0 cached) | GC: 3.6ms)


Started GET "/cable" for ::1 at 2024-11-05 00:31:27 -0500
Started GET "/cable" [WebSocket] for ::1 at 2024-11-05 00:31:27 -0500
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/channels/application_cable/connection.rb:12:in `find_verified_user'
Registered connection (Z2lkOi8vbWVzc2VuZ2VyL1VzZXIvMg)
Could not execute command from ({"command"=>"message", "identifier"=>{"channel"=>"MessageChannel", "server_id"=>2}, "data"=>{"action"=>"create", "server_id"=>"2", "content"=>"k", "parent_id"=>nil}}) [RuntimeError - Unable to find subscription with identifier: {"channel"=>"MessageChannel", "server_id"=>2}]: /Users/cdugo/.rbenv/versions/3.2.2/lib/ruby/gems/3.2.0/gems/actioncable-7.2.2/lib/action_cable/connection/subscriptions.rb:80:in `find' | /Users/cdugo/.rbenv/versions/3.2.2/lib/ruby/gems/3.2.0/gems/actioncable-7.2.2/lib/action_cable/connection/subscriptions.rb:61:in `perform_action' | /Users/cdugo/.rbenv/versions/3.2.2/lib/ruby/gems/3.2.0/gems/actioncable-7.2.2/lib/action_cable/connection/subscriptions.rb:24:in `execute_command' | /Users/cdugo/.rbenv/versions/3.2.2/lib/ruby/gems/3.2.0/gems/actioncable-7.2.2/lib/action_cable/connection/base.rb:111:in `block in handle_channel_command' | /Users/cdugo/.rbenv/versions/3.2.2/lib/ruby/gems/3.2.0/gems/activesupport-7.2.2/lib/active_support/callbacks.rb:101:in `run_callbacks'
Finished "/cable" [WebSocket] for ::1 at 2024-11-05 00:34:45 -0500
MessageChannel stopped streaming from server_2
Started GET "/servers/2" for ::1 at 2024-11-05 00:34:45 -0500
Started GET "/cable" for ::1 at 2024-11-05 00:34:45 -0500
Started GET "/cable" [WebSocket] for ::1 at 2024-11-05 00:34:45 -0500
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
Processing by ServersController#show as */*
  Parameters: {"id"=>"2"}
  â†³ app/channels/application_cable/connection.rb:13:in `find_verified_user'
An unauthorized connection attempt was rejected
Finished "/cable" [WebSocket] for ::1 at 2024-11-05 00:34:45 -0500
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:8:in `set_current_user'
  [1m[36mServer Load (0.2ms)[0m  [1m[34mSELECT "servers".* FROM "servers" WHERE "servers"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/servers_controller.rb:82:in `set_server'
  [1m[36mUser Exists? (0.7ms)[0m  [1m[34mSELECT 1 AS one FROM "users" INNER JOIN "server_members" ON "users"."id" = "server_members"."user_id" WHERE "server_members"."server_id" = $1 AND "users"."id" = $2 LIMIT $3[0m  [["server_id", 2], ["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/servers_controller.rb:99:in `is_member_of_server?'
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" INNER JOIN "server_members" ON "users"."id" = "server_members"."user_id" WHERE "server_members"."server_id" = $1[0m  [["server_id", 2]]
  â†³ app/controllers/servers_controller.rb:15:in `show'
  [1m[36mMessage Load (0.2ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."server_id" = $1[0m  [["server_id", 2]]
  â†³ app/controllers/servers_controller.rb:15:in `show'
Completed 200 OK in 32ms (Views: 7.4ms | ActiveRecord: 11.0ms (5 queries, 0 cached) | GC: 0.6ms)


Started GET "/cable" for ::1 at 2024-11-05 00:34:47 -0500
Started GET "/cable" [WebSocket] for ::1 at 2024-11-05 00:34:47 -0500
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  â†³ app/channels/application_cable/connection.rb:13:in `find_verified_user'
An unauthorized connection attempt was rejected
Finished "/cable" [WebSocket] for ::1 at 2024-11-05 00:34:47 -0500
Started GET "/cable" for ::1 at 2024-11-05 00:34:47 -0500
Started GET "/cable" [WebSocket] for ::1 at 2024-11-05 00:34:47 -0500
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  â†³ app/channels/application_cable/connection.rb:13:in `find_verified_user'
An unauthorized connection attempt was rejected
Finished "/cable" [WebSocket] for ::1 at 2024-11-05 00:34:47 -0500
Started GET "/cable" for ::1 at 2024-11-05 00:34:49 -0500
Started GET "/cable" [WebSocket] for ::1 at 2024-11-05 00:34:49 -0500
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  â†³ app/channels/application_cable/connection.rb:13:in `find_verified_user'
An unauthorized connection attempt was rejected
Finished "/cable" [WebSocket] for ::1 at 2024-11-05 00:34:49 -0500
Started GET "/cable" for ::1 at 2024-11-05 00:34:50 -0500
Started GET "/cable" [WebSocket] for ::1 at 2024-11-05 00:34:51 -0500
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  â†³ app/channels/application_cable/connection.rb:13:in `find_verified_user'
An unauthorized connection attempt was rejected
Finished "/cable" [WebSocket] for ::1 at 2024-11-05 00:34:51 -0500
Started GET "/cable" for ::1 at 2024-11-05 00:34:51 -0500
Started GET "/cable" [WebSocket] for ::1 at 2024-11-05 00:34:51 -0500
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  â†³ app/channels/application_cable/connection.rb:13:in `find_verified_user'
An unauthorized connection attempt was rejected
Finished "/cable" [WebSocket] for ::1 at 2024-11-05 00:34:51 -0500
Started GET "/cable" for ::1 at 2024-11-05 00:34:53 -0500
Started GET "/cable" [WebSocket] for ::1 at 2024-11-05 00:34:53 -0500
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  â†³ app/channels/application_cable/connection.rb:13:in `find_verified_user'
An unauthorized connection attempt was rejected
Finished "/cable" [WebSocket] for ::1 at 2024-11-05 00:34:53 -0500
Started GET "/cable" for ::1 at 2024-11-05 00:34:53 -0500
Started GET "/cable" [WebSocket] for ::1 at 2024-11-05 00:34:53 -0500
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  â†³ app/channels/application_cable/connection.rb:13:in `find_verified_user'
An unauthorized connection attempt was rejected
Finished "/cable" [WebSocket] for ::1 at 2024-11-05 00:34:53 -0500
Started GET "/cable" for ::1 at 2024-11-05 00:35:02 -0500
  [1m[36mActiveRecord::SchemaMigration Load (0.7ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Started GET "/cable" [WebSocket] for ::1 at 2024-11-05 00:35:02 -0500
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/channels/application_cable/connection.rb:12:in `find_verified_user'
Registered connection (Z2lkOi8vbWVzc2VuZ2VyL1VzZXIvMg)
Started GET "/cable" for ::1 at 2024-11-05 00:35:07 -0500
Started GET "/cable" [WebSocket] for ::1 at 2024-11-05 00:35:07 -0500
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/channels/application_cable/connection.rb:12:in `find_verified_user'
Registered connection (Z2lkOi8vbWVzc2VuZ2VyL1VzZXIvMw)
Finished "/cable" [WebSocket] for ::1 at 2024-11-05 00:35:08 -0500
Started GET "/servers/2" for ::1 at 2024-11-05 00:35:08 -0500
Started GET "/cable" for ::1 at 2024-11-05 00:35:08 -0500
Processing by ServersController#show as */*
  Parameters: {"id"=>"2"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:8:in `set_current_user'
  [1m[36mServer Load (1.2ms)[0m  [1m[34mSELECT "servers".* FROM "servers" WHERE "servers"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/servers_controller.rb:82:in `set_server'
Started GET "/cable" [WebSocket] for ::1 at 2024-11-05 00:35:08 -0500
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
  [1m[36mUser Exists? (1.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" INNER JOIN "server_members" ON "users"."id" = "server_members"."user_id" WHERE "server_members"."server_id" = $1 AND "users"."id" = $2 LIMIT $3[0m  [["server_id", 2], ["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/servers_controller.rb:99:in `is_member_of_server?'
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" INNER JOIN "server_members" ON "users"."id" = "server_members"."user_id" WHERE "server_members"."server_id" = $1[0m  [["server_id", 2]]
  â†³ app/controllers/servers_controller.rb:15:in `show'
  [1m[36mMessage Load (1.1ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."server_id" = $1[0m  [["server_id", 2]]
  â†³ app/controllers/servers_controller.rb:15:in `show'
  [1m[36mUser Load (7.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
Completed 200 OK in 90ms (Views: 31.7ms | ActiveRecord: 19.3ms (5 queries, 0 cached) | GC: 21.7ms)


  â†³ app/channels/application_cable/connection.rb:12:in `find_verified_user'
Registered connection (Z2lkOi8vbWVzc2VuZ2VyL1VzZXIvMw)
  [1m[36mServer Load (0.4ms)[0m  [1m[34mSELECT "servers".* FROM "servers" WHERE "servers"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/channels/message_channel.rb:7:in `subscribed'
  [1m[36mUser Exists? (1.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" INNER JOIN "server_members" ON "users"."id" = "server_members"."user_id" WHERE "server_members"."server_id" = $1 AND "users"."id" = $2 LIMIT $3[0m  [["server_id", 2], ["id", 3], ["LIMIT", 1]]
  â†³ app/channels/message_channel.rb:8:in `subscribed'
MessageChannel transmitting {:type=>"confirm_subscription", :server_id=>"2"}
MessageChannel is streaming from server_2
MessageChannel is transmitting the subscription confirmation
Could not execute command from ({"command"=>"message", "identifier"=>"{\"channel\":\"MessageChannel\",\"server_id\":2}", "data"=>"{\"action\":\"create\",\"server_id\":\"2\",\"content\":\"hi\",\"parent_id\":null}"}) [RuntimeError - Unable to find subscription with identifier: {"channel":"MessageChannel","server_id":2}]: /Users/cdugo/.rbenv/versions/3.2.2/lib/ruby/gems/3.2.0/gems/actioncable-7.2.2/lib/action_cable/connection/subscriptions.rb:80:in `find' | /Users/cdugo/.rbenv/versions/3.2.2/lib/ruby/gems/3.2.0/gems/actioncable-7.2.2/lib/action_cable/connection/subscriptions.rb:61:in `perform_action' | /Users/cdugo/.rbenv/versions/3.2.2/lib/ruby/gems/3.2.0/gems/actioncable-7.2.2/lib/action_cable/connection/subscriptions.rb:24:in `execute_command' | /Users/cdugo/.rbenv/versions/3.2.2/lib/ruby/gems/3.2.0/gems/actioncable-7.2.2/lib/action_cable/connection/base.rb:111:in `block in handle_channel_command' | /Users/cdugo/.rbenv/versions/3.2.2/lib/ruby/gems/3.2.0/gems/activesupport-7.2.2/lib/active_support/callbacks.rb:101:in `run_callbacks'
Started GET "/cable" for ::1 at 2024-11-05 00:37:47 -0500
Started GET "/cable" [WebSocket] for ::1 at 2024-11-05 00:37:47 -0500
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
  [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/channels/application_cable/connection.rb:12:in `find_verified_user'
Registered connection (Z2lkOi8vbWVzc2VuZ2VyL1VzZXIvMw)
Could not execute command from ({"command"=>"message", "identifier"=>"{\"channel\":\"MessageChannel\",\"server_id\":2}", "data"=>"{\"action\":\"create\",\"server_id\":2,\"content\":\"s\",\"parent_id\":null}"}) [RuntimeError - Unable to find subscription with identifier: {"channel":"MessageChannel","server_id":2}]: /Users/cdugo/.rbenv/versions/3.2.2/lib/ruby/gems/3.2.0/gems/actioncable-7.2.2/lib/action_cable/connection/subscriptions.rb:80:in `find' | /Users/cdugo/.rbenv/versions/3.2.2/lib/ruby/gems/3.2.0/gems/actioncable-7.2.2/lib/action_cable/connection/subscriptions.rb:61:in `perform_action' | /Users/cdugo/.rbenv/versions/3.2.2/lib/ruby/gems/3.2.0/gems/actioncable-7.2.2/lib/action_cable/connection/subscriptions.rb:24:in `execute_command' | /Users/cdugo/.rbenv/versions/3.2.2/lib/ruby/gems/3.2.0/gems/actioncable-7.2.2/lib/action_cable/connection/base.rb:111:in `block in handle_channel_command' | /Users/cdugo/.rbenv/versions/3.2.2/lib/ruby/gems/3.2.0/gems/activesupport-7.2.2/lib/active_support/callbacks.rb:101:in `run_callbacks'
Finished "/cable" [WebSocket] for ::1 at 2024-11-05 00:40:46 -0500
MessageChannel stopped streaming from server_2
Finished "/cable" [WebSocket] for ::1 at 2024-11-05 00:40:46 -0500
Finished "/cable" [WebSocket] for ::1 at 2024-11-05 00:40:46 -0500
Started GET "/cable" for ::1 at 2024-11-05 00:40:53 -0500
Started GET "/servers/2" for ::1 at 2024-11-05 00:40:53 -0500
Started GET "/cable" [WebSocket] for ::1 at 2024-11-05 00:40:53 -0500
Processing by ServersController#show as */*
  Parameters: {"id"=>"2"}
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
  [1m[36mUser Load (1.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/channels/application_cable/connection.rb:12:in `find_verified_user'
Registered connection (Z2lkOi8vbWVzc2VuZ2VyL1VzZXIvMw)
  [1m[36mUser Load (40.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mServer Load (0.8ms)[0m  [1m[34mSELECT "servers".* FROM "servers" WHERE "servers"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:8:in `set_current_user'
  â†³ app/channels/message_channel.rb:7:in `subscribed'
  [1m[36mUser Exists? (6.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" INNER JOIN "server_members" ON "users"."id" = "server_members"."user_id" WHERE "server_members"."server_id" = $1 AND "users"."id" = $2 LIMIT $3[0m  [["server_id", 2], ["id", 3], ["LIMIT", 1]]
  â†³ app/channels/message_channel.rb:8:in `subscribed'
  [1m[36mServer Load (2.9ms)[0m  [1m[34mSELECT "servers".* FROM "servers" WHERE "servers"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/servers_controller.rb:82:in `set_server'
MessageChannel transmitting {:type=>"confirm_subscription", :server_id=>"2"}
MessageChannel is transmitting the subscription confirmation
MessageChannel is streaming from server_2
  [1m[36mUser Exists? (9.9ms)[0m  [1m[34mSELECT 1 AS one FROM "users" INNER JOIN "server_members" ON "users"."id" = "server_members"."user_id" WHERE "server_members"."server_id" = $1 AND "users"."id" = $2 LIMIT $3[0m  [["server_id", 2], ["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/servers_controller.rb:99:in `is_member_of_server?'
  [1m[36mUser Load (1.1ms)[0m  [1m[34mSELECT "users".* FROM "users" INNER JOIN "server_members" ON "users"."id" = "server_members"."user_id" WHERE "server_members"."server_id" = $1[0m  [["server_id", 2]]
  â†³ app/controllers/servers_controller.rb:15:in `show'
  [1m[36mMessage Load (1.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."server_id" = $1[0m  [["server_id", 2]]
  â†³ app/controllers/servers_controller.rb:15:in `show'
Completed 200 OK in 216ms (Views: 5.2ms | ActiveRecord: 55.0ms (5 queries, 0 cached) | GC: 1.8ms)


Started GET "/servers/2" for ::1 at 2024-11-05 00:40:53 -0500
Started GET "/cable" for ::1 at 2024-11-05 00:40:53 -0500
Processing by ServersController#show as */*
  Parameters: {"id"=>"2"}
Started GET "/cable" [WebSocket] for ::1 at 2024-11-05 00:40:53 -0500
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
  [1m[36mUser Load (2.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:8:in `set_current_user'
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/channels/application_cable/connection.rb:12:in `find_verified_user'
Registered connection (Z2lkOi8vbWVzc2VuZ2VyL1VzZXIvMg)
  [1m[36mServer Load (2.1ms)[0m  [1m[34mSELECT "servers".* FROM "servers" WHERE "servers"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/servers_controller.rb:82:in `set_server'
  [1m[36mUser Exists? (0.8ms)[0m  [1m[34mSELECT 1 AS one FROM "users" INNER JOIN "server_members" ON "users"."id" = "server_members"."user_id" WHERE "server_members"."server_id" = $1 AND "users"."id" = $2 LIMIT $3[0m  [["server_id", 2], ["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/servers_controller.rb:99:in `is_member_of_server?'
  [1m[36mServer Load (1.7ms)[0m  [1m[34mSELECT "servers".* FROM "servers" WHERE "servers"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/channels/message_channel.rb:7:in `subscribed'
  [1m[36mUser Load (1.6ms)[0m  [1m[34mSELECT "users".* FROM "users" INNER JOIN "server_members" ON "users"."id" = "server_members"."user_id" WHERE "server_members"."server_id" = $1[0m  [["server_id", 2]]
  â†³ app/controllers/servers_controller.rb:15:in `show'
  [1m[36mUser Exists? (2.6ms)[0m  [1m[34mSELECT 1 AS one FROM "users" INNER JOIN "server_members" ON "users"."id" = "server_members"."user_id" WHERE "server_members"."server_id" = $1 AND "users"."id" = $2 LIMIT $3[0m  [["server_id", 2], ["id", 2], ["LIMIT", 1]]
  â†³ app/channels/message_channel.rb:8:in `subscribed'
MessageChannel transmitting {:type=>"confirm_subscription", :server_id=>"2"}
MessageChannel is transmitting the subscription confirmation
  [1m[36mMessage Load (0.9ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."server_id" = $1[0m  [["server_id", 2]]
MessageChannel is streaming from server_2
  â†³ app/controllers/servers_controller.rb:15:in `show'
Completed 200 OK in 35ms (Views: 7.4ms | ActiveRecord: 6.9ms (5 queries, 0 cached) | GC: 0.0ms)


Unsubscribing from channel: {"channel":"MessageChannel","server_id":"2"}
MessageChannel stopped streaming from server_2
Unsubscribing from channel: {"channel":"MessageChannel","server_id":"2"}
MessageChannel stopped streaming from server_2
Finished "/cable" [WebSocket] for ::1 at 2024-11-05 00:44:19 -0500
Finished "/cable" [WebSocket] for ::1 at 2024-11-05 00:44:19 -0500
Started GET "/cable" for ::1 at 2024-11-05 00:45:00 -0500
Started GET "/servers/2" for ::1 at 2024-11-05 00:45:00 -0500
Started GET "/servers/2" for ::1 at 2024-11-05 00:45:00 -0500
Processing by ServersController#show as */*
  Parameters: {"id"=>"2"}
Started GET "/cable" [WebSocket] for ::1 at 2024-11-05 00:45:00 -0500
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
  [1m[36mUser Load (1.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:8:in `set_current_user'
  [1m[36mServer Load (1.1ms)[0m  [1m[34mSELECT "servers".* FROM "servers" WHERE "servers"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/servers_controller.rb:82:in `set_server'
  [1m[36mUser Load (12.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/channels/application_cable/connection.rb:12:in `find_verified_user'
Registered connection (Z2lkOi8vbWVzc2VuZ2VyL1VzZXIvMg)
Started GET "/cable" for ::1 at 2024-11-05 00:45:00 -0500
Processing by ServersController#show as */*
  Parameters: {"id"=>"2"}
  [1m[36mUser Exists? (12.7ms)[0m  [1m[34mSELECT 1 AS one FROM "users" INNER JOIN "server_members" ON "users"."id" = "server_members"."user_id" WHERE "server_members"."server_id" = $1 AND "users"."id" = $2 LIMIT $3[0m  [["server_id", 2], ["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/servers_controller.rb:99:in `is_member_of_server?'
  [1m[36mUser Load (2.0ms)[0m  [1m[34mSELECT "users".* FROM "users" INNER JOIN "server_members" ON "users"."id" = "server_members"."user_id" WHERE "server_members"."server_id" = $1[0m  [["server_id", 2]]
  â†³ app/controllers/servers_controller.rb:15:in `show'
  [1m[36mMessage Load (89.9ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."server_id" = $1[0m  [["server_id", 2]]
  â†³ app/controllers/servers_controller.rb:15:in `show'
Completed 200 OK in 248ms (Views: 82.8ms | ActiveRecord: 107.4ms (5 queries, 0 cached) | GC: 0.0ms)


  [1m[36mUser Load (96.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:8:in `set_current_user'
Started GET "/cable" [WebSocket] for ::1 at 2024-11-05 00:45:00 -0500
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
  [1m[36mServer Load (11.3ms)[0m  [1m[34mSELECT "servers".* FROM "servers" WHERE "servers"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/servers_controller.rb:82:in `set_server'
Started GET "/cable" for ::1 at 2024-11-05 00:45:00 -0500
  [1m[36mUser Exists? (18.6ms)[0m  [1m[34mSELECT 1 AS one FROM "users" INNER JOIN "server_members" ON "users"."id" = "server_members"."user_id" WHERE "server_members"."server_id" = $1 AND "users"."id" = $2 LIMIT $3[0m  [["server_id", 2], ["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/servers_controller.rb:99:in `is_member_of_server?'
  [1m[36mUser Load (6.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/channels/application_cable/connection.rb:12:in `find_verified_user'
Registered connection (Z2lkOi8vbWVzc2VuZ2VyL1VzZXIvMw)
  [1m[36mUser Load (8.8ms)[0m  [1m[34mSELECT "users".* FROM "users" INNER JOIN "server_members" ON "users"."id" = "server_members"."user_id" WHERE "server_members"."server_id" = $1[0m  [["server_id", 2]]
  â†³ app/controllers/servers_controller.rb:15:in `show'
  [1m[36mMessage Load (0.5ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."server_id" = $1[0m  [["server_id", 2]]
  â†³ app/controllers/servers_controller.rb:15:in `show'
Completed 200 OK in 309ms (Views: 27.5ms | ActiveRecord: 135.0ms (5 queries, 0 cached) | GC: 0.0ms)


Started GET "/cable" [WebSocket] for ::1 at 2024-11-05 00:45:00 -0500
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
  [1m[36mUser Load (6.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/channels/application_cable/connection.rb:12:in `find_verified_user'
Registered connection (Z2lkOi8vbWVzc2VuZ2VyL1VzZXIvMg)
Started GET "/cable" for 127.0.0.1 at 2024-11-05 00:45:00 -0500
Started GET "/cable" [WebSocket] for 127.0.0.1 at 2024-11-05 00:45:00 -0500
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
  [1m[36mUser Load (3.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/channels/application_cable/connection.rb:12:in `find_verified_user'
Registered connection (Z2lkOi8vbWVzc2VuZ2VyL1VzZXIvMw)
Could not execute command from ({"command"=>"message", "identifier"=>"{\"channel\":\"MessageChannel\",\"server_id\":2}", "data"=>"{\"action\":\"create\",\"server_id\":2,\"content\":\"s\",\"parent_id\":null}"}) [RuntimeError - Unable to find subscription with identifier: {"channel":"MessageChannel","server_id":2}]: /Users/cdugo/.rbenv/versions/3.2.2/lib/ruby/gems/3.2.0/gems/actioncable-7.2.2/lib/action_cable/connection/subscriptions.rb:80:in `find' | /Users/cdugo/.rbenv/versions/3.2.2/lib/ruby/gems/3.2.0/gems/actioncable-7.2.2/lib/action_cable/connection/subscriptions.rb:61:in `perform_action' | /Users/cdugo/.rbenv/versions/3.2.2/lib/ruby/gems/3.2.0/gems/actioncable-7.2.2/lib/action_cable/connection/subscriptions.rb:24:in `execute_command' | /Users/cdugo/.rbenv/versions/3.2.2/lib/ruby/gems/3.2.0/gems/actioncable-7.2.2/lib/action_cable/connection/base.rb:111:in `block in handle_channel_command' | /Users/cdugo/.rbenv/versions/3.2.2/lib/ruby/gems/3.2.0/gems/activesupport-7.2.2/lib/active_support/callbacks.rb:101:in `run_callbacks'
Finished "/cable" [WebSocket] for ::1 at 2024-11-05 00:53:05 -0500
Finished "/cable" [WebSocket] for 127.0.0.1 at 2024-11-05 00:53:05 -0500
Started GET "/servers/2" for ::1 at 2024-11-05 00:53:05 -0500
Started GET "/cable" for ::1 at 2024-11-05 00:53:05 -0500
Processing by ServersController#show as */*
  Parameters: {"id"=>"2"}
Started GET "/cable" [WebSocket] for ::1 at 2024-11-05 00:53:05 -0500
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:8:in `set_current_user'
  â†³ app/channels/application_cable/connection.rb:12:in `find_verified_user'
Registered connection (Z2lkOi8vbWVzc2VuZ2VyL1VzZXIvMw)
  [1m[36mServer Load (0.4ms)[0m  [1m[34mSELECT "servers".* FROM "servers" WHERE "servers"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/servers_controller.rb:82:in `set_server'
  [1m[36mUser Exists? (1.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" INNER JOIN "server_members" ON "users"."id" = "server_members"."user_id" WHERE "server_members"."server_id" = $1 AND "users"."id" = $2 LIMIT $3[0m  [["server_id", 2], ["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/servers_controller.rb:99:in `is_member_of_server?'
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" INNER JOIN "server_members" ON "users"."id" = "server_members"."user_id" WHERE "server_members"."server_id" = $1[0m  [["server_id", 2]]
  â†³ app/controllers/servers_controller.rb:15:in `show'
  [1m[36mMessage Load (0.3ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."server_id" = $1[0m  [["server_id", 2]]
  â†³ app/controllers/servers_controller.rb:15:in `show'
Completed 200 OK in 23ms (Views: 1.7ms | ActiveRecord: 10.2ms (5 queries, 0 cached) | GC: 0.0ms)


Started GET "/cable" for ::1 at 2024-11-05 00:53:05 -0500
Started GET "/cable" [WebSocket] for ::1 at 2024-11-05 00:53:05 -0500
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/channels/application_cable/connection.rb:12:in `find_verified_user'
Registered connection (Z2lkOi8vbWVzc2VuZ2VyL1VzZXIvMw)
  [1m[36mServer Load (0.5ms)[0m  [1m[34mSELECT "servers".* FROM "servers" WHERE "servers"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/channels/message_channel.rb:7:in `subscribed'
  [1m[36mUser Exists? (0.9ms)[0m  [1m[34mSELECT 1 AS one FROM "users" INNER JOIN "server_members" ON "users"."id" = "server_members"."user_id" WHERE "server_members"."server_id" = $1 AND "users"."id" = $2 LIMIT $3[0m  [["server_id", 2], ["id", 3], ["LIMIT", 1]]
  â†³ app/channels/message_channel.rb:8:in `subscribed'
MessageChannel transmitting {:type=>"confirm_subscription", :server_id=>2}
MessageChannel is transmitting the subscription confirmation
MessageChannel is streaming from server_2
Unable to process MessageChannel#create({"server_id"=>2, "content"=>"d", "parent_id"=>nil})
Unable to process MessageChannel#create({"server_id"=>2, "content"=>"n", "parent_id"=>nil})
Finished "/cable" [WebSocket] for ::1 at 2024-11-05 00:56:42 -0500
Finished "/cable" [WebSocket] for ::1 at 2024-11-05 00:56:42 -0500
MessageChannel stopped streaming from server_2
Started GET "/servers/2" for ::1 at 2024-11-05 00:56:42 -0500
Started GET "/cable" for ::1 at 2024-11-05 00:56:42 -0500
Started GET "/cable" for 127.0.0.1 at 2024-11-05 00:56:42 -0500
Started GET "/cable" [WebSocket] for ::1 at 2024-11-05 00:56:42 -0500
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
Processing by ServersController#show as */*
  Parameters: {"id"=>"2"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:8:in `set_current_user'
  [1m[36mServer Load (0.7ms)[0m  [1m[34mSELECT "servers".* FROM "servers" WHERE "servers"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/servers_controller.rb:82:in `set_server'
  [1m[36mUser Exists? (0.8ms)[0m  [1m[34mSELECT 1 AS one FROM "users" INNER JOIN "server_members" ON "users"."id" = "server_members"."user_id" WHERE "server_members"."server_id" = $1 AND "users"."id" = $2 LIMIT $3[0m  [["server_id", 2], ["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/servers_controller.rb:99:in `is_member_of_server?'
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" INNER JOIN "server_members" ON "users"."id" = "server_members"."user_id" WHERE "server_members"."server_id" = $1[0m  [["server_id", 2]]
  â†³ app/controllers/servers_controller.rb:15:in `show'
  [1m[36mMessage Load (0.4ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."server_id" = $1[0m  [["server_id", 2]]
  â†³ app/controllers/servers_controller.rb:15:in `show'
Completed 200 OK in 39ms (Views: 5.5ms | ActiveRecord: 17.1ms (5 queries, 0 cached) | GC: 0.8ms)


Started GET "/cable" [WebSocket] for 127.0.0.1 at 2024-11-05 00:56:43 -0500
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/channels/application_cable/connection.rb:12:in `find_verified_user'
Registered connection (Z2lkOi8vbWVzc2VuZ2VyL1VzZXIvMw)
  [1m[36mServer Load (0.5ms)[0m  [1m[34mSELECT "servers".* FROM "servers" WHERE "servers"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/channels/message_channel.rb:7:in `subscribed'
  [1m[36mUser Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" INNER JOIN "server_members" ON "users"."id" = "server_members"."user_id" WHERE "server_members"."server_id" = $1 AND "users"."id" = $2 LIMIT $3[0m  [["server_id", 2], ["id", 3], ["LIMIT", 1]]
  â†³ app/channels/message_channel.rb:8:in `subscribed'
MessageChannel transmitting {:type=>"confirm_subscription", :server_id=>2}
MessageChannel is streaming from server_2
MessageChannel is transmitting the subscription confirmation
Started GET "/cable" for ::1 at 2024-11-05 00:56:44 -0500
Started GET "/cable" [WebSocket] for ::1 at 2024-11-05 00:56:44 -0500
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/channels/application_cable/connection.rb:12:in `find_verified_user'
Registered connection (Z2lkOi8vbWVzc2VuZ2VyL1VzZXIvMg)
Unable to process MessageChannel#create({"server_id"=>2, "content"=>"s", "parent_id"=>nil})
Started POST "/login" for ::1 at 2024-11-05 10:51:08 -0500
  [1m[36mActiveRecord::SchemaMigration Load (1.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by SessionsController#create as */*
  Parameters: {"username"=>"user2", "password"=>"[FILTERED]", "session"=>{"username"=>"user2", "password"=>"[FILTERED]"}}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:8:in `set_current_user'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "user2"], ["LIMIT", 1]]
  â†³ app/controllers/sessions_controller.rb:3:in `create'
Completed 201 Created in 275ms (Views: 0.3ms | ActiveRecord: 16.3ms (2 queries, 0 cached) | GC: 1.4ms)


Started GET "/servers" for ::1 at 2024-11-05 10:51:09 -0500
Processing by ServersController#index as */*
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:8:in `set_current_user'
  [1m[36mServer Load (1.0ms)[0m  [1m[34mSELECT "servers".* FROM "servers"[0m
  â†³ app/controllers/servers_controller.rb:10:in `index'
Completed 200 OK in 13ms (Views: 2.3ms | ActiveRecord: 3.8ms (2 queries, 0 cached) | GC: 0.4ms)


Started GET "/servers" for ::1 at 2024-11-05 10:51:09 -0500
Processing by ServersController#index as */*
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:8:in `set_current_user'
  [1m[36mServer Load (0.2ms)[0m  [1m[34mSELECT "servers".* FROM "servers"[0m
  â†³ app/controllers/servers_controller.rb:10:in `index'
Completed 200 OK in 2ms (Views: 0.8ms | ActiveRecord: 0.4ms (2 queries, 0 cached) | GC: 0.2ms)


Started GET "/servers/2" for ::1 at 2024-11-05 10:51:13 -0500
Processing by ServersController#show as */*
  Parameters: {"id"=>"2"}
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:8:in `set_current_user'
  [1m[36mServer Load (0.7ms)[0m  [1m[34mSELECT "servers".* FROM "servers" WHERE "servers"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/servers_controller.rb:82:in `set_server'
  [1m[36mUser Exists? (1.7ms)[0m  [1m[34mSELECT 1 AS one FROM "users" INNER JOIN "server_members" ON "users"."id" = "server_members"."user_id" WHERE "server_members"."server_id" = $1 AND "users"."id" = $2 LIMIT $3[0m  [["server_id", 2], ["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/servers_controller.rb:99:in `is_member_of_server?'
  [1m[36mUser Load (2.0ms)[0m  [1m[34mSELECT "users".* FROM "users" INNER JOIN "server_members" ON "users"."id" = "server_members"."user_id" WHERE "server_members"."server_id" = $1[0m  [["server_id", 2]]
  â†³ app/controllers/servers_controller.rb:15:in `show'
  [1m[36mMessage Load (0.6ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."server_id" = $1[0m  [["server_id", 2]]
  â†³ app/controllers/servers_controller.rb:15:in `show'
Completed 200 OK in 72ms (Views: 31.4ms | ActiveRecord: 12.3ms (5 queries, 0 cached) | GC: 14.7ms)


Started GET "/servers/2" for ::1 at 2024-11-05 10:51:13 -0500
Processing by ServersController#show as */*
  Parameters: {"id"=>"2"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:8:in `set_current_user'
  [1m[36mServer Load (0.3ms)[0m  [1m[34mSELECT "servers".* FROM "servers" WHERE "servers"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/servers_controller.rb:82:in `set_server'
  [1m[36mUser Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" INNER JOIN "server_members" ON "users"."id" = "server_members"."user_id" WHERE "server_members"."server_id" = $1 AND "users"."id" = $2 LIMIT $3[0m  [["server_id", 2], ["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/servers_controller.rb:99:in `is_member_of_server?'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" INNER JOIN "server_members" ON "users"."id" = "server_members"."user_id" WHERE "server_members"."server_id" = $1[0m  [["server_id", 2]]
  â†³ app/controllers/servers_controller.rb:15:in `show'
  [1m[36mMessage Load (0.1ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."server_id" = $1[0m  [["server_id", 2]]
  â†³ app/controllers/servers_controller.rb:15:in `show'
Completed 200 OK in 6ms (Views: 1.6ms | ActiveRecord: 1.3ms (5 queries, 0 cached) | GC: 0.2ms)


Started GET "/servers/2" for ::1 at 2024-11-05 10:52:31 -0500
Started GET "/cable" for ::1 at 2024-11-05 10:52:31 -0500
Processing by ServersController#show as */*
  Parameters: {"id"=>"2"}
  [1m[36mUser Load (1.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:8:in `set_current_user'
  [1m[36mServer Load (3.2ms)[0m  [1m[34mSELECT "servers".* FROM "servers" WHERE "servers"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/servers_controller.rb:82:in `set_server'
  [1m[36mUser Exists? (1.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" INNER JOIN "server_members" ON "users"."id" = "server_members"."user_id" WHERE "server_members"."server_id" = $1 AND "users"."id" = $2 LIMIT $3[0m  [["server_id", 2], ["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/servers_controller.rb:99:in `is_member_of_server?'
  [1m[36mUser Load (1.0ms)[0m  [1m[34mSELECT "users".* FROM "users" INNER JOIN "server_members" ON "users"."id" = "server_members"."user_id" WHERE "server_members"."server_id" = $1[0m  [["server_id", 2]]
  â†³ app/controllers/servers_controller.rb:15:in `show'
  [1m[36mMessage Load (0.5ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."server_id" = $1[0m  [["server_id", 2]]
  â†³ app/controllers/servers_controller.rb:15:in `show'
Completed 200 OK in 41ms (Views: 8.0ms | ActiveRecord: 6.7ms (5 queries, 0 cached) | GC: 1.7ms)


Started GET "/cable" [WebSocket] for ::1 at 2024-11-05 10:52:31 -0500
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/channels/application_cable/connection.rb:12:in `find_verified_user'
Registered connection (Z2lkOi8vbWVzc2VuZ2VyL1VzZXIvMg)
  [1m[36mServer Load (0.7ms)[0m  [1m[34mSELECT "servers".* FROM "servers" WHERE "servers"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/channels/message_channel.rb:7:in `subscribed'
  [1m[36mUser Exists? (0.6ms)[0m  [1m[34mSELECT 1 AS one FROM "users" INNER JOIN "server_members" ON "users"."id" = "server_members"."user_id" WHERE "server_members"."server_id" = $1 AND "users"."id" = $2 LIMIT $3[0m  [["server_id", 2], ["id", 2], ["LIMIT", 1]]
  â†³ app/channels/message_channel.rb:8:in `subscribed'
MessageChannel transmitting {:type=>"confirm_subscription", :server_id=>2}
MessageChannel is transmitting the subscription confirmation
MessageChannel is streaming from server_2
MessageChannel#receive({"server_id"=>2, "content"=>"hey", "parent_id"=>nil})
  [1m[36mServer Load (0.2ms)[0m  [1m[34mSELECT "servers".* FROM "servers" WHERE "servers"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/channels/message_channel.rb:45:in `receive'
  [1m[36mUser Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" INNER JOIN "server_members" ON "users"."id" = "server_members"."user_id" WHERE "server_members"."server_id" = $1 AND "users"."id" = $2 LIMIT $3[0m  [["server_id", 2], ["id", 2], ["LIMIT", 1]]
  â†³ app/channels/message_channel.rb:46:in `receive'
MessageChannel#receive({"server_id"=>2, "content"=>"s", "parent_id"=>nil})
  [1m[36mServer Load (0.8ms)[0m  [1m[34mSELECT "servers".* FROM "servers" WHERE "servers"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/channels/message_channel.rb:45:in `receive'
  [1m[36mUser Exists? (0.8ms)[0m  [1m[34mSELECT 1 AS one FROM "users" INNER JOIN "server_members" ON "users"."id" = "server_members"."user_id" WHERE "server_members"."server_id" = $1 AND "users"."id" = $2 LIMIT $3[0m  [["server_id", 2], ["id", 2], ["LIMIT", 1]]
  â†³ app/channels/message_channel.rb:46:in `receive'
MessageChannel#receive({"server_id"=>2, "content"=>"s", "parent_id"=>nil})
  [1m[36mServer Load (0.7ms)[0m  [1m[34mSELECT "servers".* FROM "servers" WHERE "servers"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/channels/message_channel.rb:45:in `receive'
  [1m[36mUser Exists? (0.9ms)[0m  [1m[34mSELECT 1 AS one FROM "users" INNER JOIN "server_members" ON "users"."id" = "server_members"."user_id" WHERE "server_members"."server_id" = $1 AND "users"."id" = $2 LIMIT $3[0m  [["server_id", 2], ["id", 2], ["LIMIT", 1]]
  â†³ app/channels/message_channel.rb:46:in `receive'
Started GET "/cable" for ::1 at 2024-11-05 10:55:02 -0500
Started GET "/servers/2" for ::1 at 2024-11-05 10:55:02 -0500
  [1m[36mActiveRecord::SchemaMigration Load (0.8ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by ServersController#show as */*
Started GET "/cable" [WebSocket] for ::1 at 2024-11-05 10:55:02 -0500
  Parameters: {"id"=>"2"}
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:8:in `set_current_user'
  [1m[36mServer Load (0.4ms)[0m  [1m[34mSELECT "servers".* FROM "servers" WHERE "servers"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/servers_controller.rb:82:in `set_server'
  [1m[36mUser Load (5.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/channels/application_cable/connection.rb:12:in `find_verified_user'
Registered connection (Z2lkOi8vbWVzc2VuZ2VyL1VzZXIvMg)
  [1m[36mUser Exists? (3.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" INNER JOIN "server_members" ON "users"."id" = "server_members"."user_id" WHERE "server_members"."server_id" = $1 AND "users"."id" = $2 LIMIT $3[0m  [["server_id", 2], ["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/servers_controller.rb:99:in `is_member_of_server?'
  [1m[36mServer Load (0.3ms)[0m  [1m[34mSELECT "servers".* FROM "servers" WHERE "servers"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/channels/message_channel.rb:7:in `subscribed'
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT "users".* FROM "users" INNER JOIN "server_members" ON "users"."id" = "server_members"."user_id" WHERE "server_members"."server_id" = $1[0m  [["server_id", 2]]
  â†³ app/controllers/servers_controller.rb:15:in `show'
  [1m[36mUser Exists? (5.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" INNER JOIN "server_members" ON "users"."id" = "server_members"."user_id" WHERE "server_members"."server_id" = $1 AND "users"."id" = $2 LIMIT $3[0m  [["server_id", 2], ["id", 2], ["LIMIT", 1]]
  â†³ app/channels/message_channel.rb:8:in `subscribed'
MessageChannel transmitting {:type=>"confirm_subscription", :server_id=>2}
MessageChannel is transmitting the subscription confirmation
MessageChannel is streaming from server_2
  [1m[36mMessage Load (0.4ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."server_id" = $1[0m  [["server_id", 2]]
  â†³ app/controllers/servers_controller.rb:15:in `show'
Completed 200 OK in 74ms (Views: 7.3ms | ActiveRecord: 37.1ms (5 queries, 0 cached) | GC: 18.5ms)


MessageChannel#receive({"server_id"=>2, "content"=>"s", "parent_id"=>nil})
  [1m[36mServer Load (0.6ms)[0m  [1m[34mSELECT "servers".* FROM "servers" WHERE "servers"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/channels/message_channel.rb:45:in `receive'
  [1m[36mServerMember Load (0.3ms)[0m  [1m[34mSELECT "server_members".* FROM "server_members" WHERE "server_members"."server_id" = $1[0m  [["server_id", 2]]
  â†³ app/channels/message_channel.rb:45:in `receive'
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" IN ($1, $2)[0m  [["id", 2], ["id", 3]]
  â†³ app/channels/message_channel.rb:45:in `receive'
MessageChannel#receive({"server_id"=>2, "content"=>"s", "parent_id"=>nil})
  [1m[36mServer Load (3.7ms)[0m  [1m[34mSELECT "servers".* FROM "servers" WHERE "servers"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/channels/message_channel.rb:45:in `receive'
  [1m[36mServerMember Load (0.7ms)[0m  [1m[34mSELECT "server_members".* FROM "server_members" WHERE "server_members"."server_id" = $1[0m  [["server_id", 2]]
  â†³ app/channels/message_channel.rb:45:in `receive'
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" IN ($1, $2)[0m  [["id", 2], ["id", 3]]
  â†³ app/channels/message_channel.rb:45:in `receive'
MessageChannel#receive({"server_id"=>2, "content"=>"s", "parent_id"=>nil})
  [1m[36mServer Load (1.0ms)[0m  [1m[34mSELECT "servers".* FROM "servers" WHERE "servers"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/channels/message_channel.rb:45:in `receive'
  [1m[36mServerMember Load (0.6ms)[0m  [1m[34mSELECT "server_members".* FROM "server_members" WHERE "server_members"."server_id" = $1[0m  [["server_id", 2]]
  â†³ app/channels/message_channel.rb:45:in `receive'
  [1m[36mUser Load (1.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" IN ($1, $2)[0m  [["id", 2], ["id", 3]]
  â†³ app/channels/message_channel.rb:45:in `receive'
Started GET "/cable" for ::1 at 2024-11-05 10:57:16 -0500
Started GET "/servers/2" for ::1 at 2024-11-05 10:57:16 -0500
  [1m[36mActiveRecord::SchemaMigration Load (1.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by ServersController#show as */*
  Parameters: {"id"=>"2"}
Started GET "/cable" [WebSocket] for ::1 at 2024-11-05 10:57:16 -0500
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:8:in `set_current_user'
  [1m[36mServer Load (0.6ms)[0m  [1m[34mSELECT "servers".* FROM "servers" WHERE "servers"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/servers_controller.rb:82:in `set_server'
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/channels/application_cable/connection.rb:12:in `find_verified_user'
Registered connection (Z2lkOi8vbWVzc2VuZ2VyL1VzZXIvMg)
  [1m[36mUser Exists? (2.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" INNER JOIN "server_members" ON "users"."id" = "server_members"."user_id" WHERE "server_members"."server_id" = $1 AND "users"."id" = $2 LIMIT $3[0m  [["server_id", 2], ["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/servers_controller.rb:99:in `is_member_of_server?'
  [1m[36mServer Load (0.5ms)[0m  [1m[34mSELECT "servers".* FROM "servers" WHERE "servers"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT "users".* FROM "users" INNER JOIN "server_members" ON "users"."id" = "server_members"."user_id" WHERE "server_members"."server_id" = $1[0m  [["server_id", 2]]
  â†³ app/channels/message_channel.rb:7:in `subscribed'
  â†³ app/controllers/servers_controller.rb:15:in `show'
  [1m[36mUser Exists? (1.0ms)[0m  [1m[34mSELECT 1 AS one FROM "users" INNER JOIN "server_members" ON "users"."id" = "server_members"."user_id" WHERE "server_members"."server_id" = $1 AND "users"."id" = $2 LIMIT $3[0m  [["server_id", 2], ["id", 2], ["LIMIT", 1]]
  â†³ app/channels/message_channel.rb:8:in `subscribed'
MessageChannel transmitting {:type=>"confirm_subscription", :server_id=>2}
MessageChannel is transmitting the subscription confirmation
MessageChannel is streaming from server_2
  [1m[36mMessage Load (0.7ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."server_id" = $1[0m  [["server_id", 2]]
  â†³ app/controllers/servers_controller.rb:15:in `show'
Completed 200 OK in 79ms (Views: 7.7ms | ActiveRecord: 36.8ms (5 queries, 0 cached) | GC: 18.1ms)


MessageChannel#receive({"server_id"=>2, "content"=>"s", "parent_id"=>nil})
  [1m[36mServer Load (1.0ms)[0m  [1m[34mSELECT "servers".* FROM "servers" WHERE "servers"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/channels/message_channel.rb:45:in `receive'
  [1m[36mServerMember Load (0.3ms)[0m  [1m[34mSELECT "server_members".* FROM "server_members" WHERE "server_members"."server_id" = $1[0m  [["server_id", 2]]
  â†³ app/channels/message_channel.rb:45:in `receive'
  [1m[36mUser Load (2.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" IN ($1, $2)[0m  [["id", 2], ["id", 3]]
  â†³ app/channels/message_channel.rb:45:in `receive'
Could not execute command from ({"command"=>"message", "identifier"=>"{\"channel\":\"MessageChannel\",\"server_id\":2}", "data"=>"{\"action\":\"receive\",\"server_id\":2,\"content\":\"s\",\"parent_id\":null}"}) [NameError - uninitialized constant MessageChannel::OpenStruct]: /Users/cdugo/Desktop/Projects/whop-messenger/app/channels/message_channel.rb:64:in `rescue in receive' | /Users/cdugo/Desktop/Projects/whop-messenger/app/channels/message_channel.rb:39:in `receive' | /Users/cdugo/.rbenv/versions/3.2.2/lib/ruby/gems/3.2.0/gems/actioncable-7.2.2/lib/action_cable/channel/base.rb:285:in `public_send' | /Users/cdugo/.rbenv/versions/3.2.2/lib/ruby/gems/3.2.0/gems/actioncable-7.2.2/lib/action_cable/channel/base.rb:285:in `dispatch_action' | /Users/cdugo/.rbenv/versions/3.2.2/lib/ruby/gems/3.2.0/gems/actioncable-7.2.2/lib/action_cable/channel/base.rb:182:in `block in perform_action'
Started GET "/servers/2" for ::1 at 2024-11-05 10:57:57 -0500
Started GET "/cable" for ::1 at 2024-11-05 10:57:57 -0500
  [1m[36mActiveRecord::SchemaMigration Load (0.9ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Started GET "/cable" [WebSocket] for ::1 at 2024-11-05 10:57:57 -0500
Processing by ServersController#show as */*
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
  Parameters: {"id"=>"2"}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/channels/application_cable/connection.rb:12:in `find_verified_user'
Registered connection (Z2lkOi8vbWVzc2VuZ2VyL1VzZXIvMg)
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:8:in `set_current_user'
  [1m[36mServer Load (0.5ms)[0m  [1m[34mSELECT "servers".* FROM "servers" WHERE "servers"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/channels/message_channel.rb:7:in `subscribed'
  [1m[36mServer Load (0.5ms)[0m  [1m[34mSELECT "servers".* FROM "servers" WHERE "servers"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/servers_controller.rb:82:in `set_server'
  [1m[36mUser Exists? (3.9ms)[0m  [1m[34mSELECT 1 AS one FROM "users" INNER JOIN "server_members" ON "users"."id" = "server_members"."user_id" WHERE "server_members"."server_id" = $1 AND "users"."id" = $2 LIMIT $3[0m  [["server_id", 2], ["id", 2], ["LIMIT", 1]]
  [1m[36mUser Exists? (4.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" INNER JOIN "server_members" ON "users"."id" = "server_members"."user_id" WHERE "server_members"."server_id" = $1 AND "users"."id" = $2 LIMIT $3[0m  [["server_id", 2], ["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/servers_controller.rb:99:in `is_member_of_server?'
  â†³ app/channels/message_channel.rb:8:in `subscribed'
MessageChannel transmitting {:type=>"confirm_subscription", :server_id=>2}
MessageChannel is streaming from server_2
MessageChannel is transmitting the subscription confirmation
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" INNER JOIN "server_members" ON "users"."id" = "server_members"."user_id" WHERE "server_members"."server_id" = $1[0m  [["server_id", 2]]
  â†³ app/controllers/servers_controller.rb:15:in `show'
  [1m[36mMessage Load (0.8ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."server_id" = $1[0m  [["server_id", 2]]
  â†³ app/controllers/servers_controller.rb:15:in `show'
Completed 200 OK in 74ms (Views: 15.3ms | ActiveRecord: 22.8ms (5 queries, 0 cached) | GC: 12.7ms)


MessageChannel#receive({"server_id"=>2, "content"=>"s", "parent_id"=>nil})
  [1m[36mServer Load (0.7ms)[0m  [1m[34mSELECT "servers".* FROM "servers" WHERE "servers"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/channels/message_channel.rb:45:in `receive'
  [1m[36mServerMember Load (0.5ms)[0m  [1m[34mSELECT "server_members".* FROM "server_members" WHERE "server_members"."server_id" = $1[0m  [["server_id", 2]]
  â†³ app/channels/message_channel.rb:45:in `receive'
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" IN ($1, $2)[0m  [["id", 2], ["id", 3]]
  â†³ app/channels/message_channel.rb:45:in `receive'
Started GET "/cable" for ::1 at 2024-11-05 10:58:43 -0500
  [1m[36mActiveRecord::SchemaMigration Load (4.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Started GET "/cable" [WebSocket] for ::1 at 2024-11-05 10:58:43 -0500
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/channels/application_cable/connection.rb:12:in `find_verified_user'
Registered connection (Z2lkOi8vbWVzc2VuZ2VyL1VzZXIvMg)
  [1m[36mServer Load (0.7ms)[0m  [1m[34mSELECT "servers".* FROM "servers" WHERE "servers"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/channels/message_channel.rb:7:in `subscribed'
  [1m[36mUser Exists? (3.5ms)[0m  [1m[34mSELECT 1 AS one FROM "users" INNER JOIN "server_members" ON "users"."id" = "server_members"."user_id" WHERE "server_members"."server_id" = $1 AND "users"."id" = $2 LIMIT $3[0m  [["server_id", 2], ["id", 2], ["LIMIT", 1]]
  â†³ app/channels/message_channel.rb:8:in `subscribed'
MessageChannel transmitting {:type=>"confirm_subscription", :server_id=>2}
MessageChannel is transmitting the subscription confirmation
MessageChannel is streaming from server_2
Finished "/cable" [WebSocket] for ::1 at 2024-11-05 10:58:44 -0500
MessageChannel stopped streaming from server_2
Started GET "/cable" for ::1 at 2024-11-05 10:58:45 -0500
Started GET "/servers/2" for ::1 at 2024-11-05 10:58:45 -0500
Started GET "/cable" [WebSocket] for ::1 at 2024-11-05 10:58:45 -0500
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
  [1m[36mUser Load (29.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
Processing by ServersController#show as */*
  Parameters: {"id"=>"2"}
  â†³ app/channels/application_cable/connection.rb:12:in `find_verified_user'
Registered connection (Z2lkOi8vbWVzc2VuZ2VyL1VzZXIvMg)
  [1m[36mServer Load (0.4ms)[0m  [1m[34mSELECT "servers".* FROM "servers" WHERE "servers"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/channels/message_channel.rb:7:in `subscribed'
  [1m[36mUser Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM "users" INNER JOIN "server_members" ON "users"."id" = "server_members"."user_id" WHERE "server_members"."server_id" = $1 AND "users"."id" = $2 LIMIT $3[0m  [["server_id", 2], ["id", 2], ["LIMIT", 1]]
  â†³ app/channels/message_channel.rb:8:in `subscribed'
MessageChannel transmitting {:type=>"confirm_subscription", :server_id=>2}
MessageChannel is streaming from server_2
MessageChannel is transmitting the subscription confirmation
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:8:in `set_current_user'
  [1m[36mServer Load (0.7ms)[0m  [1m[34mSELECT "servers".* FROM "servers" WHERE "servers"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/servers_controller.rb:82:in `set_server'
  [1m[36mUser Exists? (54.0ms)[0m  [1m[34mSELECT 1 AS one FROM "users" INNER JOIN "server_members" ON "users"."id" = "server_members"."user_id" WHERE "server_members"."server_id" = $1 AND "users"."id" = $2 LIMIT $3[0m  [["server_id", 2], ["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/servers_controller.rb:99:in `is_member_of_server?'
  [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT "users".* FROM "users" INNER JOIN "server_members" ON "users"."id" = "server_members"."user_id" WHERE "server_members"."server_id" = $1[0m  [["server_id", 2]]
  â†³ app/controllers/servers_controller.rb:15:in `show'
  [1m[36mMessage Load (0.5ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."server_id" = $1[0m  [["server_id", 2]]
  â†³ app/controllers/servers_controller.rb:15:in `show'
Completed 200 OK in 188ms (Views: 8.9ms | ActiveRecord: 85.8ms (5 queries, 0 cached) | GC: 40.1ms)


MessageChannel#receive({"server_id"=>2, "content"=>"s", "parent_id"=>nil})
  [1m[36mServer Load (0.8ms)[0m  [1m[34mSELECT "servers".* FROM "servers" WHERE "servers"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/channels/message_channel.rb:45:in `receive'
  [1m[36mServerMember Load (0.3ms)[0m  [1m[34mSELECT "server_members".* FROM "server_members" WHERE "server_members"."server_id" = $1[0m  [["server_id", 2]]
  â†³ app/channels/message_channel.rb:45:in `receive'
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" IN ($1, $2)[0m  [["id", 2], ["id", 3]]
  â†³ app/channels/message_channel.rb:45:in `receive'
Started GET "/servers/2" for ::1 at 2024-11-05 10:59:34 -0500
Started GET "/cable" for ::1 at 2024-11-05 10:59:34 -0500
  [1m[36mActiveRecord::SchemaMigration Load (1.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by ServersController#show as */*
  Parameters: {"id"=>"2"}
Started GET "/cable" [WebSocket] for ::1 at 2024-11-05 10:59:34 -0500
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
  [1m[36mUser Load (1.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:8:in `set_current_user'
  [1m[36mServer Load (0.3ms)[0m  [1m[34mSELECT "servers".* FROM "servers" WHERE "servers"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/servers_controller.rb:82:in `set_server'
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/channels/application_cable/connection.rb:12:in `find_verified_user'
Registered connection (Z2lkOi8vbWVzc2VuZ2VyL1VzZXIvMg)
  [1m[36mUser Exists? (2.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" INNER JOIN "server_members" ON "users"."id" = "server_members"."user_id" WHERE "server_members"."server_id" = $1 AND "users"."id" = $2 LIMIT $3[0m  [["server_id", 2], ["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/servers_controller.rb:99:in `is_member_of_server?'
  [1m[36mServer Load (1.2ms)[0m  [1m[34mSELECT "servers".* FROM "servers" WHERE "servers"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/channels/message_channel.rb:7:in `subscribed'
  [1m[36mUser Load (1.2ms)[0m  [1m[34mSELECT "users".* FROM "users" INNER JOIN "server_members" ON "users"."id" = "server_members"."user_id" WHERE "server_members"."server_id" = $1[0m  [["server_id", 2]]
  â†³ app/controllers/servers_controller.rb:15:in `show'
  [1m[36mUser Exists? (6.8ms)[0m  [1m[34mSELECT 1 AS one FROM "users" INNER JOIN "server_members" ON "users"."id" = "server_members"."user_id" WHERE "server_members"."server_id" = $1 AND "users"."id" = $2 LIMIT $3[0m  [["server_id", 2], ["id", 2], ["LIMIT", 1]]
  â†³ app/channels/message_channel.rb:8:in `subscribed'
MessageChannel transmitting {:type=>"confirm_subscription", :server_id=>2}
MessageChannel is transmitting the subscription confirmation
MessageChannel is streaming from server_2
  [1m[36mMessage Load (0.4ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."server_id" = $1[0m  [["server_id", 2]]
  â†³ app/controllers/servers_controller.rb:15:in `show'
Completed 200 OK in 93ms (Views: 9.1ms | ActiveRecord: 43.9ms (5 queries, 0 cached) | GC: 21.4ms)


MessageChannel#receive({"server_id"=>2, "content"=>"s", "parent_id"=>nil})
  [1m[36mServer Load (0.4ms)[0m  [1m[34mSELECT "servers".* FROM "servers" WHERE "servers"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/channels/message_channel.rb:45:in `receive'
  [1m[36mServerMember Load (1.2ms)[0m  [1m[34mSELECT "server_members".* FROM "server_members" WHERE "server_members"."server_id" = $1[0m  [["server_id", 2]]
  â†³ app/channels/message_channel.rb:45:in `receive'
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" IN ($1, $2)[0m  [["id", 2], ["id", 3]]
  â†³ app/channels/message_channel.rb:45:in `receive'
Could not execute command from ({"command"=>"message", "identifier"=>"{\"channel\":\"MessageChannel\",\"server_id\":2}", "data"=>"{\"action\":\"receive\",\"server_id\":2,\"content\":\"s\",\"parent_id\":null}"}) [NameError - uninitialized constant MessageChannel::OpenStruct]: /Users/cdugo/Desktop/Projects/whop-messenger/app/channels/message_channel.rb:62:in `rescue in receive' | /Users/cdugo/Desktop/Projects/whop-messenger/app/channels/message_channel.rb:39:in `receive' | /Users/cdugo/.rbenv/versions/3.2.2/lib/ruby/gems/3.2.0/gems/actioncable-7.2.2/lib/action_cable/channel/base.rb:285:in `public_send' | /Users/cdugo/.rbenv/versions/3.2.2/lib/ruby/gems/3.2.0/gems/actioncable-7.2.2/lib/action_cable/channel/base.rb:285:in `dispatch_action' | /Users/cdugo/.rbenv/versions/3.2.2/lib/ruby/gems/3.2.0/gems/actioncable-7.2.2/lib/action_cable/channel/base.rb:182:in `block in perform_action'
Started GET "/servers/2" for ::1 at 2024-11-05 11:00:50 -0500
Started GET "/cable" for ::1 at 2024-11-05 11:00:50 -0500
  [1m[36mActiveRecord::SchemaMigration Load (0.7ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by ServersController#show as */*
Started GET "/cable" [WebSocket] for ::1 at 2024-11-05 11:00:50 -0500
  Parameters: {"id"=>"2"}
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
  [1m[36mUser Load (1.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:8:in `set_current_user'
  [1m[36mServer Load (0.6ms)[0m  [1m[34mSELECT "servers".* FROM "servers" WHERE "servers"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/servers_controller.rb:82:in `set_server'
  [1m[36mUser Load (5.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/channels/application_cable/connection.rb:12:in `find_verified_user'
Registered connection (Z2lkOi8vbWVzc2VuZ2VyL1VzZXIvMg)
  [1m[36mUser Exists? (1.9ms)[0m  [1m[34mSELECT 1 AS one FROM "users" INNER JOIN "server_members" ON "users"."id" = "server_members"."user_id" WHERE "server_members"."server_id" = $1 AND "users"."id" = $2 LIMIT $3[0m  [["server_id", 2], ["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/servers_controller.rb:99:in `is_member_of_server?'
  [1m[36mServer Load (0.5ms)[0m  [1m[34mSELECT "servers".* FROM "servers" WHERE "servers"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/channels/message_channel.rb:7:in `subscribed'
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT "users".* FROM "users" INNER JOIN "server_members" ON "users"."id" = "server_members"."user_id" WHERE "server_members"."server_id" = $1[0m  [["server_id", 2]]
  â†³ app/controllers/servers_controller.rb:15:in `show'
  [1m[36mUser Exists? (5.8ms)[0m  [1m[34mSELECT 1 AS one FROM "users" INNER JOIN "server_members" ON "users"."id" = "server_members"."user_id" WHERE "server_members"."server_id" = $1 AND "users"."id" = $2 LIMIT $3[0m  [["server_id", 2], ["id", 2], ["LIMIT", 1]]
  â†³ app/channels/message_channel.rb:8:in `subscribed'
MessageChannel transmitting {:type=>"confirm_subscription", :server_id=>2}
MessageChannel is transmitting the subscription confirmation
MessageChannel is streaming from server_2
  [1m[36mMessage Load (0.8ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."server_id" = $1[0m  [["server_id", 2]]
  â†³ app/controllers/servers_controller.rb:15:in `show'
Completed 200 OK in 72ms (Views: 7.5ms | ActiveRecord: 36.0ms (5 queries, 0 cached) | GC: 18.2ms)


MessageChannel#receive({"server_id"=>2, "content"=>"s", "parent_id"=>nil})
  [1m[36mServer Load (0.5ms)[0m  [1m[34mSELECT "servers".* FROM "servers" WHERE "servers"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/channels/message_channel.rb:45:in `receive'
  [1m[36mServerMember Load (0.2ms)[0m  [1m[34mSELECT "server_members".* FROM "server_members" WHERE "server_members"."server_id" = $1[0m  [["server_id", 2]]
  â†³ app/channels/message_channel.rb:45:in `receive'
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" IN ($1, $2)[0m  [["id", 2], ["id", 3]]
  â†³ app/channels/message_channel.rb:45:in `receive'
Could not execute command from ({"command"=>"message", "identifier"=>"{\"channel\":\"MessageChannel\",\"server_id\":2}", "data"=>"{\"action\":\"receive\",\"server_id\":2,\"content\":\"s\",\"parent_id\":null}"}) [NameError - uninitialized constant MessageChannel::OpenStruct]: /Users/cdugo/Desktop/Projects/whop-messenger/app/channels/message_channel.rb:62:in `rescue in receive' | /Users/cdugo/Desktop/Projects/whop-messenger/app/channels/message_channel.rb:39:in `receive' | /Users/cdugo/.rbenv/versions/3.2.2/lib/ruby/gems/3.2.0/gems/actioncable-7.2.2/lib/action_cable/channel/base.rb:285:in `public_send' | /Users/cdugo/.rbenv/versions/3.2.2/lib/ruby/gems/3.2.0/gems/actioncable-7.2.2/lib/action_cable/channel/base.rb:285:in `dispatch_action' | /Users/cdugo/.rbenv/versions/3.2.2/lib/ruby/gems/3.2.0/gems/actioncable-7.2.2/lib/action_cable/channel/base.rb:182:in `block in perform_action'
Started GET "/servers/2" for ::1 at 2024-11-05 11:05:52 -0500
Started GET "/cable" for ::1 at 2024-11-05 11:05:52 -0500
  [1m[36mActiveRecord::SchemaMigration Load (4.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by ServersController#show as */*
  Parameters: {"id"=>"2"}
Started GET "/cable" [WebSocket] for ::1 at 2024-11-05 11:05:52 -0500
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:8:in `set_current_user'
  [1m[36mServer Load (0.4ms)[0m  [1m[34mSELECT "servers".* FROM "servers" WHERE "servers"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/servers_controller.rb:82:in `set_server'
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/channels/application_cable/connection.rb:12:in `find_verified_user'
Registered connection (Z2lkOi8vbWVzc2VuZ2VyL1VzZXIvMg)
  [1m[36mUser Exists? (3.5ms)[0m  [1m[34mSELECT 1 AS one FROM "users" INNER JOIN "server_members" ON "users"."id" = "server_members"."user_id" WHERE "server_members"."server_id" = $1 AND "users"."id" = $2 LIMIT $3[0m  [["server_id", 2], ["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/servers_controller.rb:99:in `is_member_of_server?'
  [1m[36mServer Load (0.5ms)[0m  [1m[34mSELECT "servers".* FROM "servers" WHERE "servers"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/channels/message_channel.rb:7:in `subscribed'
  [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT "users".* FROM "users" INNER JOIN "server_members" ON "users"."id" = "server_members"."user_id" WHERE "server_members"."server_id" = $1[0m  [["server_id", 2]]
  â†³ app/controllers/servers_controller.rb:15:in `show'
  [1m[36mUser Exists? (5.5ms)[0m  [1m[34mSELECT 1 AS one FROM "users" INNER JOIN "server_members" ON "users"."id" = "server_members"."user_id" WHERE "server_members"."server_id" = $1 AND "users"."id" = $2 LIMIT $3[0m  [["server_id", 2], ["id", 2], ["LIMIT", 1]]
  â†³ app/channels/message_channel.rb:8:in `subscribed'
MessageChannel transmitting {:type=>"confirm_subscription", :server_id=>2}
MessageChannel is streaming from server_2
MessageChannel is transmitting the subscription confirmation
  [1m[36mMessage Load (0.9ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."server_id" = $1[0m  [["server_id", 2]]
  â†³ app/controllers/servers_controller.rb:15:in `show'
Completed 200 OK in 80ms (Views: 7.3ms | ActiveRecord: 39.0ms (5 queries, 0 cached) | GC: 18.4ms)


MessageChannel#receive({"server_id"=>2, "content"=>"s", "parent_id"=>nil})
  [1m[36mServer Load (0.8ms)[0m  [1m[34mSELECT "servers".* FROM "servers" WHERE "servers"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/channels/message_channel.rb:45:in `receive'
  [1m[36mServerMember Load (0.4ms)[0m  [1m[34mSELECT "server_members".* FROM "server_members" WHERE "server_members"."server_id" = $1[0m  [["server_id", 2]]
  â†³ app/channels/message_channel.rb:45:in `receive'
  [1m[36mUser Load (1.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" IN ($1, $2)[0m  [["id", 2], ["id", 3]]
  â†³ app/channels/message_channel.rb:45:in `receive'
Could not execute command from ({"command"=>"message", "identifier"=>"{\"channel\":\"MessageChannel\",\"server_id\":2}", "data"=>"{\"action\":\"receive\",\"server_id\":2,\"content\":\"s\",\"parent_id\":null}"}) [NameError - uninitialized constant MessageChannel::OpenStruct]: /Users/cdugo/Desktop/Projects/whop-messenger/app/channels/message_channel.rb:62:in `rescue in receive' | /Users/cdugo/Desktop/Projects/whop-messenger/app/channels/message_channel.rb:39:in `receive' | /Users/cdugo/.rbenv/versions/3.2.2/lib/ruby/gems/3.2.0/gems/actioncable-7.2.2/lib/action_cable/channel/base.rb:285:in `public_send' | /Users/cdugo/.rbenv/versions/3.2.2/lib/ruby/gems/3.2.0/gems/actioncable-7.2.2/lib/action_cable/channel/base.rb:285:in `dispatch_action' | /Users/cdugo/.rbenv/versions/3.2.2/lib/ruby/gems/3.2.0/gems/actioncable-7.2.2/lib/action_cable/channel/base.rb:182:in `block in perform_action'
Started GET "/servers/2" for ::1 at 2024-11-05 11:06:26 -0500
Started GET "/cable" for ::1 at 2024-11-05 11:06:26 -0500
  [1m[36mActiveRecord::SchemaMigration Load (0.8ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by ServersController#show as */*
  Parameters: {"id"=>"2"}
Started GET "/cable" [WebSocket] for ::1 at 2024-11-05 11:06:27 -0500
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:8:in `set_current_user'
  [1m[36mServer Load (0.5ms)[0m  [1m[34mSELECT "servers".* FROM "servers" WHERE "servers"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/servers_controller.rb:82:in `set_server'
  [1m[36mUser Load (7.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/channels/application_cable/connection.rb:12:in `find_verified_user'
Registered connection (Z2lkOi8vbWVzc2VuZ2VyL1VzZXIvMg)
  [1m[36mUser Exists? (9.8ms)[0m  [1m[34mSELECT 1 AS one FROM "users" INNER JOIN "server_members" ON "users"."id" = "server_members"."user_id" WHERE "server_members"."server_id" = $1 AND "users"."id" = $2 LIMIT $3[0m  [["server_id", 2], ["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/servers_controller.rb:99:in `is_member_of_server?'
  [1m[36mServer Load (3.0ms)[0m  [1m[34mSELECT "servers".* FROM "servers" WHERE "servers"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/channels/message_channel.rb:7:in `subscribed'
  [1m[36mUser Load (1.2ms)[0m  [1m[34mSELECT "users".* FROM "users" INNER JOIN "server_members" ON "users"."id" = "server_members"."user_id" WHERE "server_members"."server_id" = $1[0m  [["server_id", 2]]
  â†³ app/controllers/servers_controller.rb:15:in `show'
  [1m[36mUser Exists? (9.0ms)[0m  [1m[34mSELECT 1 AS one FROM "users" INNER JOIN "server_members" ON "users"."id" = "server_members"."user_id" WHERE "server_members"."server_id" = $1 AND "users"."id" = $2 LIMIT $3[0m  [["server_id", 2], ["id", 2], ["LIMIT", 1]]
  â†³ app/channels/message_channel.rb:8:in `subscribed'
MessageChannel transmitting {:type=>"confirm_subscription", :server_id=>2}
MessageChannel is streaming from server_2
MessageChannel is transmitting the subscription confirmation
  [1m[36mMessage Load (0.9ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."server_id" = $1[0m  [["server_id", 2]]
  â†³ app/controllers/servers_controller.rb:15:in `show'
Completed 200 OK in 110ms (Views: 17.4ms | ActiveRecord: 43.1ms (5 queries, 0 cached) | GC: 22.2ms)


MessageChannel#receive({"server_id"=>2, "content"=>"s", "parent_id"=>nil})
  [1m[36mServer Load (1.4ms)[0m  [1m[34mSELECT "servers".* FROM "servers" WHERE "servers"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/channels/message_channel.rb:45:in `receive'
  [1m[36mServerMember Load (0.7ms)[0m  [1m[34mSELECT "server_members".* FROM "server_members" WHERE "server_members"."server_id" = $1[0m  [["server_id", 2]]
  â†³ app/channels/message_channel.rb:45:in `receive'
  [1m[36mUser Load (1.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" IN ($1, $2)[0m  [["id", 2], ["id", 3]]
  â†³ app/channels/message_channel.rb:45:in `receive'
Could not execute command from ({"command"=>"message", "identifier"=>"{\"channel\":\"MessageChannel\",\"server_id\":2}", "data"=>"{\"action\":\"receive\",\"server_id\":2,\"content\":\"s\",\"parent_id\":null}"}) [NameError - uninitialized constant MessageChannel::OpenStruct]: /Users/cdugo/Desktop/Projects/whop-messenger/app/channels/message_channel.rb:62:in `rescue in receive' | /Users/cdugo/Desktop/Projects/whop-messenger/app/channels/message_channel.rb:39:in `receive' | /Users/cdugo/.rbenv/versions/3.2.2/lib/ruby/gems/3.2.0/gems/actioncable-7.2.2/lib/action_cable/channel/base.rb:285:in `public_send' | /Users/cdugo/.rbenv/versions/3.2.2/lib/ruby/gems/3.2.0/gems/actioncable-7.2.2/lib/action_cable/channel/base.rb:285:in `dispatch_action' | /Users/cdugo/.rbenv/versions/3.2.2/lib/ruby/gems/3.2.0/gems/actioncable-7.2.2/lib/action_cable/channel/base.rb:182:in `block in perform_action'
Started GET "/cable" for ::1 at 2024-11-05 11:06:58 -0500
Started GET "/servers/2" for ::1 at 2024-11-05 11:06:58 -0500
  [1m[36mActiveRecord::SchemaMigration Load (0.7ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by ServersController#show as */*
  Parameters: {"id"=>"2"}
Started GET "/cable" [WebSocket] for ::1 at 2024-11-05 11:06:58 -0500
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
  [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:8:in `set_current_user'
  [1m[36mServer Load (0.7ms)[0m  [1m[34mSELECT "servers".* FROM "servers" WHERE "servers"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/servers_controller.rb:82:in `set_server'
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/channels/application_cable/connection.rb:12:in `find_verified_user'
Registered connection (Z2lkOi8vbWVzc2VuZ2VyL1VzZXIvMg)
Could not execute command from ({"command"=>"subscribe", "identifier"=>"{\"channel\":\"MessageChannel\",\"server_id\":2}"}) [SyntaxError - /Users/cdugo/Desktop/Projects/whop-messenger/app/channels/message_channel.rb:71: syntax error, unexpected `if' modifier, expecting ')'
...sage.find(data['parent_id']) if data['parent_id'].present?
...                             ^~
/Users/cdugo/Desktop/Projects/whop-messenger/app/channels/message_channel.rb:72: syntax error, unexpected ')', expecting `end' or dummy end
    )
    ^
]: <internal:/Users/cdugo/.rbenv/versions/3.2.2/lib/ruby/3.2.0/rubygems/core_ext/kernel_require.rb>:37:in `require' | <internal:/Users/cdugo/.rbenv/versions/3.2.2/lib/ruby/3.2.0/rubygems/core_ext/kernel_require.rb>:37:in `require' | /Users/cdugo/.rbenv/versions/3.2.2/lib/ruby/gems/3.2.0/gems/bootsnap-1.18.4/lib/bootsnap/load_path_cache/core_ext/kernel_require.rb:30:in `require' | /Users/cdugo/.rbenv/versions/3.2.2/lib/ruby/gems/3.2.0/gems/zeitwerk-2.7.1/lib/zeitwerk/core_ext/kernel.rb:26:in `require' | /Users/cdugo/.rbenv/versions/3.2.2/lib/ruby/gems/3.2.0/gems/activesupport-7.2.2/lib/active_support/inflector/methods.rb:290:in `const_get'
  [1m[36mUser Exists? (1.5ms)[0m  [1m[34mSELECT 1 AS one FROM "users" INNER JOIN "server_members" ON "users"."id" = "server_members"."user_id" WHERE "server_members"."server_id" = $1 AND "users"."id" = $2 LIMIT $3[0m  [["server_id", 2], ["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/servers_controller.rb:99:in `is_member_of_server?'
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT "users".* FROM "users" INNER JOIN "server_members" ON "users"."id" = "server_members"."user_id" WHERE "server_members"."server_id" = $1[0m  [["server_id", 2]]
  â†³ app/controllers/servers_controller.rb:15:in `show'
  [1m[36mMessage Load (0.7ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."server_id" = $1[0m  [["server_id", 2]]
  â†³ app/controllers/servers_controller.rb:15:in `show'
Completed 200 OK in 71ms (Views: 8.6ms | ActiveRecord: 24.4ms (5 queries, 0 cached) | GC: 7.7ms)


Could not execute command from ({"command"=>"subscribe", "identifier"=>"{\"channel\":\"MessageChannel\",\"server_id\":2}"}) [SyntaxError - /Users/cdugo/Desktop/Projects/whop-messenger/app/channels/message_channel.rb:71: syntax error, unexpected `if' modifier, expecting ')'
...sage.find(data['parent_id']) if data['parent_id'].present?
...                             ^~
/Users/cdugo/Desktop/Projects/whop-messenger/app/channels/message_channel.rb:72: syntax error, unexpected ')', expecting `end' or dummy end
    )
    ^
]: <internal:/Users/cdugo/.rbenv/versions/3.2.2/lib/ruby/3.2.0/rubygems/core_ext/kernel_require.rb>:37:in `require' | <internal:/Users/cdugo/.rbenv/versions/3.2.2/lib/ruby/3.2.0/rubygems/core_ext/kernel_require.rb>:37:in `require' | /Users/cdugo/.rbenv/versions/3.2.2/lib/ruby/gems/3.2.0/gems/bootsnap-1.18.4/lib/bootsnap/load_path_cache/core_ext/kernel_require.rb:30:in `require' | /Users/cdugo/.rbenv/versions/3.2.2/lib/ruby/gems/3.2.0/gems/zeitwerk-2.7.1/lib/zeitwerk/core_ext/kernel.rb:26:in `require' | /Users/cdugo/.rbenv/versions/3.2.2/lib/ruby/gems/3.2.0/gems/activesupport-7.2.2/lib/active_support/inflector/methods.rb:290:in `const_get'
Could not execute command from ({"command"=>"subscribe", "identifier"=>"{\"channel\":\"MessageChannel\",\"server_id\":2}"}) [SyntaxError - /Users/cdugo/Desktop/Projects/whop-messenger/app/channels/message_channel.rb:71: syntax error, unexpected `if' modifier, expecting ')'
...sage.find(data['parent_id']) if data['parent_id'].present?
...                             ^~
/Users/cdugo/Desktop/Projects/whop-messenger/app/channels/message_channel.rb:72: syntax error, unexpected ')', expecting `end' or dummy end
    )
    ^
]: <internal:/Users/cdugo/.rbenv/versions/3.2.2/lib/ruby/3.2.0/rubygems/core_ext/kernel_require.rb>:37:in `require' | <internal:/Users/cdugo/.rbenv/versions/3.2.2/lib/ruby/3.2.0/rubygems/core_ext/kernel_require.rb>:37:in `require' | /Users/cdugo/.rbenv/versions/3.2.2/lib/ruby/gems/3.2.0/gems/bootsnap-1.18.4/lib/bootsnap/load_path_cache/core_ext/kernel_require.rb:30:in `require' | /Users/cdugo/.rbenv/versions/3.2.2/lib/ruby/gems/3.2.0/gems/zeitwerk-2.7.1/lib/zeitwerk/core_ext/kernel.rb:26:in `require' | /Users/cdugo/.rbenv/versions/3.2.2/lib/ruby/gems/3.2.0/gems/activesupport-7.2.2/lib/active_support/inflector/methods.rb:290:in `const_get'
Could not execute command from ({"command"=>"message", "identifier"=>"{\"channel\":\"MessageChannel\",\"server_id\":2}", "data"=>"{\"action\":\"receive\",\"server_id\":2,\"content\":\"s\",\"parent_id\":null}"}) [RuntimeError - Unable to find subscription with identifier: {"channel":"MessageChannel","server_id":2}]: /Users/cdugo/.rbenv/versions/3.2.2/lib/ruby/gems/3.2.0/gems/actioncable-7.2.2/lib/action_cable/connection/subscriptions.rb:80:in `find' | /Users/cdugo/.rbenv/versions/3.2.2/lib/ruby/gems/3.2.0/gems/actioncable-7.2.2/lib/action_cable/connection/subscriptions.rb:61:in `perform_action' | /Users/cdugo/.rbenv/versions/3.2.2/lib/ruby/gems/3.2.0/gems/actioncable-7.2.2/lib/action_cable/connection/subscriptions.rb:24:in `execute_command' | /Users/cdugo/.rbenv/versions/3.2.2/lib/ruby/gems/3.2.0/gems/actioncable-7.2.2/lib/action_cable/connection/base.rb:111:in `block in handle_channel_command' | /Users/cdugo/.rbenv/versions/3.2.2/lib/ruby/gems/3.2.0/gems/activesupport-7.2.2/lib/active_support/callbacks.rb:101:in `run_callbacks'
Could not execute command from ({"command"=>"subscribe", "identifier"=>"{\"channel\":\"MessageChannel\",\"server_id\":2}"}) [SyntaxError - /Users/cdugo/Desktop/Projects/whop-messenger/app/channels/message_channel.rb:71: syntax error, unexpected `if' modifier, expecting ')'
...sage.find(data['parent_id']) if data['parent_id'].present?
...                             ^~
/Users/cdugo/Desktop/Projects/whop-messenger/app/channels/message_channel.rb:72: syntax error, unexpected ')', expecting `end' or dummy end
    )
    ^
]: <internal:/Users/cdugo/.rbenv/versions/3.2.2/lib/ruby/3.2.0/rubygems/core_ext/kernel_require.rb>:37:in `require' | <internal:/Users/cdugo/.rbenv/versions/3.2.2/lib/ruby/3.2.0/rubygems/core_ext/kernel_require.rb>:37:in `require' | /Users/cdugo/.rbenv/versions/3.2.2/lib/ruby/gems/3.2.0/gems/bootsnap-1.18.4/lib/bootsnap/load_path_cache/core_ext/kernel_require.rb:30:in `require' | /Users/cdugo/.rbenv/versions/3.2.2/lib/ruby/gems/3.2.0/gems/zeitwerk-2.7.1/lib/zeitwerk/core_ext/kernel.rb:26:in `require' | /Users/cdugo/.rbenv/versions/3.2.2/lib/ruby/gems/3.2.0/gems/activesupport-7.2.2/lib/active_support/inflector/methods.rb:290:in `const_get'
Could not execute command from ({"command"=>"subscribe", "identifier"=>"{\"channel\":\"MessageChannel\",\"server_id\":2}"}) [SyntaxError - /Users/cdugo/Desktop/Projects/whop-messenger/app/channels/message_channel.rb:71: syntax error, unexpected `if' modifier, expecting ')'
...sage.find(data['parent_id']) if data['parent_id'].present?
...                             ^~
/Users/cdugo/Desktop/Projects/whop-messenger/app/channels/message_channel.rb:72: syntax error, unexpected ')', expecting `end' or dummy end
    )
    ^
]: <internal:/Users/cdugo/.rbenv/versions/3.2.2/lib/ruby/3.2.0/rubygems/core_ext/kernel_require.rb>:37:in `require' | <internal:/Users/cdugo/.rbenv/versions/3.2.2/lib/ruby/3.2.0/rubygems/core_ext/kernel_require.rb>:37:in `require' | /Users/cdugo/.rbenv/versions/3.2.2/lib/ruby/gems/3.2.0/gems/bootsnap-1.18.4/lib/bootsnap/load_path_cache/core_ext/kernel_require.rb:30:in `require' | /Users/cdugo/.rbenv/versions/3.2.2/lib/ruby/gems/3.2.0/gems/zeitwerk-2.7.1/lib/zeitwerk/core_ext/kernel.rb:26:in `require' | /Users/cdugo/.rbenv/versions/3.2.2/lib/ruby/gems/3.2.0/gems/activesupport-7.2.2/lib/active_support/inflector/methods.rb:290:in `const_get'
Could not execute command from ({"command"=>"subscribe", "identifier"=>"{\"channel\":\"MessageChannel\",\"server_id\":2}"}) [SyntaxError - /Users/cdugo/Desktop/Projects/whop-messenger/app/channels/message_channel.rb:71: syntax error, unexpected `if' modifier, expecting ')'
...sage.find(data['parent_id']) if data['parent_id'].present?
...                             ^~
/Users/cdugo/Desktop/Projects/whop-messenger/app/channels/message_channel.rb:72: syntax error, unexpected ')', expecting `end' or dummy end
    )
    ^
]: <internal:/Users/cdugo/.rbenv/versions/3.2.2/lib/ruby/3.2.0/rubygems/core_ext/kernel_require.rb>:37:in `require' | <internal:/Users/cdugo/.rbenv/versions/3.2.2/lib/ruby/3.2.0/rubygems/core_ext/kernel_require.rb>:37:in `require' | /Users/cdugo/.rbenv/versions/3.2.2/lib/ruby/gems/3.2.0/gems/bootsnap-1.18.4/lib/bootsnap/load_path_cache/core_ext/kernel_require.rb:30:in `require' | /Users/cdugo/.rbenv/versions/3.2.2/lib/ruby/gems/3.2.0/gems/zeitwerk-2.7.1/lib/zeitwerk/core_ext/kernel.rb:26:in `require' | /Users/cdugo/.rbenv/versions/3.2.2/lib/ruby/gems/3.2.0/gems/activesupport-7.2.2/lib/active_support/inflector/methods.rb:290:in `const_get'
Could not execute command from ({"command"=>"subscribe", "identifier"=>"{\"channel\":\"MessageChannel\",\"server_id\":2}"}) [SyntaxError - /Users/cdugo/Desktop/Projects/whop-messenger/app/channels/message_channel.rb:71: syntax error, unexpected `if' modifier, expecting ')'
...sage.find(data['parent_id']) if data['parent_id'].present?
...                             ^~
/Users/cdugo/Desktop/Projects/whop-messenger/app/channels/message_channel.rb:72: syntax error, unexpected ')', expecting `end' or dummy end
    )
    ^
]: <internal:/Users/cdugo/.rbenv/versions/3.2.2/lib/ruby/3.2.0/rubygems/core_ext/kernel_require.rb>:37:in `require' | <internal:/Users/cdugo/.rbenv/versions/3.2.2/lib/ruby/3.2.0/rubygems/core_ext/kernel_require.rb>:37:in `require' | /Users/cdugo/.rbenv/versions/3.2.2/lib/ruby/gems/3.2.0/gems/bootsnap-1.18.4/lib/bootsnap/load_path_cache/core_ext/kernel_require.rb:30:in `require' | /Users/cdugo/.rbenv/versions/3.2.2/lib/ruby/gems/3.2.0/gems/zeitwerk-2.7.1/lib/zeitwerk/core_ext/kernel.rb:26:in `require' | /Users/cdugo/.rbenv/versions/3.2.2/lib/ruby/gems/3.2.0/gems/activesupport-7.2.2/lib/active_support/inflector/methods.rb:290:in `const_get'
Could not execute command from ({"command"=>"subscribe", "identifier"=>"{\"channel\":\"MessageChannel\",\"server_id\":2}"}) [SyntaxError - /Users/cdugo/Desktop/Projects/whop-messenger/app/channels/message_channel.rb:71: syntax error, unexpected `if' modifier, expecting ')'
...sage.find(data['parent_id']) if data['parent_id'].present?
...                             ^~
/Users/cdugo/Desktop/Projects/whop-messenger/app/channels/message_channel.rb:72: syntax error, unexpected ')', expecting `end' or dummy end
    )
    ^
]: <internal:/Users/cdugo/.rbenv/versions/3.2.2/lib/ruby/3.2.0/rubygems/core_ext/kernel_require.rb>:37:in `require' | <internal:/Users/cdugo/.rbenv/versions/3.2.2/lib/ruby/3.2.0/rubygems/core_ext/kernel_require.rb>:37:in `require' | /Users/cdugo/.rbenv/versions/3.2.2/lib/ruby/gems/3.2.0/gems/bootsnap-1.18.4/lib/bootsnap/load_path_cache/core_ext/kernel_require.rb:30:in `require' | /Users/cdugo/.rbenv/versions/3.2.2/lib/ruby/gems/3.2.0/gems/zeitwerk-2.7.1/lib/zeitwerk/core_ext/kernel.rb:26:in `require' | /Users/cdugo/.rbenv/versions/3.2.2/lib/ruby/gems/3.2.0/gems/activesupport-7.2.2/lib/active_support/inflector/methods.rb:290:in `const_get'
Could not execute command from ({"command"=>"subscribe", "identifier"=>"{\"channel\":\"MessageChannel\",\"server_id\":2}"}) [SyntaxError - /Users/cdugo/Desktop/Projects/whop-messenger/app/channels/message_channel.rb:71: syntax error, unexpected `if' modifier, expecting ')'
...sage.find(data['parent_id']) if data['parent_id'].present?
...                             ^~
/Users/cdugo/Desktop/Projects/whop-messenger/app/channels/message_channel.rb:72: syntax error, unexpected ')', expecting `end' or dummy end
    )
    ^
]: <internal:/Users/cdugo/.rbenv/versions/3.2.2/lib/ruby/3.2.0/rubygems/core_ext/kernel_require.rb>:37:in `require' | <internal:/Users/cdugo/.rbenv/versions/3.2.2/lib/ruby/3.2.0/rubygems/core_ext/kernel_require.rb>:37:in `require' | /Users/cdugo/.rbenv/versions/3.2.2/lib/ruby/gems/3.2.0/gems/bootsnap-1.18.4/lib/bootsnap/load_path_cache/core_ext/kernel_require.rb:30:in `require' | /Users/cdugo/.rbenv/versions/3.2.2/lib/ruby/gems/3.2.0/gems/zeitwerk-2.7.1/lib/zeitwerk/core_ext/kernel.rb:26:in `require' | /Users/cdugo/.rbenv/versions/3.2.2/lib/ruby/gems/3.2.0/gems/activesupport-7.2.2/lib/active_support/inflector/methods.rb:290:in `const_get'
Could not execute command from ({"command"=>"subscribe", "identifier"=>"{\"channel\":\"MessageChannel\",\"server_id\":2}"}) [SyntaxError - /Users/cdugo/Desktop/Projects/whop-messenger/app/channels/message_channel.rb:71: syntax error, unexpected `if' modifier, expecting ')'
...sage.find(data['parent_id']) if data['parent_id'].present?
...                             ^~
/Users/cdugo/Desktop/Projects/whop-messenger/app/channels/message_channel.rb:72: syntax error, unexpected ')', expecting `end' or dummy end
    )
    ^
]: <internal:/Users/cdugo/.rbenv/versions/3.2.2/lib/ruby/3.2.0/rubygems/core_ext/kernel_require.rb>:37:in `require' | <internal:/Users/cdugo/.rbenv/versions/3.2.2/lib/ruby/3.2.0/rubygems/core_ext/kernel_require.rb>:37:in `require' | /Users/cdugo/.rbenv/versions/3.2.2/lib/ruby/gems/3.2.0/gems/bootsnap-1.18.4/lib/bootsnap/load_path_cache/core_ext/kernel_require.rb:30:in `require' | /Users/cdugo/.rbenv/versions/3.2.2/lib/ruby/gems/3.2.0/gems/zeitwerk-2.7.1/lib/zeitwerk/core_ext/kernel.rb:26:in `require' | /Users/cdugo/.rbenv/versions/3.2.2/lib/ruby/gems/3.2.0/gems/activesupport-7.2.2/lib/active_support/inflector/methods.rb:290:in `const_get'
Could not execute command from ({"command"=>"subscribe", "identifier"=>"{\"channel\":\"MessageChannel\",\"server_id\":2}"}) [SyntaxError - /Users/cdugo/Desktop/Projects/whop-messenger/app/channels/message_channel.rb:71: syntax error, unexpected `if' modifier, expecting ')'
...sage.find(data['parent_id']) if data['parent_id'].present?
...                             ^~
/Users/cdugo/Desktop/Projects/whop-messenger/app/channels/message_channel.rb:72: syntax error, unexpected ')', expecting `end' or dummy end
    )
    ^
]: <internal:/Users/cdugo/.rbenv/versions/3.2.2/lib/ruby/3.2.0/rubygems/core_ext/kernel_require.rb>:37:in `require' | <internal:/Users/cdugo/.rbenv/versions/3.2.2/lib/ruby/3.2.0/rubygems/core_ext/kernel_require.rb>:37:in `require' | /Users/cdugo/.rbenv/versions/3.2.2/lib/ruby/gems/3.2.0/gems/bootsnap-1.18.4/lib/bootsnap/load_path_cache/core_ext/kernel_require.rb:30:in `require' | /Users/cdugo/.rbenv/versions/3.2.2/lib/ruby/gems/3.2.0/gems/zeitwerk-2.7.1/lib/zeitwerk/core_ext/kernel.rb:26:in `require' | /Users/cdugo/.rbenv/versions/3.2.2/lib/ruby/gems/3.2.0/gems/activesupport-7.2.2/lib/active_support/inflector/methods.rb:290:in `const_get'
Could not execute command from ({"command"=>"subscribe", "identifier"=>"{\"channel\":\"MessageChannel\",\"server_id\":2}"}) [SyntaxError - /Users/cdugo/Desktop/Projects/whop-messenger/app/channels/message_channel.rb:71: syntax error, unexpected `if' modifier, expecting ')'
...sage.find(data['parent_id']) if data['parent_id'].present?
...                             ^~
/Users/cdugo/Desktop/Projects/whop-messenger/app/channels/message_channel.rb:72: syntax error, unexpected ')', expecting `end' or dummy end
    )
    ^
]: <internal:/Users/cdugo/.rbenv/versions/3.2.2/lib/ruby/3.2.0/rubygems/core_ext/kernel_require.rb>:37:in `require' | <internal:/Users/cdugo/.rbenv/versions/3.2.2/lib/ruby/3.2.0/rubygems/core_ext/kernel_require.rb>:37:in `require' | /Users/cdugo/.rbenv/versions/3.2.2/lib/ruby/gems/3.2.0/gems/bootsnap-1.18.4/lib/bootsnap/load_path_cache/core_ext/kernel_require.rb:30:in `require' | /Users/cdugo/.rbenv/versions/3.2.2/lib/ruby/gems/3.2.0/gems/zeitwerk-2.7.1/lib/zeitwerk/core_ext/kernel.rb:26:in `require' | /Users/cdugo/.rbenv/versions/3.2.2/lib/ruby/gems/3.2.0/gems/activesupport-7.2.2/lib/active_support/inflector/methods.rb:290:in `const_get'
Could not execute command from ({"command"=>"subscribe", "identifier"=>"{\"channel\":\"MessageChannel\",\"server_id\":2}"}) [SyntaxError - /Users/cdugo/Desktop/Projects/whop-messenger/app/channels/message_channel.rb:71: syntax error, unexpected `if' modifier, expecting ')'
...sage.find(data['parent_id']) if data['parent_id'].present?
...                             ^~
/Users/cdugo/Desktop/Projects/whop-messenger/app/channels/message_channel.rb:72: syntax error, unexpected ')', expecting `end' or dummy end
    )
    ^
]: <internal:/Users/cdugo/.rbenv/versions/3.2.2/lib/ruby/3.2.0/rubygems/core_ext/kernel_require.rb>:37:in `require' | <internal:/Users/cdugo/.rbenv/versions/3.2.2/lib/ruby/3.2.0/rubygems/core_ext/kernel_require.rb>:37:in `require' | /Users/cdugo/.rbenv/versions/3.2.2/lib/ruby/gems/3.2.0/gems/bootsnap-1.18.4/lib/bootsnap/load_path_cache/core_ext/kernel_require.rb:30:in `require' | /Users/cdugo/.rbenv/versions/3.2.2/lib/ruby/gems/3.2.0/gems/zeitwerk-2.7.1/lib/zeitwerk/core_ext/kernel.rb:26:in `require' | /Users/cdugo/.rbenv/versions/3.2.2/lib/ruby/gems/3.2.0/gems/activesupport-7.2.2/lib/active_support/inflector/methods.rb:290:in `const_get'
Could not execute command from ({"command"=>"subscribe", "identifier"=>"{\"channel\":\"MessageChannel\",\"server_id\":2}"}) [SyntaxError - /Users/cdugo/Desktop/Projects/whop-messenger/app/channels/message_channel.rb:71: syntax error, unexpected `if' modifier, expecting ')'
...sage.find(data['parent_id']) if data['parent_id'].present?
...                             ^~
/Users/cdugo/Desktop/Projects/whop-messenger/app/channels/message_channel.rb:72: syntax error, unexpected ')', expecting `end' or dummy end
    )
    ^
]: <internal:/Users/cdugo/.rbenv/versions/3.2.2/lib/ruby/3.2.0/rubygems/core_ext/kernel_require.rb>:37:in `require' | <internal:/Users/cdugo/.rbenv/versions/3.2.2/lib/ruby/3.2.0/rubygems/core_ext/kernel_require.rb>:37:in `require' | /Users/cdugo/.rbenv/versions/3.2.2/lib/ruby/gems/3.2.0/gems/bootsnap-1.18.4/lib/bootsnap/load_path_cache/core_ext/kernel_require.rb:30:in `require' | /Users/cdugo/.rbenv/versions/3.2.2/lib/ruby/gems/3.2.0/gems/zeitwerk-2.7.1/lib/zeitwerk/core_ext/kernel.rb:26:in `require' | /Users/cdugo/.rbenv/versions/3.2.2/lib/ruby/gems/3.2.0/gems/activesupport-7.2.2/lib/active_support/inflector/methods.rb:290:in `const_get'
Could not execute command from ({"command"=>"subscribe", "identifier"=>"{\"channel\":\"MessageChannel\",\"server_id\":2}"}) [SyntaxError - /Users/cdugo/Desktop/Projects/whop-messenger/app/channels/message_channel.rb:71: syntax error, unexpected `if' modifier, expecting ')'
...sage.find(data['parent_id']) if data['parent_id'].present?
...                             ^~
/Users/cdugo/Desktop/Projects/whop-messenger/app/channels/message_channel.rb:72: syntax error, unexpected ')', expecting `end' or dummy end
    )
    ^
]: <internal:/Users/cdugo/.rbenv/versions/3.2.2/lib/ruby/3.2.0/rubygems/core_ext/kernel_require.rb>:37:in `require' | <internal:/Users/cdugo/.rbenv/versions/3.2.2/lib/ruby/3.2.0/rubygems/core_ext/kernel_require.rb>:37:in `require' | /Users/cdugo/.rbenv/versions/3.2.2/lib/ruby/gems/3.2.0/gems/bootsnap-1.18.4/lib/bootsnap/load_path_cache/core_ext/kernel_require.rb:30:in `require' | /Users/cdugo/.rbenv/versions/3.2.2/lib/ruby/gems/3.2.0/gems/zeitwerk-2.7.1/lib/zeitwerk/core_ext/kernel.rb:26:in `require' | /Users/cdugo/.rbenv/versions/3.2.2/lib/ruby/gems/3.2.0/gems/activesupport-7.2.2/lib/active_support/inflector/methods.rb:290:in `const_get'
Could not execute command from ({"command"=>"subscribe", "identifier"=>"{\"channel\":\"MessageChannel\",\"server_id\":2}"}) [SyntaxError - /Users/cdugo/Desktop/Projects/whop-messenger/app/channels/message_channel.rb:71: syntax error, unexpected `if' modifier, expecting ')'
...sage.find(data['parent_id']) if data['parent_id'].present?
...                             ^~
/Users/cdugo/Desktop/Projects/whop-messenger/app/channels/message_channel.rb:72: syntax error, unexpected ')', expecting `end' or dummy end
    )
    ^
]: <internal:/Users/cdugo/.rbenv/versions/3.2.2/lib/ruby/3.2.0/rubygems/core_ext/kernel_require.rb>:37:in `require' | <internal:/Users/cdugo/.rbenv/versions/3.2.2/lib/ruby/3.2.0/rubygems/core_ext/kernel_require.rb>:37:in `require' | /Users/cdugo/.rbenv/versions/3.2.2/lib/ruby/gems/3.2.0/gems/bootsnap-1.18.4/lib/bootsnap/load_path_cache/core_ext/kernel_require.rb:30:in `require' | /Users/cdugo/.rbenv/versions/3.2.2/lib/ruby/gems/3.2.0/gems/zeitwerk-2.7.1/lib/zeitwerk/core_ext/kernel.rb:26:in `require' | /Users/cdugo/.rbenv/versions/3.2.2/lib/ruby/gems/3.2.0/gems/activesupport-7.2.2/lib/active_support/inflector/methods.rb:290:in `const_get'
Could not execute command from ({"command"=>"subscribe", "identifier"=>"{\"channel\":\"MessageChannel\",\"server_id\":2}"}) [SyntaxError - /Users/cdugo/Desktop/Projects/whop-messenger/app/channels/message_channel.rb:71: syntax error, unexpected `if' modifier, expecting ')'
...sage.find(data['parent_id']) if data['parent_id'].present?
...                             ^~
/Users/cdugo/Desktop/Projects/whop-messenger/app/channels/message_channel.rb:72: syntax error, unexpected ')', expecting `end' or dummy end
    )
    ^
]: <internal:/Users/cdugo/.rbenv/versions/3.2.2/lib/ruby/3.2.0/rubygems/core_ext/kernel_require.rb>:37:in `require' | <internal:/Users/cdugo/.rbenv/versions/3.2.2/lib/ruby/3.2.0/rubygems/core_ext/kernel_require.rb>:37:in `require' | /Users/cdugo/.rbenv/versions/3.2.2/lib/ruby/gems/3.2.0/gems/bootsnap-1.18.4/lib/bootsnap/load_path_cache/core_ext/kernel_require.rb:30:in `require' | /Users/cdugo/.rbenv/versions/3.2.2/lib/ruby/gems/3.2.0/gems/zeitwerk-2.7.1/lib/zeitwerk/core_ext/kernel.rb:26:in `require' | /Users/cdugo/.rbenv/versions/3.2.2/lib/ruby/gems/3.2.0/gems/activesupport-7.2.2/lib/active_support/inflector/methods.rb:290:in `const_get'
Could not execute command from ({"command"=>"subscribe", "identifier"=>"{\"channel\":\"MessageChannel\",\"server_id\":2}"}) [SyntaxError - /Users/cdugo/Desktop/Projects/whop-messenger/app/channels/message_channel.rb:71: syntax error, unexpected `if' modifier, expecting ')'
...sage.find(data['parent_id']) if data['parent_id'].present?
...                             ^~
/Users/cdugo/Desktop/Projects/whop-messenger/app/channels/message_channel.rb:72: syntax error, unexpected ')', expecting `end' or dummy end
    )
    ^
]: <internal:/Users/cdugo/.rbenv/versions/3.2.2/lib/ruby/3.2.0/rubygems/core_ext/kernel_require.rb>:37:in `require' | <internal:/Users/cdugo/.rbenv/versions/3.2.2/lib/ruby/3.2.0/rubygems/core_ext/kernel_require.rb>:37:in `require' | /Users/cdugo/.rbenv/versions/3.2.2/lib/ruby/gems/3.2.0/gems/bootsnap-1.18.4/lib/bootsnap/load_path_cache/core_ext/kernel_require.rb:30:in `require' | /Users/cdugo/.rbenv/versions/3.2.2/lib/ruby/gems/3.2.0/gems/zeitwerk-2.7.1/lib/zeitwerk/core_ext/kernel.rb:26:in `require' | /Users/cdugo/.rbenv/versions/3.2.2/lib/ruby/gems/3.2.0/gems/activesupport-7.2.2/lib/active_support/inflector/methods.rb:290:in `const_get'
Could not execute command from ({"command"=>"subscribe", "identifier"=>"{\"channel\":\"MessageChannel\",\"server_id\":2}"}) [SyntaxError - /Users/cdugo/Desktop/Projects/whop-messenger/app/channels/message_channel.rb:71: syntax error, unexpected `if' modifier, expecting ')'
...sage.find(data['parent_id']) if data['parent_id'].present?
...                             ^~
/Users/cdugo/Desktop/Projects/whop-messenger/app/channels/message_channel.rb:72: syntax error, unexpected ')', expecting `end' or dummy end
    )
    ^
]: <internal:/Users/cdugo/.rbenv/versions/3.2.2/lib/ruby/3.2.0/rubygems/core_ext/kernel_require.rb>:37:in `require' | <internal:/Users/cdugo/.rbenv/versions/3.2.2/lib/ruby/3.2.0/rubygems/core_ext/kernel_require.rb>:37:in `require' | /Users/cdugo/.rbenv/versions/3.2.2/lib/ruby/gems/3.2.0/gems/bootsnap-1.18.4/lib/bootsnap/load_path_cache/core_ext/kernel_require.rb:30:in `require' | /Users/cdugo/.rbenv/versions/3.2.2/lib/ruby/gems/3.2.0/gems/zeitwerk-2.7.1/lib/zeitwerk/core_ext/kernel.rb:26:in `require' | /Users/cdugo/.rbenv/versions/3.2.2/lib/ruby/gems/3.2.0/gems/activesupport-7.2.2/lib/active_support/inflector/methods.rb:290:in `const_get'
Could not execute command from ({"command"=>"subscribe", "identifier"=>"{\"channel\":\"MessageChannel\",\"server_id\":2}"}) [SyntaxError - /Users/cdugo/Desktop/Projects/whop-messenger/app/channels/message_channel.rb:71: syntax error, unexpected `if' modifier, expecting ')'
...sage.find(data['parent_id']) if data['parent_id'].present?
...                             ^~
/Users/cdugo/Desktop/Projects/whop-messenger/app/channels/message_channel.rb:72: syntax error, unexpected ')', expecting `end' or dummy end
    )
    ^
]: <internal:/Users/cdugo/.rbenv/versions/3.2.2/lib/ruby/3.2.0/rubygems/core_ext/kernel_require.rb>:37:in `require' | <internal:/Users/cdugo/.rbenv/versions/3.2.2/lib/ruby/3.2.0/rubygems/core_ext/kernel_require.rb>:37:in `require' | /Users/cdugo/.rbenv/versions/3.2.2/lib/ruby/gems/3.2.0/gems/bootsnap-1.18.4/lib/bootsnap/load_path_cache/core_ext/kernel_require.rb:30:in `require' | /Users/cdugo/.rbenv/versions/3.2.2/lib/ruby/gems/3.2.0/gems/zeitwerk-2.7.1/lib/zeitwerk/core_ext/kernel.rb:26:in `require' | /Users/cdugo/.rbenv/versions/3.2.2/lib/ruby/gems/3.2.0/gems/activesupport-7.2.2/lib/active_support/inflector/methods.rb:290:in `const_get'
Could not execute command from ({"command"=>"subscribe", "identifier"=>"{\"channel\":\"MessageChannel\",\"server_id\":2}"}) [SyntaxError - /Users/cdugo/Desktop/Projects/whop-messenger/app/channels/message_channel.rb:71: syntax error, unexpected `if' modifier, expecting ')'
...sage.find(data['parent_id']) if data['parent_id'].present?
...                             ^~
/Users/cdugo/Desktop/Projects/whop-messenger/app/channels/message_channel.rb:72: syntax error, unexpected ')', expecting `end' or dummy end
    )
    ^
]: <internal:/Users/cdugo/.rbenv/versions/3.2.2/lib/ruby/3.2.0/rubygems/core_ext/kernel_require.rb>:37:in `require' | <internal:/Users/cdugo/.rbenv/versions/3.2.2/lib/ruby/3.2.0/rubygems/core_ext/kernel_require.rb>:37:in `require' | /Users/cdugo/.rbenv/versions/3.2.2/lib/ruby/gems/3.2.0/gems/bootsnap-1.18.4/lib/bootsnap/load_path_cache/core_ext/kernel_require.rb:30:in `require' | /Users/cdugo/.rbenv/versions/3.2.2/lib/ruby/gems/3.2.0/gems/zeitwerk-2.7.1/lib/zeitwerk/core_ext/kernel.rb:26:in `require' | /Users/cdugo/.rbenv/versions/3.2.2/lib/ruby/gems/3.2.0/gems/activesupport-7.2.2/lib/active_support/inflector/methods.rb:290:in `const_get'
Could not execute command from ({"command"=>"subscribe", "identifier"=>"{\"channel\":\"MessageChannel\",\"server_id\":2}"}) [SyntaxError - /Users/cdugo/Desktop/Projects/whop-messenger/app/channels/message_channel.rb:71: syntax error, unexpected `if' modifier, expecting ')'
...sage.find(data['parent_id']) if data['parent_id'].present?
...                             ^~
/Users/cdugo/Desktop/Projects/whop-messenger/app/channels/message_channel.rb:72: syntax error, unexpected ')', expecting `end' or dummy end
    )
    ^
]: <internal:/Users/cdugo/.rbenv/versions/3.2.2/lib/ruby/3.2.0/rubygems/core_ext/kernel_require.rb>:37:in `require' | <internal:/Users/cdugo/.rbenv/versions/3.2.2/lib/ruby/3.2.0/rubygems/core_ext/kernel_require.rb>:37:in `require' | /Users/cdugo/.rbenv/versions/3.2.2/lib/ruby/gems/3.2.0/gems/bootsnap-1.18.4/lib/bootsnap/load_path_cache/core_ext/kernel_require.rb:30:in `require' | /Users/cdugo/.rbenv/versions/3.2.2/lib/ruby/gems/3.2.0/gems/zeitwerk-2.7.1/lib/zeitwerk/core_ext/kernel.rb:26:in `require' | /Users/cdugo/.rbenv/versions/3.2.2/lib/ruby/gems/3.2.0/gems/activesupport-7.2.2/lib/active_support/inflector/methods.rb:290:in `const_get'
Could not execute command from ({"command"=>"subscribe", "identifier"=>"{\"channel\":\"MessageChannel\",\"server_id\":2}"}) [SyntaxError - /Users/cdugo/Desktop/Projects/whop-messenger/app/channels/message_channel.rb:71: syntax error, unexpected `if' modifier, expecting ')'
...sage.find(data['parent_id']) if data['parent_id'].present?
...                             ^~
/Users/cdugo/Desktop/Projects/whop-messenger/app/channels/message_channel.rb:72: syntax error, unexpected ')', expecting `end' or dummy end
    )
    ^
]: <internal:/Users/cdugo/.rbenv/versions/3.2.2/lib/ruby/3.2.0/rubygems/core_ext/kernel_require.rb>:37:in `require' | <internal:/Users/cdugo/.rbenv/versions/3.2.2/lib/ruby/3.2.0/rubygems/core_ext/kernel_require.rb>:37:in `require' | /Users/cdugo/.rbenv/versions/3.2.2/lib/ruby/gems/3.2.0/gems/bootsnap-1.18.4/lib/bootsnap/load_path_cache/core_ext/kernel_require.rb:30:in `require' | /Users/cdugo/.rbenv/versions/3.2.2/lib/ruby/gems/3.2.0/gems/zeitwerk-2.7.1/lib/zeitwerk/core_ext/kernel.rb:26:in `require' | /Users/cdugo/.rbenv/versions/3.2.2/lib/ruby/gems/3.2.0/gems/activesupport-7.2.2/lib/active_support/inflector/methods.rb:290:in `const_get'
Could not execute command from ({"command"=>"subscribe", "identifier"=>"{\"channel\":\"MessageChannel\",\"server_id\":2}"}) [SyntaxError - /Users/cdugo/Desktop/Projects/whop-messenger/app/channels/message_channel.rb:71: syntax error, unexpected `if' modifier, expecting ')'
...sage.find(data['parent_id']) if data['parent_id'].present?
...                             ^~
/Users/cdugo/Desktop/Projects/whop-messenger/app/channels/message_channel.rb:72: syntax error, unexpected ')', expecting `end' or dummy end
    )
    ^
]: <internal:/Users/cdugo/.rbenv/versions/3.2.2/lib/ruby/3.2.0/rubygems/core_ext/kernel_require.rb>:37:in `require' | <internal:/Users/cdugo/.rbenv/versions/3.2.2/lib/ruby/3.2.0/rubygems/core_ext/kernel_require.rb>:37:in `require' | /Users/cdugo/.rbenv/versions/3.2.2/lib/ruby/gems/3.2.0/gems/bootsnap-1.18.4/lib/bootsnap/load_path_cache/core_ext/kernel_require.rb:30:in `require' | /Users/cdugo/.rbenv/versions/3.2.2/lib/ruby/gems/3.2.0/gems/zeitwerk-2.7.1/lib/zeitwerk/core_ext/kernel.rb:26:in `require' | /Users/cdugo/.rbenv/versions/3.2.2/lib/ruby/gems/3.2.0/gems/activesupport-7.2.2/lib/active_support/inflector/methods.rb:290:in `const_get'
Started GET "/servers/2" for ::1 at 2024-11-05 11:07:42 -0500
Started GET "/cable" for ::1 at 2024-11-05 11:07:42 -0500
  [1m[36mActiveRecord::SchemaMigration Load (1.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by ServersController#show as */*
Started GET "/cable" [WebSocket] for ::1 at 2024-11-05 11:07:42 -0500
  Parameters: {"id"=>"2"}
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:8:in `set_current_user'
  [1m[36mServer Load (0.6ms)[0m  [1m[34mSELECT "servers".* FROM "servers" WHERE "servers"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/servers_controller.rb:82:in `set_server'
  [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/channels/application_cable/connection.rb:12:in `find_verified_user'
Registered connection (Z2lkOi8vbWVzc2VuZ2VyL1VzZXIvMg)
  [1m[36mUser Exists? (2.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" INNER JOIN "server_members" ON "users"."id" = "server_members"."user_id" WHERE "server_members"."server_id" = $1 AND "users"."id" = $2 LIMIT $3[0m  [["server_id", 2], ["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/servers_controller.rb:99:in `is_member_of_server?'
  [1m[36mServer Load (0.5ms)[0m  [1m[34mSELECT "servers".* FROM "servers" WHERE "servers"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/channels/message_channel.rb:7:in `subscribed'
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" INNER JOIN "server_members" ON "users"."id" = "server_members"."user_id" WHERE "server_members"."server_id" = $1[0m  [["server_id", 2]]
  â†³ app/controllers/servers_controller.rb:15:in `show'
  [1m[36mUser Exists? (6.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" INNER JOIN "server_members" ON "users"."id" = "server_members"."user_id" WHERE "server_members"."server_id" = $1 AND "users"."id" = $2 LIMIT $3[0m  [["server_id", 2], ["id", 2], ["LIMIT", 1]]
  â†³ app/channels/message_channel.rb:8:in `subscribed'
MessageChannel transmitting {:type=>"confirm_subscription", :server_id=>2}
MessageChannel is streaming from server_2
MessageChannel is transmitting the subscription confirmation
  [1m[36mMessage Load (0.4ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."server_id" = $1[0m  [["server_id", 2]]
  â†³ app/controllers/servers_controller.rb:15:in `show'
Completed 200 OK in 75ms (Views: 8.0ms | ActiveRecord: 39.4ms (5 queries, 0 cached) | GC: 18.2ms)


MessageChannel#receive({"server_id"=>2, "content"=>"s", "parent_id"=>nil})
  [1m[36mServer Load (0.7ms)[0m  [1m[34mSELECT "servers".* FROM "servers" WHERE "servers"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/channels/message_channel.rb:45:in `receive'
  [1m[36mServerMember Load (0.5ms)[0m  [1m[34mSELECT "server_members".* FROM "server_members" WHERE "server_members"."server_id" = $1[0m  [["server_id", 2]]
  â†³ app/channels/message_channel.rb:45:in `receive'
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" IN ($1, $2)[0m  [["id", 2], ["id", 3]]
  â†³ app/channels/message_channel.rb:45:in `receive'
Could not execute command from ({"command"=>"message", "identifier"=>"{\"channel\":\"MessageChannel\",\"server_id\":2}", "data"=>"{\"action\":\"receive\",\"server_id\":2,\"content\":\"s\",\"parent_id\":null}"}) [NameError - uninitialized constant MessageChannel::OpenStruct]: /Users/cdugo/Desktop/Projects/whop-messenger/app/channels/message_channel.rb:62:in `rescue in receive' | /Users/cdugo/Desktop/Projects/whop-messenger/app/channels/message_channel.rb:39:in `receive' | /Users/cdugo/.rbenv/versions/3.2.2/lib/ruby/gems/3.2.0/gems/actioncable-7.2.2/lib/action_cable/channel/base.rb:285:in `public_send' | /Users/cdugo/.rbenv/versions/3.2.2/lib/ruby/gems/3.2.0/gems/actioncable-7.2.2/lib/action_cable/channel/base.rb:285:in `dispatch_action' | /Users/cdugo/.rbenv/versions/3.2.2/lib/ruby/gems/3.2.0/gems/actioncable-7.2.2/lib/action_cable/channel/base.rb:182:in `block in perform_action'
Started GET "/cable" for ::1 at 2024-11-05 11:08:14 -0500
Started GET "/servers/2" for ::1 at 2024-11-05 11:08:14 -0500
  [1m[36mActiveRecord::SchemaMigration Load (1.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by ServersController#show as */*
Started GET "/cable" [WebSocket] for ::1 at 2024-11-05 11:08:14 -0500
  Parameters: {"id"=>"2"}
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:8:in `set_current_user'
  [1m[36mServer Load (0.7ms)[0m  [1m[34mSELECT "servers".* FROM "servers" WHERE "servers"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/servers_controller.rb:82:in `set_server'
  [1m[36mUser Load (5.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/channels/application_cable/connection.rb:12:in `find_verified_user'
Registered connection (Z2lkOi8vbWVzc2VuZ2VyL1VzZXIvMg)
  [1m[36mUser Exists? (2.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" INNER JOIN "server_members" ON "users"."id" = "server_members"."user_id" WHERE "server_members"."server_id" = $1 AND "users"."id" = $2 LIMIT $3[0m  [["server_id", 2], ["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/servers_controller.rb:99:in `is_member_of_server?'
  [1m[36mServer Load (0.4ms)[0m  [1m[34mSELECT "servers".* FROM "servers" WHERE "servers"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/channels/message_channel.rb:7:in `subscribed'
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT "users".* FROM "users" INNER JOIN "server_members" ON "users"."id" = "server_members"."user_id" WHERE "server_members"."server_id" = $1[0m  [["server_id", 2]]
  â†³ app/controllers/servers_controller.rb:15:in `show'
  [1m[36mUser Exists? (5.8ms)[0m  [1m[34mSELECT 1 AS one FROM "users" INNER JOIN "server_members" ON "users"."id" = "server_members"."user_id" WHERE "server_members"."server_id" = $1 AND "users"."id" = $2 LIMIT $3[0m  [["server_id", 2], ["id", 2], ["LIMIT", 1]]
  â†³ app/channels/message_channel.rb:8:in `subscribed'
MessageChannel transmitting {:type=>"confirm_subscription", :server_id=>2}
MessageChannel is streaming from server_2
MessageChannel is transmitting the subscription confirmation
  [1m[36mMessage Load (0.8ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."server_id" = $1[0m  [["server_id", 2]]
  â†³ app/controllers/servers_controller.rb:15:in `show'
Completed 200 OK in 76ms (Views: 7.6ms | ActiveRecord: 40.5ms (5 queries, 0 cached) | GC: 17.7ms)


MessageChannel#receive({"server_id"=>2, "content"=>"s", "parent_id"=>nil})
  [1m[36mServer Load (0.6ms)[0m  [1m[34mSELECT "servers".* FROM "servers" WHERE "servers"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/channels/message_channel.rb:45:in `receive'
  [1m[36mServerMember Load (0.6ms)[0m  [1m[34mSELECT "server_members".* FROM "server_members" WHERE "server_members"."server_id" = $1[0m  [["server_id", 2]]
  â†³ app/channels/message_channel.rb:45:in `receive'
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" IN ($1, $2)[0m  [["id", 2], ["id", 3]]
  â†³ app/channels/message_channel.rb:45:in `receive'
Could not execute command from ({"command"=>"message", "identifier"=>"{\"channel\":\"MessageChannel\",\"server_id\":2}", "data"=>"{\"action\":\"receive\",\"server_id\":2,\"content\":\"s\",\"parent_id\":null}"}) [NameError - uninitialized constant MessageChannel::OpenStruct]: /Users/cdugo/Desktop/Projects/whop-messenger/app/channels/message_channel.rb:62:in `rescue in receive' | /Users/cdugo/Desktop/Projects/whop-messenger/app/channels/message_channel.rb:39:in `receive' | /Users/cdugo/.rbenv/versions/3.2.2/lib/ruby/gems/3.2.0/gems/actioncable-7.2.2/lib/action_cable/channel/base.rb:285:in `public_send' | /Users/cdugo/.rbenv/versions/3.2.2/lib/ruby/gems/3.2.0/gems/actioncable-7.2.2/lib/action_cable/channel/base.rb:285:in `dispatch_action' | /Users/cdugo/.rbenv/versions/3.2.2/lib/ruby/gems/3.2.0/gems/actioncable-7.2.2/lib/action_cable/channel/base.rb:182:in `block in perform_action'
Started GET "/servers/2" for ::1 at 2024-11-05 11:10:45 -0500
Started GET "/cable" for ::1 at 2024-11-05 11:10:45 -0500
  [1m[36mActiveRecord::SchemaMigration Load (0.8ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by ServersController#show as */*
  Parameters: {"id"=>"2"}
Started GET "/cable" [WebSocket] for ::1 at 2024-11-05 11:10:45 -0500
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:8:in `set_current_user'
  [1m[36mServer Load (0.3ms)[0m  [1m[34mSELECT "servers".* FROM "servers" WHERE "servers"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/servers_controller.rb:82:in `set_server'
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/channels/application_cable/connection.rb:12:in `find_verified_user'
Registered connection (Z2lkOi8vbWVzc2VuZ2VyL1VzZXIvMg)
  [1m[36mUser Exists? (1.5ms)[0m  [1m[34mSELECT 1 AS one FROM "users" INNER JOIN "server_members" ON "users"."id" = "server_members"."user_id" WHERE "server_members"."server_id" = $1 AND "users"."id" = $2 LIMIT $3[0m  [["server_id", 2], ["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/servers_controller.rb:99:in `is_member_of_server?'
  [1m[36mUser Load (1.1ms)[0m  [1m[34mSELECT "users".* FROM "users" INNER JOIN "server_members" ON "users"."id" = "server_members"."user_id" WHERE "server_members"."server_id" = $1[0m  [["server_id", 2]]
  â†³ app/controllers/servers_controller.rb:15:in `show'
  [1m[36mServer Load (4.6ms)[0m  [1m[34mSELECT "servers".* FROM "servers" WHERE "servers"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/channels/message_channel.rb:7:in `subscribed'
  [1m[36mUser Exists? (1.5ms)[0m  [1m[34mSELECT 1 AS one FROM "users" INNER JOIN "server_members" ON "users"."id" = "server_members"."user_id" WHERE "server_members"."server_id" = $1 AND "users"."id" = $2 LIMIT $3[0m  [["server_id", 2], ["id", 2], ["LIMIT", 1]]
  â†³ app/channels/message_channel.rb:8:in `subscribed'
MessageChannel transmitting {:type=>"confirm_subscription", :server_id=>2}
MessageChannel is streaming from server_2
  [1m[36mMessage Load (0.4ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."server_id" = $1[0m  [["server_id", 2]]
  â†³ app/controllers/servers_controller.rb:15:in `show'
MessageChannel is transmitting the subscription confirmation
Completed 200 OK in 93ms (Views: 13.5ms | ActiveRecord: 38.5ms (5 queries, 0 cached) | GC: 22.4ms)


MessageChannel#receive({"server_id"=>2, "content"=>"s", "parent_id"=>nil})
  [1m[36mServer Load (1.5ms)[0m  [1m[34mSELECT "servers".* FROM "servers" WHERE "servers"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/channels/message_channel.rb:45:in `receive'
  [1m[36mServerMember Load (0.2ms)[0m  [1m[34mSELECT "server_members".* FROM "server_members" WHERE "server_members"."server_id" = $1[0m  [["server_id", 2]]
  â†³ app/channels/message_channel.rb:45:in `receive'
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" IN ($1, $2)[0m  [["id", 2], ["id", 3]]
  â†³ app/channels/message_channel.rb:45:in `receive'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ app/channels/message_channel.rb:74:in `handle_create'
  [1m[36mMessage Create (22.7ms)[0m  [1m[32mINSERT INTO "messages" ("content", "user_id", "server_id", "parent_message_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["content", "s"], ["user_id", 2], ["server_id", 2], ["parent_message_id", nil], ["created_at", "2024-11-05 16:10:46.822138"], ["updated_at", "2024-11-05 16:10:46.822138"]]
  â†³ app/channels/message_channel.rb:74:in `handle_create'
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/channels/message_channel.rb:74:in `handle_create'
Could not execute command from ({"command"=>"message", "identifier"=>"{\"channel\":\"MessageChannel\",\"server_id\":2}", "data"=>"{\"action\":\"receive\",\"server_id\":2,\"content\":\"s\",\"parent_id\":null}"}) [NameError - uninitialized constant MessageChannel::OpenStruct]: /Users/cdugo/Desktop/Projects/whop-messenger/app/channels/message_channel.rb:62:in `rescue in receive' | /Users/cdugo/Desktop/Projects/whop-messenger/app/channels/message_channel.rb:39:in `receive' | /Users/cdugo/.rbenv/versions/3.2.2/lib/ruby/gems/3.2.0/gems/actioncable-7.2.2/lib/action_cable/channel/base.rb:285:in `public_send' | /Users/cdugo/.rbenv/versions/3.2.2/lib/ruby/gems/3.2.0/gems/actioncable-7.2.2/lib/action_cable/channel/base.rb:285:in `dispatch_action' | /Users/cdugo/.rbenv/versions/3.2.2/lib/ruby/gems/3.2.0/gems/actioncable-7.2.2/lib/action_cable/channel/base.rb:182:in `block in perform_action'
Started GET "/cable" for ::1 at 2024-11-05 11:11:12 -0500
Started GET "/servers/2" for ::1 at 2024-11-05 11:11:12 -0500
  [1m[36mActiveRecord::SchemaMigration Load (0.9ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by ServersController#show as */*
  Parameters: {"id"=>"2"}
Started GET "/cable" [WebSocket] for ::1 at 2024-11-05 11:11:12 -0500
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
  [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:8:in `set_current_user'
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/channels/application_cable/connection.rb:12:in `find_verified_user'
Registered connection (Z2lkOi8vbWVzc2VuZ2VyL1VzZXIvMg)
  [1m[36mServer Load (0.7ms)[0m  [1m[34mSELECT "servers".* FROM "servers" WHERE "servers"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/servers_controller.rb:82:in `set_server'
  [1m[36mServer Load (0.6ms)[0m  [1m[34mSELECT "servers".* FROM "servers" WHERE "servers"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/channels/message_channel.rb:7:in `subscribed'
  [1m[36mUser Exists? (1.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" INNER JOIN "server_members" ON "users"."id" = "server_members"."user_id" WHERE "server_members"."server_id" = $1 AND "users"."id" = $2 LIMIT $3[0m  [["server_id", 2], ["id", 2], ["LIMIT", 1]]
  [1m[36mUser Exists? (1.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" INNER JOIN "server_members" ON "users"."id" = "server_members"."user_id" WHERE "server_members"."server_id" = $1 AND "users"."id" = $2 LIMIT $3[0m  [["server_id", 2], ["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/servers_controller.rb:99:in `is_member_of_server?'
  â†³ app/channels/message_channel.rb:8:in `subscribed'
MessageChannel transmitting {:type=>"confirm_subscription", :server_id=>2}
MessageChannel is streaming from server_2
MessageChannel is transmitting the subscription confirmation
  [1m[36mUser Load (0.9ms)[0m  [1m[34mSELECT "users".* FROM "users" INNER JOIN "server_members" ON "users"."id" = "server_members"."user_id" WHERE "server_members"."server_id" = $1[0m  [["server_id", 2]]
  â†³ app/controllers/servers_controller.rb:15:in `show'
  [1m[36mMessage Load (0.6ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."server_id" = $1[0m  [["server_id", 2]]
  â†³ app/controllers/servers_controller.rb:15:in `show'
Completed 200 OK in 105ms (Views: 23.9ms | ActiveRecord: 34.7ms (5 queries, 0 cached) | GC: 21.2ms)


MessageChannel#receive({"server_id"=>2, "content"=>"hey", "parent_id"=>nil})
  [1m[36mServer Load (0.9ms)[0m  [1m[34mSELECT "servers".* FROM "servers" WHERE "servers"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/channels/message_channel.rb:45:in `receive'
  [1m[36mServerMember Load (0.2ms)[0m  [1m[34mSELECT "server_members".* FROM "server_members" WHERE "server_members"."server_id" = $1[0m  [["server_id", 2]]
  â†³ app/channels/message_channel.rb:45:in `receive'
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" IN ($1, $2)[0m  [["id", 2], ["id", 3]]
  â†³ app/channels/message_channel.rb:45:in `receive'
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mBEGIN[0m
  â†³ app/channels/message_channel.rb:74:in `handle_create'
  [1m[36mMessage Create (2.7ms)[0m  [1m[32mINSERT INTO "messages" ("content", "user_id", "server_id", "parent_message_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["content", "hey"], ["user_id", 2], ["server_id", 2], ["parent_message_id", nil], ["created_at", "2024-11-05 16:11:15.005057"], ["updated_at", "2024-11-05 16:11:15.005057"]]
  â†³ app/channels/message_channel.rb:74:in `handle_create'
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/channels/message_channel.rb:74:in `handle_create'
Could not execute command from ({"command"=>"message", "identifier"=>"{\"channel\":\"MessageChannel\",\"server_id\":2}", "data"=>"{\"action\":\"receive\",\"server_id\":2,\"content\":\"hey\",\"parent_id\":null}"}) [NameError - uninitialized constant MessageChannel::OpenStruct]: /Users/cdugo/Desktop/Projects/whop-messenger/app/channels/message_channel.rb:62:in `rescue in receive' | /Users/cdugo/Desktop/Projects/whop-messenger/app/channels/message_channel.rb:39:in `receive' | /Users/cdugo/.rbenv/versions/3.2.2/lib/ruby/gems/3.2.0/gems/actioncable-7.2.2/lib/action_cable/channel/base.rb:285:in `public_send' | /Users/cdugo/.rbenv/versions/3.2.2/lib/ruby/gems/3.2.0/gems/actioncable-7.2.2/lib/action_cable/channel/base.rb:285:in `dispatch_action' | /Users/cdugo/.rbenv/versions/3.2.2/lib/ruby/gems/3.2.0/gems/actioncable-7.2.2/lib/action_cable/channel/base.rb:182:in `block in perform_action'
Started GET "/servers/2" for ::1 at 2024-11-05 11:11:54 -0500
Started GET "/cable" for ::1 at 2024-11-05 11:11:54 -0500
  [1m[36mActiveRecord::SchemaMigration Load (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by ServersController#show as */*
Started GET "/cable" [WebSocket] for ::1 at 2024-11-05 11:11:55 -0500
  Parameters: {"id"=>"2"}
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:8:in `set_current_user'
  [1m[36mServer Load (0.6ms)[0m  [1m[34mSELECT "servers".* FROM "servers" WHERE "servers"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/servers_controller.rb:82:in `set_server'
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/channels/application_cable/connection.rb:12:in `find_verified_user'
Registered connection (Z2lkOi8vbWVzc2VuZ2VyL1VzZXIvMg)
  [1m[36mUser Exists? (2.6ms)[0m  [1m[34mSELECT 1 AS one FROM "users" INNER JOIN "server_members" ON "users"."id" = "server_members"."user_id" WHERE "server_members"."server_id" = $1 AND "users"."id" = $2 LIMIT $3[0m  [["server_id", 2], ["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/servers_controller.rb:99:in `is_member_of_server?'
  [1m[36mServer Load (0.3ms)[0m  [1m[34mSELECT "servers".* FROM "servers" WHERE "servers"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" INNER JOIN "server_members" ON "users"."id" = "server_members"."user_id" WHERE "server_members"."server_id" = $1[0m  [["server_id", 2]]
  â†³ app/channels/message_channel.rb:7:in `subscribed'
  â†³ app/controllers/servers_controller.rb:15:in `show'
  [1m[36mUser Exists? (1.0ms)[0m  [1m[34mSELECT 1 AS one FROM "users" INNER JOIN "server_members" ON "users"."id" = "server_members"."user_id" WHERE "server_members"."server_id" = $1 AND "users"."id" = $2 LIMIT $3[0m  [["server_id", 2], ["id", 2], ["LIMIT", 1]]
  â†³ app/channels/message_channel.rb:8:in `subscribed'
MessageChannel transmitting {:type=>"confirm_subscription", :server_id=>2}
MessageChannel is streaming from server_2
MessageChannel is transmitting the subscription confirmation
  [1m[36mMessage Load (0.5ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."server_id" = $1[0m  [["server_id", 2]]
  â†³ app/controllers/servers_controller.rb:15:in `show'
Completed 200 OK in 74ms (Views: 19.0ms | ActiveRecord: 27.4ms (5 queries, 0 cached) | GC: 17.7ms)


MessageChannel#receive({"server_id"=>2, "content"=>"sup", "parent_id"=>nil})
  [1m[36mServer Load (1.0ms)[0m  [1m[34mSELECT "servers".* FROM "servers" WHERE "servers"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/channels/message_channel.rb:45:in `receive'
  [1m[36mServerMember Load (0.2ms)[0m  [1m[34mSELECT "server_members".* FROM "server_members" WHERE "server_members"."server_id" = $1[0m  [["server_id", 2]]
  â†³ app/channels/message_channel.rb:45:in `receive'
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" IN ($1, $2)[0m  [["id", 2], ["id", 3]]
  â†³ app/channels/message_channel.rb:45:in `receive'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ app/channels/message_channel.rb:74:in `handle_create'
  [1m[36mMessage Create (2.0ms)[0m  [1m[32mINSERT INTO "messages" ("content", "user_id", "server_id", "parent_message_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["content", "sup"], ["user_id", 2], ["server_id", 2], ["parent_message_id", nil], ["created_at", "2024-11-05 16:11:58.532319"], ["updated_at", "2024-11-05 16:11:58.532319"]]
  â†³ app/channels/message_channel.rb:74:in `handle_create'
  [1m[36mTRANSACTION (1.1ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/channels/message_channel.rb:74:in `handle_create'
[ActionCable] Broadcasting to server_2: {:type=>"message", :id=>3, :content=>"sup", :user_id=>2, :server_id=>2, :parent_message_id=>nil, :created_at=>Tue, 05 Nov 2024 16:11:58.532319000 UTC +00:00, :user=>{:id=>2, :username=>"user2"}}
MessageChannel transmitting {"type"=>"message", "id"=>3, "content"=>"sup", "user_id"=>2, "server_id"=>2, "parent_message_id"=>nil, "created_at"=>"2024-11-05T16:11:58.532Z", "user"=>{"id"=>2, "username"=>"user2"}} (via streamed from server_2)
Started GET "/servers/2" for ::1 at 2024-11-05 11:12:48 -0500
Started GET "/cable" for ::1 at 2024-11-05 11:12:48 -0500
Processing by ServersController#show as */*
  Parameters: {"id"=>"2"}
  [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:8:in `set_current_user'
  [1m[36mServer Load (0.2ms)[0m  [1m[34mSELECT "servers".* FROM "servers" WHERE "servers"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/servers_controller.rb:82:in `set_server'
  [1m[36mUser Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" INNER JOIN "server_members" ON "users"."id" = "server_members"."user_id" WHERE "server_members"."server_id" = $1 AND "users"."id" = $2 LIMIT $3[0m  [["server_id", 2], ["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/servers_controller.rb:99:in `is_member_of_server?'
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" INNER JOIN "server_members" ON "users"."id" = "server_members"."user_id" WHERE "server_members"."server_id" = $1[0m  [["server_id", 2]]
  â†³ app/controllers/servers_controller.rb:15:in `show'
  [1m[36mMessage Load (0.2ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."server_id" = $1[0m  [["server_id", 2]]
  â†³ app/controllers/servers_controller.rb:15:in `show'
Completed 200 OK in 9ms (Views: 2.5ms | ActiveRecord: 1.7ms (5 queries, 0 cached) | GC: 0.9ms)


Started GET "/cable" [WebSocket] for ::1 at 2024-11-05 11:12:48 -0500
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/channels/application_cable/connection.rb:12:in `find_verified_user'
Registered connection (Z2lkOi8vbWVzc2VuZ2VyL1VzZXIvMw)
  [1m[36mServer Load (0.2ms)[0m  [1m[34mSELECT "servers".* FROM "servers" WHERE "servers"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/channels/message_channel.rb:7:in `subscribed'
  [1m[36mUser Exists? (0.6ms)[0m  [1m[34mSELECT 1 AS one FROM "users" INNER JOIN "server_members" ON "users"."id" = "server_members"."user_id" WHERE "server_members"."server_id" = $1 AND "users"."id" = $2 LIMIT $3[0m  [["server_id", 2], ["id", 3], ["LIMIT", 1]]
  â†³ app/channels/message_channel.rb:8:in `subscribed'
MessageChannel transmitting {:type=>"confirm_subscription", :server_id=>2}
MessageChannel is transmitting the subscription confirmation
MessageChannel is streaming from server_2
MessageChannel#receive({"server_id"=>2, "content"=>"hu", "parent_id"=>nil})
  [1m[36mServer Load (0.7ms)[0m  [1m[34mSELECT "servers".* FROM "servers" WHERE "servers"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/channels/message_channel.rb:45:in `receive'
  [1m[36mServerMember Load (0.4ms)[0m  [1m[34mSELECT "server_members".* FROM "server_members" WHERE "server_members"."server_id" = $1[0m  [["server_id", 2]]
  â†³ app/channels/message_channel.rb:45:in `receive'
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" IN ($1, $2)[0m  [["id", 2], ["id", 3]]
  â†³ app/channels/message_channel.rb:45:in `receive'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ app/channels/message_channel.rb:74:in `handle_create'
  [1m[36mMessage Create (2.8ms)[0m  [1m[32mINSERT INTO "messages" ("content", "user_id", "server_id", "parent_message_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["content", "hu"], ["user_id", 3], ["server_id", 2], ["parent_message_id", nil], ["created_at", "2024-11-05 16:12:55.836024"], ["updated_at", "2024-11-05 16:12:55.836024"]]
  â†³ app/channels/message_channel.rb:74:in `handle_create'
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/channels/message_channel.rb:74:in `handle_create'
[ActionCable] Broadcasting to server_2: {:type=>"message", :id=>4, :content=>"hu", :user_id=>3, :server_id=>2, :parent_message_id=>nil, :created_at=>Tue, 05 Nov 2024 16:12:55.836024000 UTC +00:00, :user=>{:id=>3, :username=>"user3"}}
MessageChannel transmitting {"type"=>"message", "id"=>4, "content"=>"hu", "user_id"=>3, "server_id"=>2, "parent_message_id"=>nil, "created_at"=>"2024-11-05T16:12:55.836Z", "user"=>{"id"=>3, "username"=>"user3"}} (via streamed from server_2)
MessageChannel transmitting {"type"=>"message", "id"=>4, "content"=>"hu", "user_id"=>3, "server_id"=>2, "parent_message_id"=>nil, "created_at"=>"2024-11-05T16:12:55.836Z", "user"=>{"id"=>3, "username"=>"user3"}} (via streamed from server_2)
Finished "/cable" [WebSocket] for ::1 at 2024-11-05 11:12:59 -0500
MessageChannel stopped streaming from server_2
Started GET "/cable" for ::1 at 2024-11-05 11:12:59 -0500
Started GET "/servers/2" for ::1 at 2024-11-05 11:12:59 -0500
Processing by ServersController#show as */*
  Parameters: {"id"=>"2"}
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:8:in `set_current_user'
  [1m[36mServer Load (0.8ms)[0m  [1m[34mSELECT "servers".* FROM "servers" WHERE "servers"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/servers_controller.rb:82:in `set_server'
  [1m[36mUser Exists? (0.6ms)[0m  [1m[34mSELECT 1 AS one FROM "users" INNER JOIN "server_members" ON "users"."id" = "server_members"."user_id" WHERE "server_members"."server_id" = $1 AND "users"."id" = $2 LIMIT $3[0m  [["server_id", 2], ["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/servers_controller.rb:99:in `is_member_of_server?'
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT "users".* FROM "users" INNER JOIN "server_members" ON "users"."id" = "server_members"."user_id" WHERE "server_members"."server_id" = $1[0m  [["server_id", 2]]
  â†³ app/controllers/servers_controller.rb:15:in `show'
  [1m[36mMessage Load (0.5ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."server_id" = $1[0m  [["server_id", 2]]
  â†³ app/controllers/servers_controller.rb:15:in `show'
Completed 200 OK in 17ms (Views: 4.9ms | ActiveRecord: 3.1ms (5 queries, 0 cached) | GC: 0.0ms)


Started GET "/cable" [WebSocket] for ::1 at 2024-11-05 11:13:00 -0500
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/channels/application_cable/connection.rb:12:in `find_verified_user'
Registered connection (Z2lkOi8vbWVzc2VuZ2VyL1VzZXIvMg)
  [1m[36mServer Load (1.8ms)[0m  [1m[34mSELECT "servers".* FROM "servers" WHERE "servers"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/channels/message_channel.rb:7:in `subscribed'
  [1m[36mUser Exists? (0.6ms)[0m  [1m[34mSELECT 1 AS one FROM "users" INNER JOIN "server_members" ON "users"."id" = "server_members"."user_id" WHERE "server_members"."server_id" = $1 AND "users"."id" = $2 LIMIT $3[0m  [["server_id", 2], ["id", 2], ["LIMIT", 1]]
  â†³ app/channels/message_channel.rb:8:in `subscribed'
MessageChannel transmitting {:type=>"confirm_subscription", :server_id=>2}
MessageChannel is streaming from server_2
MessageChannel is transmitting the subscription confirmation
Finished "/cable" [WebSocket] for ::1 at 2024-11-05 11:14:54 -0500
MessageChannel stopped streaming from server_2
Started GET "/servers/2" for ::1 at 2024-11-05 11:14:55 -0500
Started GET "/cable" for ::1 at 2024-11-05 11:14:55 -0500
Processing by ServersController#show as */*
  Parameters: {"id"=>"2"}
  [1m[36mUser Load (1.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:8:in `set_current_user'
  [1m[36mServer Load (13.1ms)[0m  [1m[34mSELECT "servers".* FROM "servers" WHERE "servers"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/servers_controller.rb:82:in `set_server'
  [1m[36mUser Exists? (1.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" INNER JOIN "server_members" ON "users"."id" = "server_members"."user_id" WHERE "server_members"."server_id" = $1 AND "users"."id" = $2 LIMIT $3[0m  [["server_id", 2], ["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/servers_controller.rb:99:in `is_member_of_server?'
  [1m[36mUser Load (2.6ms)[0m  [1m[34mSELECT "users".* FROM "users" INNER JOIN "server_members" ON "users"."id" = "server_members"."user_id" WHERE "server_members"."server_id" = $1[0m  [["server_id", 2]]
  â†³ app/controllers/servers_controller.rb:15:in `show'
  [1m[36mMessage Load (0.4ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."server_id" = $1[0m  [["server_id", 2]]
  â†³ app/controllers/servers_controller.rb:15:in `show'
Completed 200 OK in 46ms (Views: 8.3ms | ActiveRecord: 18.7ms (5 queries, 0 cached) | GC: 0.0ms)


Started GET "/cable" [WebSocket] for ::1 at 2024-11-05 11:14:56 -0500
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/channels/application_cable/connection.rb:12:in `find_verified_user'
Registered connection (Z2lkOi8vbWVzc2VuZ2VyL1VzZXIvMg)
  [1m[36mServer Load (0.7ms)[0m  [1m[34mSELECT "servers".* FROM "servers" WHERE "servers"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/channels/message_channel.rb:7:in `subscribed'
  [1m[36mUser Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM "users" INNER JOIN "server_members" ON "users"."id" = "server_members"."user_id" WHERE "server_members"."server_id" = $1 AND "users"."id" = $2 LIMIT $3[0m  [["server_id", 2], ["id", 2], ["LIMIT", 1]]
  â†³ app/channels/message_channel.rb:8:in `subscribed'
MessageChannel transmitting {:type=>"confirm_subscription", :server_id=>2}
MessageChannel is streaming from server_2
MessageChannel is transmitting the subscription confirmation
MessageChannel#receive({"server_id"=>2, "content"=>"hey", "parent_id"=>nil})
  [1m[36mServer Load (0.6ms)[0m  [1m[34mSELECT "servers".* FROM "servers" WHERE "servers"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/channels/message_channel.rb:45:in `receive'
  [1m[36mServerMember Load (0.6ms)[0m  [1m[34mSELECT "server_members".* FROM "server_members" WHERE "server_members"."server_id" = $1[0m  [["server_id", 2]]
  â†³ app/channels/message_channel.rb:45:in `receive'
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" IN ($1, $2)[0m  [["id", 2], ["id", 3]]
  â†³ app/channels/message_channel.rb:45:in `receive'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/channels/message_channel.rb:74:in `handle_create'
  [1m[36mMessage Create (3.0ms)[0m  [1m[32mINSERT INTO "messages" ("content", "user_id", "server_id", "parent_message_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["content", "hey"], ["user_id", 2], ["server_id", 2], ["parent_message_id", nil], ["created_at", "2024-11-05 16:14:57.912005"], ["updated_at", "2024-11-05 16:14:57.912005"]]
  â†³ app/channels/message_channel.rb:74:in `handle_create'
  [1m[36mTRANSACTION (1.5ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/channels/message_channel.rb:74:in `handle_create'
[ActionCable] Broadcasting to server_2: {:type=>"message", :id=>5, :content=>"hey", :user_id=>2, :server_id=>2, :parent_message_id=>nil, :created_at=>Tue, 05 Nov 2024 16:14:57.912005000 UTC +00:00, :user=>{:id=>2, :username=>"user2"}}
MessageChannel transmitting {"type"=>"message", "id"=>5, "content"=>"hey", "user_id"=>2, "server_id"=>2, "parent_message_id"=>nil, "created_at"=>"2024-11-05T16:14:57.912Z", "user"=>{"id"=>2, "username"=>"user2"}} (via streamed from server_2)
MessageChannel transmitting {"type"=>"message", "id"=>5, "content"=>"hey", "user_id"=>2, "server_id"=>2, "parent_message_id"=>nil, "created_at"=>"2024-11-05T16:14:57.912Z", "user"=>{"id"=>2, "username"=>"user2"}} (via streamed from server_2)
Finished "/cable" [WebSocket] for ::1 at 2024-11-05 11:17:44 -0500
MessageChannel stopped streaming from server_2
Started GET "/servers/2" for ::1 at 2024-11-05 11:17:45 -0500
Started GET "/cable" for ::1 at 2024-11-05 11:17:45 -0500
Processing by ServersController#show as */*
  Parameters: {"id"=>"2"}
  [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:8:in `set_current_user'
  [1m[36mServer Load (0.8ms)[0m  [1m[34mSELECT "servers".* FROM "servers" WHERE "servers"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/servers_controller.rb:82:in `set_server'
  [1m[36mUser Exists? (2.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" INNER JOIN "server_members" ON "users"."id" = "server_members"."user_id" WHERE "server_members"."server_id" = $1 AND "users"."id" = $2 LIMIT $3[0m  [["server_id", 2], ["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/servers_controller.rb:99:in `is_member_of_server?'
Started GET "/cable" [WebSocket] for ::1 at 2024-11-05 11:17:45 -0500
  [1m[36mUser Load (2.9ms)[0m  [1m[34mSELECT "users".* FROM "users" INNER JOIN "server_members" ON "users"."id" = "server_members"."user_id" WHERE "server_members"."server_id" = $1[0m  [["server_id", 2]]
  â†³ app/controllers/servers_controller.rb:15:in `show'
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
  [1m[36mMessage Load (1.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."server_id" = $1[0m  [["server_id", 2]]
  â†³ app/controllers/servers_controller.rb:15:in `show'
Completed 200 OK in 68ms (Views: 9.5ms | ActiveRecord: 7.8ms (5 queries, 0 cached) | GC: 0.0ms)


  [1m[36mUser Load (3.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/channels/application_cable/connection.rb:12:in `find_verified_user'
Registered connection (Z2lkOi8vbWVzc2VuZ2VyL1VzZXIvMg)
  [1m[36mServer Load (0.7ms)[0m  [1m[34mSELECT "servers".* FROM "servers" WHERE "servers"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/channels/message_channel.rb:7:in `subscribed'
  [1m[36mUser Exists? (1.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" INNER JOIN "server_members" ON "users"."id" = "server_members"."user_id" WHERE "server_members"."server_id" = $1 AND "users"."id" = $2 LIMIT $3[0m  [["server_id", 2], ["id", 2], ["LIMIT", 1]]
  â†³ app/channels/message_channel.rb:8:in `subscribed'
MessageChannel transmitting {:type=>"confirm_subscription", :server_id=>2}
MessageChannel is transmitting the subscription confirmation
MessageChannel is streaming from server_2
Finished "/cable" [WebSocket] for ::1 at 2024-11-05 11:17:51 -0500
MessageChannel stopped streaming from server_2
Started GET "/servers/2" for ::1 at 2024-11-05 11:17:51 -0500
Started GET "/cable" for ::1 at 2024-11-05 11:17:51 -0500
Processing by ServersController#show as */*
  Parameters: {"id"=>"2"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:8:in `set_current_user'
Started GET "/cable" [WebSocket] for ::1 at 2024-11-05 11:17:51 -0500
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
  [1m[36mServer Load (19.9ms)[0m  [1m[34mSELECT "servers".* FROM "servers" WHERE "servers"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/servers_controller.rb:82:in `set_server'
  [1m[36mUser Load (1.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/channels/application_cable/connection.rb:12:in `find_verified_user'
  [1m[36mUser Exists? (1.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" INNER JOIN "server_members" ON "users"."id" = "server_members"."user_id" WHERE "server_members"."server_id" = $1 AND "users"."id" = $2 LIMIT $3[0m  [["server_id", 2], ["id", 3], ["LIMIT", 1]]
Registered connection (Z2lkOi8vbWVzc2VuZ2VyL1VzZXIvMw)
  â†³ app/controllers/servers_controller.rb:99:in `is_member_of_server?'
  [1m[36mUser Load (1.1ms)[0m  [1m[34mSELECT "users".* FROM "users" INNER JOIN "server_members" ON "users"."id" = "server_members"."user_id" WHERE "server_members"."server_id" = $1[0m  [["server_id", 2]]
  â†³ app/controllers/servers_controller.rb:15:in `show'
  [1m[36mServer Load (1.1ms)[0m  [1m[34mSELECT "servers".* FROM "servers" WHERE "servers"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/channels/message_channel.rb:7:in `subscribed'
  [1m[36mMessage Load (1.4ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."server_id" = $1[0m  [["server_id", 2]]
  â†³ app/controllers/servers_controller.rb:15:in `show'
  [1m[36mUser Exists? (0.9ms)[0m  [1m[34mSELECT 1 AS one FROM "users" INNER JOIN "server_members" ON "users"."id" = "server_members"."user_id" WHERE "server_members"."server_id" = $1 AND "users"."id" = $2 LIMIT $3[0m  [["server_id", 2], ["id", 3], ["LIMIT", 1]]
Completed 200 OK in 40ms (Views: 5.8ms | ActiveRecord: 24.1ms (5 queries, 0 cached) | GC: 0.0ms)


  â†³ app/channels/message_channel.rb:8:in `subscribed'
MessageChannel transmitting {:type=>"confirm_subscription", :server_id=>2}
MessageChannel is transmitting the subscription confirmation
MessageChannel is streaming from server_2
MessageChannel#receive({"server_id"=>2, "content"=>"hi", "parent_id"=>nil})
  [1m[36mServer Load (1.0ms)[0m  [1m[34mSELECT "servers".* FROM "servers" WHERE "servers"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/channels/message_channel.rb:45:in `receive'
  [1m[36mServerMember Load (0.5ms)[0m  [1m[34mSELECT "server_members".* FROM "server_members" WHERE "server_members"."server_id" = $1[0m  [["server_id", 2]]
  â†³ app/channels/message_channel.rb:45:in `receive'
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" IN ($1, $2)[0m  [["id", 2], ["id", 3]]
  â†³ app/channels/message_channel.rb:45:in `receive'
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mBEGIN[0m
  â†³ app/channels/message_channel.rb:74:in `handle_create'
  [1m[36mMessage Create (3.2ms)[0m  [1m[32mINSERT INTO "messages" ("content", "user_id", "server_id", "parent_message_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["content", "hi"], ["user_id", 3], ["server_id", 2], ["parent_message_id", nil], ["created_at", "2024-11-05 16:17:53.820598"], ["updated_at", "2024-11-05 16:17:53.820598"]]
  â†³ app/channels/message_channel.rb:74:in `handle_create'
  [1m[36mTRANSACTION (1.0ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/channels/message_channel.rb:74:in `handle_create'
[ActionCable] Broadcasting to server_2: {:type=>"message", :id=>6, :content=>"hi", :user_id=>3, :server_id=>2, :parent_message_id=>nil, :created_at=>Tue, 05 Nov 2024 16:17:53.820598000 UTC +00:00, :user=>{:id=>3, :username=>"user3"}}
MessageChannel transmitting {"type"=>"message", "id"=>6, "content"=>"hi", "user_id"=>3, "server_id"=>2, "parent_message_id"=>nil, "created_at"=>"2024-11-05T16:17:53.820Z", "user"=>{"id"=>3, "username"=>"user3"}} (via streamed from server_2)
MessageChannel transmitting {"type"=>"message", "id"=>6, "content"=>"hi", "user_id"=>3, "server_id"=>2, "parent_message_id"=>nil, "created_at"=>"2024-11-05T16:17:53.820Z", "user"=>{"id"=>3, "username"=>"user3"}} (via streamed from server_2)
Finished "/cable" [WebSocket] for ::1 at 2024-11-05 11:18:29 -0500
MessageChannel stopped streaming from server_2
Started GET "/servers/2" for ::1 at 2024-11-05 11:18:30 -0500
Started GET "/cable" for ::1 at 2024-11-05 11:18:30 -0500
Started GET "/cable" [WebSocket] for ::1 at 2024-11-05 11:18:31 -0500
Processing by ServersController#show as */*
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
  Parameters: {"id"=>"2"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:8:in `set_current_user'
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/channels/application_cable/connection.rb:12:in `find_verified_user'
Registered connection (Z2lkOi8vbWVzc2VuZ2VyL1VzZXIvMg)
  [1m[36mServer Load (0.3ms)[0m  [1m[34mSELECT "servers".* FROM "servers" WHERE "servers"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/servers_controller.rb:82:in `set_server'
  [1m[36mServer Load (0.3ms)[0m  [1m[34mSELECT "servers".* FROM "servers" WHERE "servers"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mUser Exists? (1.5ms)[0m  [1m[34mSELECT 1 AS one FROM "users" INNER JOIN "server_members" ON "users"."id" = "server_members"."user_id" WHERE "server_members"."server_id" = $1 AND "users"."id" = $2 LIMIT $3[0m  [["server_id", 2], ["id", 2], ["LIMIT", 1]]
  â†³ app/channels/message_channel.rb:7:in `subscribed'
  â†³ app/controllers/servers_controller.rb:99:in `is_member_of_server?'
  [1m[36mUser Exists? (1.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" INNER JOIN "server_members" ON "users"."id" = "server_members"."user_id" WHERE "server_members"."server_id" = $1 AND "users"."id" = $2 LIMIT $3[0m  [["server_id", 2], ["id", 2], ["LIMIT", 1]]
  â†³ app/channels/message_channel.rb:8:in `subscribed'
MessageChannel transmitting {:type=>"confirm_subscription", :server_id=>2}
MessageChannel is streaming from server_2
  [1m[36mUser Load (0.9ms)[0m  [1m[34mSELECT "users".* FROM "users" INNER JOIN "server_members" ON "users"."id" = "server_members"."user_id" WHERE "server_members"."server_id" = $1[0m  [["server_id", 2]]
MessageChannel is transmitting the subscription confirmation
  â†³ app/controllers/servers_controller.rb:15:in `show'
  [1m[36mMessage Load (0.4ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."server_id" = $1[0m  [["server_id", 2]]
  â†³ app/controllers/servers_controller.rb:15:in `show'
Completed 200 OK in 25ms (Views: 7.3ms | ActiveRecord: 3.5ms (5 queries, 0 cached) | GC: 2.2ms)


Finished "/cable" [WebSocket] for ::1 at 2024-11-05 11:18:34 -0500
MessageChannel stopped streaming from server_2
Started GET "/servers/2" for ::1 at 2024-11-05 11:18:35 -0500
Started GET "/cable" for ::1 at 2024-11-05 11:18:35 -0500
Processing by ServersController#show as */*
  Parameters: {"id"=>"2"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:8:in `set_current_user'
  [1m[36mServer Load (0.5ms)[0m  [1m[34mSELECT "servers".* FROM "servers" WHERE "servers"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/servers_controller.rb:82:in `set_server'
Started GET "/cable" [WebSocket] for ::1 at 2024-11-05 11:18:35 -0500
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
  [1m[36mUser Exists? (3.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" INNER JOIN "server_members" ON "users"."id" = "server_members"."user_id" WHERE "server_members"."server_id" = $1 AND "users"."id" = $2 LIMIT $3[0m  [["server_id", 2], ["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/servers_controller.rb:99:in `is_member_of_server?'
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/channels/application_cable/connection.rb:12:in `find_verified_user'
Registered connection (Z2lkOi8vbWVzc2VuZ2VyL1VzZXIvMw)
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT "users".* FROM "users" INNER JOIN "server_members" ON "users"."id" = "server_members"."user_id" WHERE "server_members"."server_id" = $1[0m  [["server_id", 2]]
  â†³ app/controllers/servers_controller.rb:15:in `show'
  [1m[36mMessage Load (0.1ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."server_id" = $1[0m  [["server_id", 2]]
  â†³ app/controllers/servers_controller.rb:15:in `show'
  [1m[36mServer Load (0.3ms)[0m  [1m[34mSELECT "servers".* FROM "servers" WHERE "servers"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
Completed 200 OK in 22ms (Views: 2.4ms | ActiveRecord: 4.7ms (5 queries, 0 cached) | GC: 0.2ms)


  â†³ app/channels/message_channel.rb:7:in `subscribed'
  [1m[36mUser Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" INNER JOIN "server_members" ON "users"."id" = "server_members"."user_id" WHERE "server_members"."server_id" = $1 AND "users"."id" = $2 LIMIT $3[0m  [["server_id", 2], ["id", 3], ["LIMIT", 1]]
  â†³ app/channels/message_channel.rb:8:in `subscribed'
MessageChannel transmitting {:type=>"confirm_subscription", :server_id=>2}
MessageChannel is transmitting the subscription confirmation
MessageChannel is streaming from server_2
MessageChannel#receive({"server_id"=>2, "content"=>"hey", "parent_id"=>nil})
  [1m[36mServer Load (0.7ms)[0m  [1m[34mSELECT "servers".* FROM "servers" WHERE "servers"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/channels/message_channel.rb:45:in `receive'
  [1m[36mServerMember Load (1.1ms)[0m  [1m[34mSELECT "server_members".* FROM "server_members" WHERE "server_members"."server_id" = $1[0m  [["server_id", 2]]
  â†³ app/channels/message_channel.rb:45:in `receive'
  [1m[36mUser Load (1.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" IN ($1, $2)[0m  [["id", 2], ["id", 3]]
  â†³ app/channels/message_channel.rb:45:in `receive'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ app/channels/message_channel.rb:74:in `handle_create'
  [1m[36mMessage Create (2.9ms)[0m  [1m[32mINSERT INTO "messages" ("content", "user_id", "server_id", "parent_message_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["content", "hey"], ["user_id", 3], ["server_id", 2], ["parent_message_id", nil], ["created_at", "2024-11-05 16:18:36.975798"], ["updated_at", "2024-11-05 16:18:36.975798"]]
  â†³ app/channels/message_channel.rb:74:in `handle_create'
  [1m[36mTRANSACTION (1.3ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/channels/message_channel.rb:74:in `handle_create'
[ActionCable] Broadcasting to server_2: {:type=>"message", :id=>7, :content=>"hey", :user_id=>3, :server_id=>2, :parent_message_id=>nil, :created_at=>Tue, 05 Nov 2024 16:18:36.975798000 UTC +00:00, :user=>{:id=>3, :username=>"user3"}}
MessageChannel transmitting {"type"=>"message", "id"=>7, "content"=>"hey", "user_id"=>3, "server_id"=>2, "parent_message_id"=>nil, "created_at"=>"2024-11-05T16:18:36.975Z", "user"=>{"id"=>3, "username"=>"user3"}} (via streamed from server_2)
MessageChannel transmitting {"type"=>"message", "id"=>7, "content"=>"hey", "user_id"=>3, "server_id"=>2, "parent_message_id"=>nil, "created_at"=>"2024-11-05T16:18:36.975Z", "user"=>{"id"=>3, "username"=>"user3"}} (via streamed from server_2)
Finished "/cable" [WebSocket] for ::1 at 2024-11-05 11:19:10 -0500
MessageChannel stopped streaming from server_2
Started GET "/servers/2" for ::1 at 2024-11-05 11:19:10 -0500
Started GET "/cable" for ::1 at 2024-11-05 11:19:10 -0500
Processing by ServersController#show as */*
  Parameters: {"id"=>"2"}
  [1m[36mUser Load (1.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:8:in `set_current_user'
  [1m[36mServer Load (0.2ms)[0m  [1m[34mSELECT "servers".* FROM "servers" WHERE "servers"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/servers_controller.rb:82:in `set_server'
Started GET "/cable" [WebSocket] for ::1 at 2024-11-05 11:19:10 -0500
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
  [1m[36mUser Exists? (0.6ms)[0m  [1m[34mSELECT 1 AS one FROM "users" INNER JOIN "server_members" ON "users"."id" = "server_members"."user_id" WHERE "server_members"."server_id" = $1 AND "users"."id" = $2 LIMIT $3[0m  [["server_id", 2], ["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/servers_controller.rb:99:in `is_member_of_server?'
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/channels/application_cable/connection.rb:12:in `find_verified_user'
Registered connection (Z2lkOi8vbWVzc2VuZ2VyL1VzZXIvMw)
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" INNER JOIN "server_members" ON "users"."id" = "server_members"."user_id" WHERE "server_members"."server_id" = $1[0m  [["server_id", 2]]
  â†³ app/controllers/servers_controller.rb:15:in `show'
  [1m[36mMessage Load (0.4ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."server_id" = $1[0m  [["server_id", 2]]
  â†³ app/controllers/servers_controller.rb:15:in `show'
  [1m[36mServer Load (0.5ms)[0m  [1m[34mSELECT "servers".* FROM "servers" WHERE "servers"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
Completed 200 OK in 22ms (Views: 2.7ms | ActiveRecord: 2.6ms (5 queries, 0 cached) | GC: 0.6ms)


  â†³ app/channels/message_channel.rb:7:in `subscribed'
  [1m[36mUser Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" INNER JOIN "server_members" ON "users"."id" = "server_members"."user_id" WHERE "server_members"."server_id" = $1 AND "users"."id" = $2 LIMIT $3[0m  [["server_id", 2], ["id", 3], ["LIMIT", 1]]
  â†³ app/channels/message_channel.rb:8:in `subscribed'
MessageChannel transmitting {:type=>"confirm_subscription", :server_id=>2}
MessageChannel is transmitting the subscription confirmation
MessageChannel is streaming from server_2
Finished "/cable" [WebSocket] for ::1 at 2024-11-05 11:19:11 -0500
MessageChannel stopped streaming from server_2
Started GET "/cable" for ::1 at 2024-11-05 11:19:11 -0500
Started GET "/servers/2" for ::1 at 2024-11-05 11:19:11 -0500
Started GET "/cable" [WebSocket] for ::1 at 2024-11-05 11:19:11 -0500
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
Processing by ServersController#show as */*
  Parameters: {"id"=>"2"}
  [1m[36mUser Load (1.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/channels/application_cable/connection.rb:12:in `find_verified_user'
Registered connection (Z2lkOi8vbWVzc2VuZ2VyL1VzZXIvMg)
  [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:8:in `set_current_user'
  [1m[36mServer Load (0.4ms)[0m  [1m[34mSELECT "servers".* FROM "servers" WHERE "servers"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/servers_controller.rb:82:in `set_server'
  [1m[36mUser Exists? (0.9ms)[0m  [1m[34mSELECT 1 AS one FROM "users" INNER JOIN "server_members" ON "users"."id" = "server_members"."user_id" WHERE "server_members"."server_id" = $1 AND "users"."id" = $2 LIMIT $3[0m  [["server_id", 2], ["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/servers_controller.rb:99:in `is_member_of_server?'
  [1m[36mServer Load (1.1ms)[0m  [1m[34mSELECT "servers".* FROM "servers" WHERE "servers"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/channels/message_channel.rb:7:in `subscribed'
  [1m[36mUser Load (1.7ms)[0m  [1m[34mSELECT "users".* FROM "users" INNER JOIN "server_members" ON "users"."id" = "server_members"."user_id" WHERE "server_members"."server_id" = $1[0m  [["server_id", 2]]
  â†³ app/controllers/servers_controller.rb:15:in `show'
  [1m[36mUser Exists? (2.0ms)[0m  [1m[34mSELECT 1 AS one FROM "users" INNER JOIN "server_members" ON "users"."id" = "server_members"."user_id" WHERE "server_members"."server_id" = $1 AND "users"."id" = $2 LIMIT $3[0m  [["server_id", 2], ["id", 2], ["LIMIT", 1]]
  â†³ app/channels/message_channel.rb:8:in `subscribed'
  [1m[36mMessage Load (2.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."server_id" = $1[0m  [["server_id", 2]]
MessageChannel is streaming from server_2
  â†³ app/controllers/servers_controller.rb:15:in `show'
MessageChannel transmitting {:type=>"confirm_subscription", :server_id=>2}
Completed 200 OK in 28ms (Views: 11.5ms | ActiveRecord: 5.6ms (5 queries, 0 cached) | GC: 0.7ms)


MessageChannel is transmitting the subscription confirmation
MessageChannel#receive({"server_id"=>2, "content"=>"h", "parent_id"=>nil})
  [1m[36mServer Load (1.3ms)[0m  [1m[34mSELECT "servers".* FROM "servers" WHERE "servers"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/channels/message_channel.rb:45:in `receive'
  [1m[36mServerMember Load (0.7ms)[0m  [1m[34mSELECT "server_members".* FROM "server_members" WHERE "server_members"."server_id" = $1[0m  [["server_id", 2]]
  â†³ app/channels/message_channel.rb:45:in `receive'
  [1m[36mUser Load (1.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" IN ($1, $2)[0m  [["id", 2], ["id", 3]]
  â†³ app/channels/message_channel.rb:45:in `receive'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/channels/message_channel.rb:74:in `handle_create'
  [1m[36mMessage Create (2.3ms)[0m  [1m[32mINSERT INTO "messages" ("content", "user_id", "server_id", "parent_message_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["content", "h"], ["user_id", 2], ["server_id", 2], ["parent_message_id", nil], ["created_at", "2024-11-05 16:19:28.362205"], ["updated_at", "2024-11-05 16:19:28.362205"]]
  â†³ app/channels/message_channel.rb:74:in `handle_create'
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/channels/message_channel.rb:74:in `handle_create'
[ActionCable] Broadcasting to server_2: {:type=>"message", :id=>8, :content=>"h", :user_id=>2, :server_id=>2, :parent_message_id=>nil, :created_at=>Tue, 05 Nov 2024 16:19:28.362205000 UTC +00:00, :user=>{:id=>2, :username=>"user2"}}
MessageChannel transmitting {"type"=>"message", "id"=>8, "content"=>"h", "user_id"=>2, "server_id"=>2, "parent_message_id"=>nil, "created_at"=>"2024-11-05T16:19:28.362Z", "user"=>{"id"=>2, "username"=>"user2"}} (via streamed from server_2)
MessageChannel transmitting {"type"=>"message", "id"=>8, "content"=>"h", "user_id"=>2, "server_id"=>2, "parent_message_id"=>nil, "created_at"=>"2024-11-05T16:19:28.362Z", "user"=>{"id"=>2, "username"=>"user2"}} (via streamed from server_2)
Finished "/cable" [WebSocket] for ::1 at 2024-11-05 11:21:24 -0500
MessageChannel stopped streaming from server_2
Started GET "/servers/2" for ::1 at 2024-11-05 11:21:26 -0500
Processing by ServersController#show as */*
  Parameters: {"id"=>"2"}
  [1m[36mUser Load (1.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:8:in `set_current_user'
  [1m[36mServer Load (0.7ms)[0m  [1m[34mSELECT "servers".* FROM "servers" WHERE "servers"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/servers_controller.rb:82:in `set_server'
  [1m[36mUser Exists? (1.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" INNER JOIN "server_members" ON "users"."id" = "server_members"."user_id" WHERE "server_members"."server_id" = $1 AND "users"."id" = $2 LIMIT $3[0m  [["server_id", 2], ["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/servers_controller.rb:99:in `is_member_of_server?'
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" INNER JOIN "server_members" ON "users"."id" = "server_members"."user_id" WHERE "server_members"."server_id" = $1[0m  [["server_id", 2]]
  â†³ app/controllers/servers_controller.rb:15:in `show'
  [1m[36mMessage Load (0.4ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."server_id" = $1[0m  [["server_id", 2]]
  â†³ app/controllers/servers_controller.rb:15:in `show'
Completed 200 OK in 31ms (Views: 5.9ms | ActiveRecord: 4.3ms (5 queries, 0 cached) | GC: 0.7ms)


Started GET "/cable" for ::1 at 2024-11-05 11:21:26 -0500
Started GET "/cable" [WebSocket] for ::1 at 2024-11-05 11:21:26 -0500
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/channels/application_cable/connection.rb:12:in `find_verified_user'
Registered connection (Z2lkOi8vbWVzc2VuZ2VyL1VzZXIvMg)
  [1m[36mServer Load (0.3ms)[0m  [1m[34mSELECT "servers".* FROM "servers" WHERE "servers"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/channels/message_channel.rb:7:in `subscribed'
  [1m[36mUser Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM "users" INNER JOIN "server_members" ON "users"."id" = "server_members"."user_id" WHERE "server_members"."server_id" = $1 AND "users"."id" = $2 LIMIT $3[0m  [["server_id", 2], ["id", 2], ["LIMIT", 1]]
  â†³ app/channels/message_channel.rb:8:in `subscribed'
MessageChannel transmitting {:type=>"confirm_subscription", :server_id=>2}
MessageChannel is transmitting the subscription confirmation
MessageChannel is streaming from server_2
MessageChannel#receive({"server_id"=>2, "content"=>"s", "parent_id"=>nil})
  [1m[36mServer Load (0.4ms)[0m  [1m[34mSELECT "servers".* FROM "servers" WHERE "servers"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/channels/message_channel.rb:45:in `receive'
  [1m[36mServerMember Load (0.3ms)[0m  [1m[34mSELECT "server_members".* FROM "server_members" WHERE "server_members"."server_id" = $1[0m  [["server_id", 2]]
  â†³ app/channels/message_channel.rb:45:in `receive'
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" IN ($1, $2)[0m  [["id", 2], ["id", 3]]
  â†³ app/channels/message_channel.rb:45:in `receive'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ app/channels/message_channel.rb:74:in `handle_create'
  [1m[36mMessage Create (1.8ms)[0m  [1m[32mINSERT INTO "messages" ("content", "user_id", "server_id", "parent_message_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["content", "s"], ["user_id", 2], ["server_id", 2], ["parent_message_id", nil], ["created_at", "2024-11-05 16:21:29.913952"], ["updated_at", "2024-11-05 16:21:29.913952"]]
  â†³ app/channels/message_channel.rb:74:in `handle_create'
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/channels/message_channel.rb:74:in `handle_create'
[ActionCable] Broadcasting to server_2: {:type=>"message", :id=>9, :content=>"s", :user_id=>2, :server_id=>2, :parent_message_id=>nil, :created_at=>Tue, 05 Nov 2024 16:21:29.913952000 UTC +00:00, :user=>{:id=>2, :username=>"user2"}}
MessageChannel transmitting {"type"=>"message", "id"=>9, "content"=>"s", "user_id"=>2, "server_id"=>2, "parent_message_id"=>nil, "created_at"=>"2024-11-05T16:21:29.913Z", "user"=>{"id"=>2, "username"=>"user2"}} (via streamed from server_2)
MessageChannel transmitting {"type"=>"message", "id"=>9, "content"=>"s", "user_id"=>2, "server_id"=>2, "parent_message_id"=>nil, "created_at"=>"2024-11-05T16:21:29.913Z", "user"=>{"id"=>2, "username"=>"user2"}} (via streamed from server_2)
Finished "/cable" [WebSocket] for ::1 at 2024-11-05 11:22:56 -0500
MessageChannel stopped streaming from server_2
Started GET "/servers/2" for ::1 at 2024-11-05 11:22:57 -0500
Processing by ServersController#show as */*
  Parameters: {"id"=>"2"}
  [1m[36mUser Load (1.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:8:in `set_current_user'
  [1m[36mServer Load (0.2ms)[0m  [1m[34mSELECT "servers".* FROM "servers" WHERE "servers"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/servers_controller.rb:82:in `set_server'
  [1m[36mUser Exists? (0.7ms)[0m  [1m[34mSELECT 1 AS one FROM "users" INNER JOIN "server_members" ON "users"."id" = "server_members"."user_id" WHERE "server_members"."server_id" = $1 AND "users"."id" = $2 LIMIT $3[0m  [["server_id", 2], ["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/servers_controller.rb:99:in `is_member_of_server?'
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" INNER JOIN "server_members" ON "users"."id" = "server_members"."user_id" WHERE "server_members"."server_id" = $1[0m  [["server_id", 2]]
  â†³ app/controllers/servers_controller.rb:15:in `show'
  [1m[36mMessage Load (0.5ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."server_id" = $1[0m  [["server_id", 2]]
  â†³ app/controllers/servers_controller.rb:15:in `show'
Completed 200 OK in 16ms (Views: 4.3ms | ActiveRecord: 3.1ms (5 queries, 0 cached) | GC: 0.0ms)


Started GET "/cable" for ::1 at 2024-11-05 11:22:57 -0500
Started GET "/cable" [WebSocket] for ::1 at 2024-11-05 11:22:57 -0500
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/channels/application_cable/connection.rb:12:in `find_verified_user'
Registered connection (Z2lkOi8vbWVzc2VuZ2VyL1VzZXIvMg)
  [1m[36mServer Load (0.2ms)[0m  [1m[34mSELECT "servers".* FROM "servers" WHERE "servers"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/channels/message_channel.rb:7:in `subscribed'
  [1m[36mUser Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" INNER JOIN "server_members" ON "users"."id" = "server_members"."user_id" WHERE "server_members"."server_id" = $1 AND "users"."id" = $2 LIMIT $3[0m  [["server_id", 2], ["id", 2], ["LIMIT", 1]]
  â†³ app/channels/message_channel.rb:8:in `subscribed'
MessageChannel transmitting {:type=>"confirm_subscription", :server_id=>2}
MessageChannel is transmitting the subscription confirmation
MessageChannel is streaming from server_2
Finished "/cable" [WebSocket] for ::1 at 2024-11-05 11:24:02 -0500
MessageChannel stopped streaming from server_2
Started GET "/servers/2" for ::1 at 2024-11-05 11:24:03 -0500
Processing by ServersController#show as */*
  Parameters: {"id"=>"2"}
  [1m[36mUser Load (1.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:8:in `set_current_user'
  [1m[36mServer Load (2.2ms)[0m  [1m[34mSELECT "servers".* FROM "servers" WHERE "servers"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/servers_controller.rb:82:in `set_server'
  [1m[36mUser Exists? (0.7ms)[0m  [1m[34mSELECT 1 AS one FROM "users" INNER JOIN "server_members" ON "users"."id" = "server_members"."user_id" WHERE "server_members"."server_id" = $1 AND "users"."id" = $2 LIMIT $3[0m  [["server_id", 2], ["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/servers_controller.rb:99:in `is_member_of_server?'
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" INNER JOIN "server_members" ON "users"."id" = "server_members"."user_id" WHERE "server_members"."server_id" = $1[0m  [["server_id", 2]]
  â†³ app/controllers/servers_controller.rb:15:in `show'
  [1m[36mMessage Load (0.7ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."server_id" = $1[0m  [["server_id", 2]]
  â†³ app/controllers/servers_controller.rb:15:in `show'
Completed 200 OK in 37ms (Views: 5.5ms | ActiveRecord: 5.5ms (5 queries, 0 cached) | GC: 5.7ms)


Started GET "/cable" for ::1 at 2024-11-05 11:24:03 -0500
Started GET "/cable" [WebSocket] for ::1 at 2024-11-05 11:24:03 -0500
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/channels/application_cable/connection.rb:12:in `find_verified_user'
Registered connection (Z2lkOi8vbWVzc2VuZ2VyL1VzZXIvMg)
  [1m[36mServer Load (0.5ms)[0m  [1m[34mSELECT "servers".* FROM "servers" WHERE "servers"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/channels/message_channel.rb:7:in `subscribed'
  [1m[36mUser Exists? (3.7ms)[0m  [1m[34mSELECT 1 AS one FROM "users" INNER JOIN "server_members" ON "users"."id" = "server_members"."user_id" WHERE "server_members"."server_id" = $1 AND "users"."id" = $2 LIMIT $3[0m  [["server_id", 2], ["id", 2], ["LIMIT", 1]]
  â†³ app/channels/message_channel.rb:8:in `subscribed'
MessageChannel transmitting {:type=>"confirm_subscription", :server_id=>2}
MessageChannel is transmitting the subscription confirmation
MessageChannel is streaming from server_2
Finished "/cable" [WebSocket] for ::1 at 2024-11-05 11:24:14 -0500
MessageChannel stopped streaming from server_2
Started GET "/servers/2" for ::1 at 2024-11-05 11:24:14 -0500
Processing by ServersController#show as */*
  Parameters: {"id"=>"2"}
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:8:in `set_current_user'
  [1m[36mServer Load (0.2ms)[0m  [1m[34mSELECT "servers".* FROM "servers" WHERE "servers"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/servers_controller.rb:82:in `set_server'
  [1m[36mUser Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" INNER JOIN "server_members" ON "users"."id" = "server_members"."user_id" WHERE "server_members"."server_id" = $1 AND "users"."id" = $2 LIMIT $3[0m  [["server_id", 2], ["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/servers_controller.rb:99:in `is_member_of_server?'
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" INNER JOIN "server_members" ON "users"."id" = "server_members"."user_id" WHERE "server_members"."server_id" = $1[0m  [["server_id", 2]]
  â†³ app/controllers/servers_controller.rb:15:in `show'
  [1m[36mMessage Load (0.3ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."server_id" = $1[0m  [["server_id", 2]]
  â†³ app/controllers/servers_controller.rb:15:in `show'
Completed 200 OK in 28ms (Views: 2.7ms | ActiveRecord: 2.0ms (5 queries, 0 cached) | GC: 1.2ms)


Started GET "/cable" for ::1 at 2024-11-05 11:24:15 -0500
Started GET "/cable" [WebSocket] for ::1 at 2024-11-05 11:24:15 -0500
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/channels/application_cable/connection.rb:12:in `find_verified_user'
Registered connection (Z2lkOi8vbWVzc2VuZ2VyL1VzZXIvMg)
  [1m[36mServer Load (0.1ms)[0m  [1m[34mSELECT "servers".* FROM "servers" WHERE "servers"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/channels/message_channel.rb:7:in `subscribed'
  [1m[36mUser Exists? (0.6ms)[0m  [1m[34mSELECT 1 AS one FROM "users" INNER JOIN "server_members" ON "users"."id" = "server_members"."user_id" WHERE "server_members"."server_id" = $1 AND "users"."id" = $2 LIMIT $3[0m  [["server_id", 2], ["id", 2], ["LIMIT", 1]]
  â†³ app/channels/message_channel.rb:8:in `subscribed'
MessageChannel transmitting {:type=>"confirm_subscription", :server_id=>2}
MessageChannel is streaming from server_2
MessageChannel is transmitting the subscription confirmation
MessageChannel#receive({"server_id"=>2, "content"=>"s", "parent_id"=>nil})
  [1m[36mServer Load (2.1ms)[0m  [1m[34mSELECT "servers".* FROM "servers" WHERE "servers"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/channels/message_channel.rb:45:in `receive'
  [1m[36mServerMember Load (0.5ms)[0m  [1m[34mSELECT "server_members".* FROM "server_members" WHERE "server_members"."server_id" = $1[0m  [["server_id", 2]]
  â†³ app/channels/message_channel.rb:45:in `receive'
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" IN ($1, $2)[0m  [["id", 2], ["id", 3]]
  â†³ app/channels/message_channel.rb:45:in `receive'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ app/channels/message_channel.rb:74:in `handle_create'
  [1m[36mMessage Create (4.1ms)[0m  [1m[32mINSERT INTO "messages" ("content", "user_id", "server_id", "parent_message_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["content", "s"], ["user_id", 2], ["server_id", 2], ["parent_message_id", nil], ["created_at", "2024-11-05 16:24:38.464115"], ["updated_at", "2024-11-05 16:24:38.464115"]]
  â†³ app/channels/message_channel.rb:74:in `handle_create'
  [1m[36mTRANSACTION (1.2ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/channels/message_channel.rb:74:in `handle_create'
[ActionCable] Broadcasting to server_2: {:type=>"message", :id=>10, :content=>"s", :user_id=>2, :server_id=>2, :parent_message_id=>nil, :created_at=>Tue, 05 Nov 2024 16:24:38.464115000 UTC +00:00, :user=>{:id=>2, :username=>"user2"}}
MessageChannel transmitting {"type"=>"message", "id"=>10, "content"=>"s", "user_id"=>2, "server_id"=>2, "parent_message_id"=>nil, "created_at"=>"2024-11-05T16:24:38.464Z", "user"=>{"id"=>2, "username"=>"user2"}} (via streamed from server_2)
MessageChannel transmitting {"type"=>"message", "id"=>10, "content"=>"s", "user_id"=>2, "server_id"=>2, "parent_message_id"=>nil, "created_at"=>"2024-11-05T16:24:38.464Z", "user"=>{"id"=>2, "username"=>"user2"}} (via streamed from server_2)
MessageChannel#receive({"server_id"=>2, "content"=>"hi", "parent_id"=>nil})
  [1m[36mServer Load (0.4ms)[0m  [1m[34mSELECT "servers".* FROM "servers" WHERE "servers"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/channels/message_channel.rb:45:in `receive'
  [1m[36mServerMember Load (0.5ms)[0m  [1m[34mSELECT "server_members".* FROM "server_members" WHERE "server_members"."server_id" = $1[0m  [["server_id", 2]]
  â†³ app/channels/message_channel.rb:45:in `receive'
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" IN ($1, $2)[0m  [["id", 2], ["id", 3]]
  â†³ app/channels/message_channel.rb:45:in `receive'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ app/channels/message_channel.rb:74:in `handle_create'
  [1m[36mMessage Create (1.6ms)[0m  [1m[32mINSERT INTO "messages" ("content", "user_id", "server_id", "parent_message_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["content", "hi"], ["user_id", 2], ["server_id", 2], ["parent_message_id", nil], ["created_at", "2024-11-05 16:24:42.492426"], ["updated_at", "2024-11-05 16:24:42.492426"]]
  â†³ app/channels/message_channel.rb:74:in `handle_create'
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/channels/message_channel.rb:74:in `handle_create'
[ActionCable] Broadcasting to server_2: {:type=>"message", :id=>11, :content=>"hi", :user_id=>2, :server_id=>2, :parent_message_id=>nil, :created_at=>Tue, 05 Nov 2024 16:24:42.492426000 UTC +00:00, :user=>{:id=>2, :username=>"user2"}}
MessageChannel transmitting {"type"=>"message", "id"=>11, "content"=>"hi", "user_id"=>2, "server_id"=>2, "parent_message_id"=>nil, "created_at"=>"2024-11-05T16:24:42.492Z", "user"=>{"id"=>2, "username"=>"user2"}} (via streamed from server_2)
MessageChannel transmitting {"type"=>"message", "id"=>11, "content"=>"hi", "user_id"=>2, "server_id"=>2, "parent_message_id"=>nil, "created_at"=>"2024-11-05T16:24:42.492Z", "user"=>{"id"=>2, "username"=>"user2"}} (via streamed from server_2)
Unsubscribing from channel: {"channel":"MessageChannel","server_id":2}
MessageChannel stopped streaming from server_2
Started GET "/servers/2" for ::1 at 2024-11-05 11:26:11 -0500
Unsubscribing from channel: {"channel":"MessageChannel","server_id":2}
MessageChannel stopped streaming from server_2
Started GET "/servers/2" for ::1 at 2024-11-05 11:26:11 -0500
Processing by ServersController#show as */*
  Parameters: {"id"=>"2"}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:8:in `set_current_user'
  [1m[36mServer Load (0.5ms)[0m  [1m[34mSELECT "servers".* FROM "servers" WHERE "servers"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/servers_controller.rb:82:in `set_server'
  [1m[36mUser Exists? (2.6ms)[0m  [1m[34mSELECT 1 AS one FROM "users" INNER JOIN "server_members" ON "users"."id" = "server_members"."user_id" WHERE "server_members"."server_id" = $1 AND "users"."id" = $2 LIMIT $3[0m  [["server_id", 2], ["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/servers_controller.rb:99:in `is_member_of_server?'
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" INNER JOIN "server_members" ON "users"."id" = "server_members"."user_id" WHERE "server_members"."server_id" = $1[0m  [["server_id", 2]]
  â†³ app/controllers/servers_controller.rb:15:in `show'
  [1m[36mMessage Load (1.2ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."server_id" = $1[0m  [["server_id", 2]]
  â†³ app/controllers/servers_controller.rb:15:in `show'
Completed 200 OK in 36ms (Views: 16.0ms | ActiveRecord: 5.1ms (5 queries, 0 cached) | GC: 0.8ms)


Processing by ServersController#show as */*
  Parameters: {"id"=>"2"}
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:8:in `set_current_user'
  [1m[36mServer Load (0.5ms)[0m  [1m[34mSELECT "servers".* FROM "servers" WHERE "servers"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/servers_controller.rb:82:in `set_server'
  [1m[36mUser Exists? (0.6ms)[0m  [1m[34mSELECT 1 AS one FROM "users" INNER JOIN "server_members" ON "users"."id" = "server_members"."user_id" WHERE "server_members"."server_id" = $1 AND "users"."id" = $2 LIMIT $3[0m  [["server_id", 2], ["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/servers_controller.rb:99:in `is_member_of_server?'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" INNER JOIN "server_members" ON "users"."id" = "server_members"."user_id" WHERE "server_members"."server_id" = $1[0m  [["server_id", 2]]
  â†³ app/controllers/servers_controller.rb:15:in `show'
  [1m[36mMessage Load (0.4ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."server_id" = $1[0m  [["server_id", 2]]
  â†³ app/controllers/servers_controller.rb:15:in `show'
Completed 200 OK in 42ms (Views: 18.6ms | ActiveRecord: 2.1ms (5 queries, 0 cached) | GC: 1.0ms)


  [1m[36mServer Load (0.6ms)[0m  [1m[34mSELECT "servers".* FROM "servers" WHERE "servers"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/channels/message_channel.rb:7:in `subscribed'
  [1m[36mServer Load (0.2ms)[0m  [1m[34mSELECT "servers".* FROM "servers" WHERE "servers"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/channels/message_channel.rb:7:in `subscribed'
  [1m[36mUser Exists? (4.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" INNER JOIN "server_members" ON "users"."id" = "server_members"."user_id" WHERE "server_members"."server_id" = $1 AND "users"."id" = $2 LIMIT $3[0m  [["server_id", 2], ["id", 3], ["LIMIT", 1]]
  â†³ app/channels/message_channel.rb:8:in `subscribed'
MessageChannel transmitting {:type=>"confirm_subscription", :server_id=>2}
MessageChannel is transmitting the subscription confirmation
MessageChannel is streaming from server_2
  [1m[36mUser Exists? (9.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" INNER JOIN "server_members" ON "users"."id" = "server_members"."user_id" WHERE "server_members"."server_id" = $1 AND "users"."id" = $2 LIMIT $3[0m  [["server_id", 2], ["id", 2], ["LIMIT", 1]]
  â†³ app/channels/message_channel.rb:8:in `subscribed'
MessageChannel transmitting {:type=>"confirm_subscription", :server_id=>2}
MessageChannel is transmitting the subscription confirmation
MessageChannel is streaming from server_2
Finished "/cable" [WebSocket] for ::1 at 2024-11-05 11:26:22 -0500
MessageChannel stopped streaming from server_2
Started GET "/servers/2" for ::1 at 2024-11-05 11:26:23 -0500
Processing by ServersController#show as */*
  Parameters: {"id"=>"2"}
  [1m[36mUser Load (1.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:8:in `set_current_user'
  [1m[36mServer Load (0.6ms)[0m  [1m[34mSELECT "servers".* FROM "servers" WHERE "servers"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/servers_controller.rb:82:in `set_server'
  [1m[36mUser Exists? (0.7ms)[0m  [1m[34mSELECT 1 AS one FROM "users" INNER JOIN "server_members" ON "users"."id" = "server_members"."user_id" WHERE "server_members"."server_id" = $1 AND "users"."id" = $2 LIMIT $3[0m  [["server_id", 2], ["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/servers_controller.rb:99:in `is_member_of_server?'
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" INNER JOIN "server_members" ON "users"."id" = "server_members"."user_id" WHERE "server_members"."server_id" = $1[0m  [["server_id", 2]]
  â†³ app/controllers/servers_controller.rb:15:in `show'
  [1m[36mMessage Load (0.5ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."server_id" = $1[0m  [["server_id", 2]]
  â†³ app/controllers/servers_controller.rb:15:in `show'
Completed 200 OK in 73ms (Views: 4.5ms | ActiveRecord: 3.0ms (5 queries, 0 cached) | GC: 0.6ms)


Started GET "/cable" for ::1 at 2024-11-05 11:26:23 -0500
Started GET "/cable" [WebSocket] for ::1 at 2024-11-05 11:26:23 -0500
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/channels/application_cable/connection.rb:12:in `find_verified_user'
Registered connection (Z2lkOi8vbWVzc2VuZ2VyL1VzZXIvMg)
  [1m[36mServer Load (0.2ms)[0m  [1m[34mSELECT "servers".* FROM "servers" WHERE "servers"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/channels/message_channel.rb:7:in `subscribed'
  [1m[36mUser Exists? (0.7ms)[0m  [1m[34mSELECT 1 AS one FROM "users" INNER JOIN "server_members" ON "users"."id" = "server_members"."user_id" WHERE "server_members"."server_id" = $1 AND "users"."id" = $2 LIMIT $3[0m  [["server_id", 2], ["id", 2], ["LIMIT", 1]]
  â†³ app/channels/message_channel.rb:8:in `subscribed'
MessageChannel transmitting {:type=>"confirm_subscription", :server_id=>2}
MessageChannel is streaming from server_2
MessageChannel is transmitting the subscription confirmation
MessageChannel#receive({"server_id"=>2, "content"=>"yes", "parent_id"=>nil})
  [1m[36mServer Load (0.4ms)[0m  [1m[34mSELECT "servers".* FROM "servers" WHERE "servers"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/channels/message_channel.rb:45:in `receive'
  [1m[36mServerMember Load (0.3ms)[0m  [1m[34mSELECT "server_members".* FROM "server_members" WHERE "server_members"."server_id" = $1[0m  [["server_id", 2]]
  â†³ app/channels/message_channel.rb:45:in `receive'
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" IN ($1, $2)[0m  [["id", 2], ["id", 3]]
  â†³ app/channels/message_channel.rb:45:in `receive'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ app/channels/message_channel.rb:74:in `handle_create'
  [1m[36mMessage Create (2.0ms)[0m  [1m[32mINSERT INTO "messages" ("content", "user_id", "server_id", "parent_message_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["content", "yes"], ["user_id", 2], ["server_id", 2], ["parent_message_id", nil], ["created_at", "2024-11-05 16:26:26.452421"], ["updated_at", "2024-11-05 16:26:26.452421"]]
  â†³ app/channels/message_channel.rb:74:in `handle_create'
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/channels/message_channel.rb:74:in `handle_create'
[ActionCable] Broadcasting to server_2: {:type=>"message", :id=>12, :content=>"yes", :user_id=>2, :server_id=>2, :parent_message_id=>nil, :created_at=>Tue, 05 Nov 2024 16:26:26.452421000 UTC +00:00, :user=>{:id=>2, :username=>"user2"}}
MessageChannel transmitting {"type"=>"message", "id"=>12, "content"=>"yes", "user_id"=>2, "server_id"=>2, "parent_message_id"=>nil, "created_at"=>"2024-11-05T16:26:26.452Z", "user"=>{"id"=>2, "username"=>"user2"}} (via streamed from server_2)
MessageChannel transmitting {"type"=>"message", "id"=>12, "content"=>"yes", "user_id"=>2, "server_id"=>2, "parent_message_id"=>nil, "created_at"=>"2024-11-05T16:26:26.452Z", "user"=>{"id"=>2, "username"=>"user2"}} (via streamed from server_2)
MessageChannel#receive({"server_id"=>2, "content"=>"Yooo", "parent_id"=>nil})
  [1m[36mServer Load (0.8ms)[0m  [1m[34mSELECT "servers".* FROM "servers" WHERE "servers"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/channels/message_channel.rb:45:in `receive'
  [1m[36mServerMember Load (0.3ms)[0m  [1m[34mSELECT "server_members".* FROM "server_members" WHERE "server_members"."server_id" = $1[0m  [["server_id", 2]]
  â†³ app/channels/message_channel.rb:45:in `receive'
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" IN ($1, $2)[0m  [["id", 2], ["id", 3]]
  â†³ app/channels/message_channel.rb:45:in `receive'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ app/channels/message_channel.rb:74:in `handle_create'
  [1m[36mMessage Create (1.7ms)[0m  [1m[32mINSERT INTO "messages" ("content", "user_id", "server_id", "parent_message_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["content", "Yooo"], ["user_id", 3], ["server_id", 2], ["parent_message_id", nil], ["created_at", "2024-11-05 16:26:34.463350"], ["updated_at", "2024-11-05 16:26:34.463350"]]
  â†³ app/channels/message_channel.rb:74:in `handle_create'
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/channels/message_channel.rb:74:in `handle_create'
[ActionCable] Broadcasting to server_2: {:type=>"message", :id=>13, :content=>"Yooo", :user_id=>3, :server_id=>2, :parent_message_id=>nil, :created_at=>Tue, 05 Nov 2024 16:26:34.463350000 UTC +00:00, :user=>{:id=>3, :username=>"user3"}}
MessageChannel transmitting {"type"=>"message", "id"=>13, "content"=>"Yooo", "user_id"=>3, "server_id"=>2, "parent_message_id"=>nil, "created_at"=>"2024-11-05T16:26:34.463Z", "user"=>{"id"=>3, "username"=>"user3"}} (via streamed from server_2)
MessageChannel transmitting {"type"=>"message", "id"=>13, "content"=>"Yooo", "user_id"=>3, "server_id"=>2, "parent_message_id"=>nil, "created_at"=>"2024-11-05T16:26:34.463Z", "user"=>{"id"=>3, "username"=>"user3"}} (via streamed from server_2)
Finished "/cable" [WebSocket] for ::1 at 2024-11-05 11:28:02 -0500
MessageChannel stopped streaming from server_2
Started POST "/login" for ::1 at 2024-11-05 19:13:40 -0500
  [1m[36mActiveRecord::SchemaMigration Load (1.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by SessionsController#create as */*
  Parameters: {"username"=>"user2", "password"=>"[FILTERED]", "session"=>{"username"=>"user2", "password"=>"[FILTERED]"}}
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:8:in `set_current_user'
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "user2"], ["LIMIT", 1]]
  â†³ app/controllers/sessions_controller.rb:3:in `create'
Completed 201 Created in 269ms (Views: 0.4ms | ActiveRecord: 12.2ms (2 queries, 0 cached) | GC: 1.5ms)


Started GET "/servers" for ::1 at 2024-11-05 19:13:41 -0500
Processing by ServersController#index as */*
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:8:in `set_current_user'
  [1m[36mServer Load (1.1ms)[0m  [1m[34mSELECT "servers".* FROM "servers"[0m
  â†³ app/controllers/servers_controller.rb:10:in `index'
Completed 200 OK in 9ms (Views: 3.3ms | ActiveRecord: 3.7ms (2 queries, 0 cached) | GC: 0.3ms)


Started GET "/servers" for ::1 at 2024-11-05 19:13:41 -0500
Processing by ServersController#index as */*
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:8:in `set_current_user'
  [1m[36mServer Load (0.2ms)[0m  [1m[34mSELECT "servers".* FROM "servers"[0m
  â†³ app/controllers/servers_controller.rb:10:in `index'
Completed 200 OK in 3ms (Views: 1.5ms | ActiveRecord: 0.4ms (2 queries, 0 cached) | GC: 0.5ms)


Started POST "/login" for ::1 at 2024-11-05 19:14:06 -0500
Processing by SessionsController#create as */*
  Parameters: {"username"=>"user3", "password"=>"[FILTERED]", "session"=>{"username"=>"user3", "password"=>"[FILTERED]"}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:8:in `set_current_user'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "user3"], ["LIMIT", 1]]
  â†³ app/controllers/sessions_controller.rb:3:in `create'
Completed 201 Created in 274ms (Views: 0.4ms | ActiveRecord: 0.4ms (2 queries, 0 cached) | GC: 0.3ms)


Started GET "/servers" for ::1 at 2024-11-05 19:14:07 -0500
Processing by ServersController#index as */*
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:8:in `set_current_user'
  [1m[36mServer Load (0.4ms)[0m  [1m[34mSELECT "servers".* FROM "servers"[0m
  â†³ app/controllers/servers_controller.rb:10:in `index'
Completed 200 OK in 10ms (Views: 2.1ms | ActiveRecord: 0.9ms (2 queries, 0 cached) | GC: 7.9ms)


Started GET "/servers" for ::1 at 2024-11-05 19:14:07 -0500
Processing by ServersController#index as */*
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:8:in `set_current_user'
  [1m[36mServer Load (0.2ms)[0m  [1m[34mSELECT "servers".* FROM "servers"[0m
  â†³ app/controllers/servers_controller.rb:10:in `index'
Completed 200 OK in 2ms (Views: 0.5ms | ActiveRecord: 0.5ms (2 queries, 0 cached) | GC: 0.0ms)


Started GET "/servers/2" for ::1 at 2024-11-05 19:14:15 -0500
Processing by ServersController#show as */*
  Parameters: {"id"=>"2"}
  [1m[36mUser Load (1.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:8:in `set_current_user'
  [1m[36mServer Load (0.3ms)[0m  [1m[34mSELECT "servers".* FROM "servers" WHERE "servers"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/servers_controller.rb:82:in `set_server'
  [1m[36mUser Exists? (5.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" INNER JOIN "server_members" ON "users"."id" = "server_members"."user_id" WHERE "server_members"."server_id" = $1 AND "users"."id" = $2 LIMIT $3[0m  [["server_id", 2], ["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/servers_controller.rb:99:in `is_member_of_server?'
  [1m[36mUser Load (0.9ms)[0m  [1m[34mSELECT "users".* FROM "users" INNER JOIN "server_members" ON "users"."id" = "server_members"."user_id" WHERE "server_members"."server_id" = $1[0m  [["server_id", 2]]
  â†³ app/controllers/servers_controller.rb:15:in `show'
  [1m[36mMessage Load (2.3ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."server_id" = $1[0m  [["server_id", 2]]
  â†³ app/controllers/servers_controller.rb:15:in `show'
Completed 200 OK in 127ms (Views: 29.5ms | ActiveRecord: 33.5ms (5 queries, 0 cached) | GC: 1.7ms)


Started GET "/servers/2" for ::1 at 2024-11-05 19:14:15 -0500
Processing by ServersController#show as */*
  Parameters: {"id"=>"2"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:8:in `set_current_user'
  [1m[36mServer Load (0.3ms)[0m  [1m[34mSELECT "servers".* FROM "servers" WHERE "servers"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/servers_controller.rb:82:in `set_server'
  [1m[36mUser Exists? (1.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" INNER JOIN "server_members" ON "users"."id" = "server_members"."user_id" WHERE "server_members"."server_id" = $1 AND "users"."id" = $2 LIMIT $3[0m  [["server_id", 2], ["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/servers_controller.rb:99:in `is_member_of_server?'
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" INNER JOIN "server_members" ON "users"."id" = "server_members"."user_id" WHERE "server_members"."server_id" = $1[0m  [["server_id", 2]]
  â†³ app/controllers/servers_controller.rb:15:in `show'
  [1m[36mMessage Load (0.4ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."server_id" = $1[0m  [["server_id", 2]]
  â†³ app/controllers/servers_controller.rb:15:in `show'
Completed 200 OK in 13ms (Views: 3.3ms | ActiveRecord: 2.4ms (5 queries, 0 cached) | GC: 0.3ms)


Started GET "/cable" for ::1 at 2024-11-05 19:14:15 -0500
Started GET "/cable" [WebSocket] for ::1 at 2024-11-05 19:14:15 -0500
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/channels/application_cable/connection.rb:12:in `find_verified_user'
Registered connection (Z2lkOi8vbWVzc2VuZ2VyL1VzZXIvMg)
  [1m[36mServer Load (0.3ms)[0m  [1m[34mSELECT "servers".* FROM "servers" WHERE "servers"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/channels/message_channel.rb:4:in `subscribed'
  [1m[36mUser Exists? (0.6ms)[0m  [1m[34mSELECT 1 AS one FROM "users" INNER JOIN "server_members" ON "users"."id" = "server_members"."user_id" WHERE "server_members"."server_id" = $1 AND "users"."id" = $2 LIMIT $3[0m  [["server_id", 2], ["id", 2], ["LIMIT", 1]]
  â†³ app/channels/message_channel.rb:5:in `subscribed'
MessageChannel transmitting {:type=>"confirm_subscription", :server_id=>2}
MessageChannel is streaming from server_2
MessageChannel is transmitting the subscription confirmation
Started GET "/servers/2" for ::1 at 2024-11-05 19:14:20 -0500
Processing by ServersController#show as */*
  Parameters: {"id"=>"2"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:8:in `set_current_user'
  [1m[36mServer Load (0.2ms)[0m  [1m[34mSELECT "servers".* FROM "servers" WHERE "servers"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/servers_controller.rb:82:in `set_server'
  [1m[36mUser Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM "users" INNER JOIN "server_members" ON "users"."id" = "server_members"."user_id" WHERE "server_members"."server_id" = $1 AND "users"."id" = $2 LIMIT $3[0m  [["server_id", 2], ["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/servers_controller.rb:99:in `is_member_of_server?'
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" INNER JOIN "server_members" ON "users"."id" = "server_members"."user_id" WHERE "server_members"."server_id" = $1[0m  [["server_id", 2]]
  â†³ app/controllers/servers_controller.rb:15:in `show'
  [1m[36mMessage Load (0.7ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."server_id" = $1[0m  [["server_id", 2]]
  â†³ app/controllers/servers_controller.rb:15:in `show'
Completed 200 OK in 11ms (Views: 4.4ms | ActiveRecord: 2.0ms (5 queries, 0 cached) | GC: 0.1ms)


Started GET "/servers/2" for ::1 at 2024-11-05 19:14:20 -0500
Processing by ServersController#show as */*
  Parameters: {"id"=>"2"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:8:in `set_current_user'
  [1m[36mServer Load (0.2ms)[0m  [1m[34mSELECT "servers".* FROM "servers" WHERE "servers"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/servers_controller.rb:82:in `set_server'
  [1m[36mUser Exists? (0.6ms)[0m  [1m[34mSELECT 1 AS one FROM "users" INNER JOIN "server_members" ON "users"."id" = "server_members"."user_id" WHERE "server_members"."server_id" = $1 AND "users"."id" = $2 LIMIT $3[0m  [["server_id", 2], ["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/servers_controller.rb:99:in `is_member_of_server?'
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" INNER JOIN "server_members" ON "users"."id" = "server_members"."user_id" WHERE "server_members"."server_id" = $1[0m  [["server_id", 2]]
  â†³ app/controllers/servers_controller.rb:15:in `show'
  [1m[36mMessage Load (0.7ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."server_id" = $1[0m  [["server_id", 2]]
  â†³ app/controllers/servers_controller.rb:15:in `show'
Completed 200 OK in 14ms (Views: 6.8ms | ActiveRecord: 2.3ms (5 queries, 0 cached) | GC: 0.0ms)


Started GET "/cable" for ::1 at 2024-11-05 19:14:20 -0500
Started GET "/cable" [WebSocket] for ::1 at 2024-11-05 19:14:20 -0500
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/channels/application_cable/connection.rb:12:in `find_verified_user'
Registered connection (Z2lkOi8vbWVzc2VuZ2VyL1VzZXIvMw)
  [1m[36mServer Load (0.5ms)[0m  [1m[34mSELECT "servers".* FROM "servers" WHERE "servers"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/channels/message_channel.rb:4:in `subscribed'
  [1m[36mUser Exists? (0.6ms)[0m  [1m[34mSELECT 1 AS one FROM "users" INNER JOIN "server_members" ON "users"."id" = "server_members"."user_id" WHERE "server_members"."server_id" = $1 AND "users"."id" = $2 LIMIT $3[0m  [["server_id", 2], ["id", 3], ["LIMIT", 1]]
  â†³ app/channels/message_channel.rb:5:in `subscribed'
MessageChannel transmitting {:type=>"confirm_subscription", :server_id=>2}
MessageChannel is streaming from server_2
MessageChannel is transmitting the subscription confirmation
MessageChannel#receive({"server_id"=>2, "content"=>"hi", "parent_id"=>nil})
  [1m[36mServer Load (3.5ms)[0m  [1m[34mSELECT "servers".* FROM "servers" WHERE "servers"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/channels/message_channel.rb:38:in `receive'
  [1m[36mServerMember Load (0.3ms)[0m  [1m[34mSELECT "server_members".* FROM "server_members" WHERE "server_members"."server_id" = $1[0m  [["server_id", 2]]
  â†³ app/channels/message_channel.rb:38:in `receive'
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" IN ($1, $2)[0m  [["id", 2], ["id", 3]]
  â†³ app/channels/message_channel.rb:38:in `receive'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ app/channels/message_channel.rb:64:in `handle_create'
  [1m[36mMessage Create (6.5ms)[0m  [1m[32mINSERT INTO "messages" ("content", "user_id", "server_id", "parent_message_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["content", "hi"], ["user_id", 3], ["server_id", 2], ["parent_message_id", nil], ["created_at", "2024-11-06 00:15:06.711844"], ["updated_at", "2024-11-06 00:15:06.711844"]]
  â†³ app/channels/message_channel.rb:64:in `handle_create'
  [1m[36mTRANSACTION (1.0ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/channels/message_channel.rb:64:in `handle_create'
[ActionCable] Broadcasting to server_2: {:type=>"message", :id=>14, :content=>"hi", :user_id=>3, :server_id=>2, :parent_message_id=>nil, :created_at=>Wed, 06 Nov 2024 00:15:06.711844000 UTC +00:00, :user=>{:id=>3, :username=>"user3"}}
MessageChannel transmitting {"type"=>"message", "id"=>14, "content"=>"hi", "user_id"=>3, "server_id"=>2, "parent_message_id"=>nil, "created_at"=>"2024-11-06T00:15:06.711Z", "user"=>{"id"=>3, "username"=>"user3"}} (via streamed from server_2)
MessageChannel transmitting {"type"=>"message", "id"=>14, "content"=>"hi", "user_id"=>3, "server_id"=>2, "parent_message_id"=>nil, "created_at"=>"2024-11-06T00:15:06.711Z", "user"=>{"id"=>3, "username"=>"user3"}} (via streamed from server_2)
Finished "/cable" [WebSocket] for ::1 at 2024-11-05 19:15:20 -0500
MessageChannel stopped streaming from server_2
Started GET "/servers/2" for ::1 at 2024-11-05 19:15:21 -0500
Processing by ServersController#show as */*
  Parameters: {"id"=>"2"}
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:8:in `set_current_user'
  [1m[36mServer Load (0.1ms)[0m  [1m[34mSELECT "servers".* FROM "servers" WHERE "servers"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/servers_controller.rb:82:in `set_server'
  [1m[36mUser Exists? (0.6ms)[0m  [1m[34mSELECT 1 AS one FROM "users" INNER JOIN "server_members" ON "users"."id" = "server_members"."user_id" WHERE "server_members"."server_id" = $1 AND "users"."id" = $2 LIMIT $3[0m  [["server_id", 2], ["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/servers_controller.rb:99:in `is_member_of_server?'
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" INNER JOIN "server_members" ON "users"."id" = "server_members"."user_id" WHERE "server_members"."server_id" = $1[0m  [["server_id", 2]]
  â†³ app/controllers/servers_controller.rb:15:in `show'
  [1m[36mMessage Load (0.3ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."server_id" = $1[0m  [["server_id", 2]]
  â†³ app/controllers/servers_controller.rb:15:in `show'
Completed 200 OK in 14ms (Views: 2.3ms | ActiveRecord: 1.9ms (5 queries, 0 cached) | GC: 0.0ms)


Started GET "/cable" for ::1 at 2024-11-05 19:15:21 -0500
Started GET "/cable" [WebSocket] for ::1 at 2024-11-05 19:15:21 -0500
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/channels/application_cable/connection.rb:12:in `find_verified_user'
Registered connection (Z2lkOi8vbWVzc2VuZ2VyL1VzZXIvMg)
  [1m[36mServer Load (0.4ms)[0m  [1m[34mSELECT "servers".* FROM "servers" WHERE "servers"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/channels/message_channel.rb:4:in `subscribed'
  [1m[36mUser Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM "users" INNER JOIN "server_members" ON "users"."id" = "server_members"."user_id" WHERE "server_members"."server_id" = $1 AND "users"."id" = $2 LIMIT $3[0m  [["server_id", 2], ["id", 2], ["LIMIT", 1]]
  â†³ app/channels/message_channel.rb:5:in `subscribed'
MessageChannel transmitting {:type=>"confirm_subscription", :server_id=>2}
MessageChannel is transmitting the subscription confirmation
MessageChannel is streaming from server_2
Finished "/cable" [WebSocket] for ::1 at 2024-11-05 19:16:49 -0500
MessageChannel stopped streaming from server_2
Started GET "/servers/2" for ::1 at 2024-11-05 19:16:50 -0500
Processing by ServersController#show as */*
  Parameters: {"id"=>"2"}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:8:in `set_current_user'
  [1m[36mServer Load (0.3ms)[0m  [1m[34mSELECT "servers".* FROM "servers" WHERE "servers"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/servers_controller.rb:82:in `set_server'
  [1m[36mUser Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" INNER JOIN "server_members" ON "users"."id" = "server_members"."user_id" WHERE "server_members"."server_id" = $1 AND "users"."id" = $2 LIMIT $3[0m  [["server_id", 2], ["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/servers_controller.rb:99:in `is_member_of_server?'
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" INNER JOIN "server_members" ON "users"."id" = "server_members"."user_id" WHERE "server_members"."server_id" = $1[0m  [["server_id", 2]]
  â†³ app/controllers/servers_controller.rb:15:in `show'
  [1m[36mMessage Load (0.2ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."server_id" = $1[0m  [["server_id", 2]]
  â†³ app/controllers/servers_controller.rb:15:in `show'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/servers_controller.rb:15:in `show'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/servers_controller.rb:15:in `show'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/servers_controller.rb:15:in `show'
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/servers_controller.rb:15:in `show'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/servers_controller.rb:15:in `show'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/servers_controller.rb:15:in `show'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/servers_controller.rb:15:in `show'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/servers_controller.rb:15:in `show'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/servers_controller.rb:15:in `show'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/servers_controller.rb:15:in `show'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/servers_controller.rb:15:in `show'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/servers_controller.rb:15:in `show'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/servers_controller.rb:15:in `show'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/servers_controller.rb:15:in `show'
Completed 200 OK in 31ms (Views: 9.0ms | ActiveRecord: 14.0ms (19 queries, 13 cached) | GC: 1.0ms)


Started GET "/cable" for ::1 at 2024-11-05 19:16:50 -0500
Started GET "/cable" [WebSocket] for ::1 at 2024-11-05 19:16:50 -0500
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/channels/application_cable/connection.rb:12:in `find_verified_user'
Registered connection (Z2lkOi8vbWVzc2VuZ2VyL1VzZXIvMg)
  [1m[36mServer Load (0.2ms)[0m  [1m[34mSELECT "servers".* FROM "servers" WHERE "servers"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/channels/message_channel.rb:4:in `subscribed'
  [1m[36mUser Exists? (0.9ms)[0m  [1m[34mSELECT 1 AS one FROM "users" INNER JOIN "server_members" ON "users"."id" = "server_members"."user_id" WHERE "server_members"."server_id" = $1 AND "users"."id" = $2 LIMIT $3[0m  [["server_id", 2], ["id", 2], ["LIMIT", 1]]
  â†³ app/channels/message_channel.rb:5:in `subscribed'
MessageChannel transmitting {:type=>"confirm_subscription", :server_id=>2}
MessageChannel is transmitting the subscription confirmation
MessageChannel is streaming from server_2
Started GET "/servers/2" for ::1 at 2024-11-05 19:16:51 -0500
Processing by ServersController#show as */*
  Parameters: {"id"=>"2"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:8:in `set_current_user'
  [1m[36mServer Load (1.9ms)[0m  [1m[34mSELECT "servers".* FROM "servers" WHERE "servers"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/servers_controller.rb:82:in `set_server'
  [1m[36mUser Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM "users" INNER JOIN "server_members" ON "users"."id" = "server_members"."user_id" WHERE "server_members"."server_id" = $1 AND "users"."id" = $2 LIMIT $3[0m  [["server_id", 2], ["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/servers_controller.rb:99:in `is_member_of_server?'
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" INNER JOIN "server_members" ON "users"."id" = "server_members"."user_id" WHERE "server_members"."server_id" = $1[0m  [["server_id", 2]]
  â†³ app/controllers/servers_controller.rb:15:in `show'
  [1m[36mMessage Load (0.2ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."server_id" = $1[0m  [["server_id", 2]]
  â†³ app/controllers/servers_controller.rb:15:in `show'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/servers_controller.rb:15:in `show'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/servers_controller.rb:15:in `show'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/servers_controller.rb:15:in `show'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/servers_controller.rb:15:in `show'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/servers_controller.rb:15:in `show'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/servers_controller.rb:15:in `show'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/servers_controller.rb:15:in `show'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/servers_controller.rb:15:in `show'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/servers_controller.rb:15:in `show'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/servers_controller.rb:15:in `show'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/servers_controller.rb:15:in `show'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/servers_controller.rb:15:in `show'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/servers_controller.rb:15:in `show'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/servers_controller.rb:15:in `show'
Completed 200 OK in 28ms (Views: 16.0ms | ActiveRecord: 3.4ms (19 queries, 13 cached) | GC: 0.0ms)


Started GET "/cable" for ::1 at 2024-11-05 19:16:51 -0500
Started GET "/cable" [WebSocket] for ::1 at 2024-11-05 19:16:51 -0500
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/channels/application_cable/connection.rb:12:in `find_verified_user'
Registered connection (Z2lkOi8vbWVzc2VuZ2VyL1VzZXIvMw)
  [1m[36mServer Load (0.3ms)[0m  [1m[34mSELECT "servers".* FROM "servers" WHERE "servers"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/channels/message_channel.rb:4:in `subscribed'
  [1m[36mUser Exists? (0.6ms)[0m  [1m[34mSELECT 1 AS one FROM "users" INNER JOIN "server_members" ON "users"."id" = "server_members"."user_id" WHERE "server_members"."server_id" = $1 AND "users"."id" = $2 LIMIT $3[0m  [["server_id", 2], ["id", 3], ["LIMIT", 1]]
  â†³ app/channels/message_channel.rb:5:in `subscribed'
MessageChannel transmitting {:type=>"confirm_subscription", :server_id=>2}
MessageChannel is transmitting the subscription confirmation
MessageChannel is streaming from server_2
Finished "/cable" [WebSocket] for ::1 at 2024-11-05 19:17:06 -0500
MessageChannel stopped streaming from server_2
Started GET "/servers/2" for ::1 at 2024-11-05 19:17:06 -0500
Processing by ServersController#show as */*
  Parameters: {"id"=>"2"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:8:in `set_current_user'
  [1m[36mServer Load (0.4ms)[0m  [1m[34mSELECT "servers".* FROM "servers" WHERE "servers"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/servers_controller.rb:82:in `set_server'
  [1m[36mUser Exists? (1.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" INNER JOIN "server_members" ON "users"."id" = "server_members"."user_id" WHERE "server_members"."server_id" = $1 AND "users"."id" = $2 LIMIT $3[0m  [["server_id", 2], ["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/servers_controller.rb:99:in `is_member_of_server?'
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" INNER JOIN "server_members" ON "users"."id" = "server_members"."user_id" WHERE "server_members"."server_id" = $1[0m  [["server_id", 2]]
  â†³ app/controllers/servers_controller.rb:15:in `show'
  [1m[36mMessage Load (1.1ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."server_id" = $1[0m  [["server_id", 2]]
  â†³ app/controllers/servers_controller.rb:15:in `show'
Completed 200 OK in 15ms (Views: 2.3ms | ActiveRecord: 3.4ms (5 queries, 0 cached) | GC: 0.0ms)


Started GET "/cable" for ::1 at 2024-11-05 19:17:07 -0500
Started GET "/cable" [WebSocket] for ::1 at 2024-11-05 19:17:07 -0500
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/channels/application_cable/connection.rb:12:in `find_verified_user'
Registered connection (Z2lkOi8vbWVzc2VuZ2VyL1VzZXIvMg)
  [1m[36mServer Load (0.1ms)[0m  [1m[34mSELECT "servers".* FROM "servers" WHERE "servers"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/channels/message_channel.rb:4:in `subscribed'
  [1m[36mUser Exists? (0.9ms)[0m  [1m[34mSELECT 1 AS one FROM "users" INNER JOIN "server_members" ON "users"."id" = "server_members"."user_id" WHERE "server_members"."server_id" = $1 AND "users"."id" = $2 LIMIT $3[0m  [["server_id", 2], ["id", 2], ["LIMIT", 1]]
  â†³ app/channels/message_channel.rb:5:in `subscribed'
MessageChannel transmitting {:type=>"confirm_subscription", :server_id=>2}
MessageChannel is streaming from server_2
MessageChannel is transmitting the subscription confirmation
Finished "/cable" [WebSocket] for ::1 at 2024-11-05 19:17:07 -0500
MessageChannel stopped streaming from server_2
Started GET "/servers/2" for ::1 at 2024-11-05 19:17:07 -0500
Processing by ServersController#show as */*
  Parameters: {"id"=>"2"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:8:in `set_current_user'
  [1m[36mServer Load (3.0ms)[0m  [1m[34mSELECT "servers".* FROM "servers" WHERE "servers"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/servers_controller.rb:82:in `set_server'
  [1m[36mUser Exists? (3.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" INNER JOIN "server_members" ON "users"."id" = "server_members"."user_id" WHERE "server_members"."server_id" = $1 AND "users"."id" = $2 LIMIT $3[0m  [["server_id", 2], ["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/servers_controller.rb:99:in `is_member_of_server?'
  [1m[36mUser Load (3.0ms)[0m  [1m[34mSELECT "users".* FROM "users" INNER JOIN "server_members" ON "users"."id" = "server_members"."user_id" WHERE "server_members"."server_id" = $1[0m  [["server_id", 2]]
  â†³ app/controllers/servers_controller.rb:15:in `show'
  [1m[36mMessage Load (0.2ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."server_id" = $1[0m  [["server_id", 2]]
  â†³ app/controllers/servers_controller.rb:15:in `show'
Completed 200 OK in 36ms (Views: 16.1ms | ActiveRecord: 9.6ms (5 queries, 0 cached) | GC: 7.0ms)


Started GET "/cable" for ::1 at 2024-11-05 19:17:07 -0500
Started GET "/cable" [WebSocket] for ::1 at 2024-11-05 19:17:07 -0500
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/channels/application_cable/connection.rb:12:in `find_verified_user'
Registered connection (Z2lkOi8vbWVzc2VuZ2VyL1VzZXIvMw)
  [1m[36mServer Load (0.2ms)[0m  [1m[34mSELECT "servers".* FROM "servers" WHERE "servers"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/channels/message_channel.rb:4:in `subscribed'
  [1m[36mUser Exists? (4.8ms)[0m  [1m[34mSELECT 1 AS one FROM "users" INNER JOIN "server_members" ON "users"."id" = "server_members"."user_id" WHERE "server_members"."server_id" = $1 AND "users"."id" = $2 LIMIT $3[0m  [["server_id", 2], ["id", 3], ["LIMIT", 1]]
  â†³ app/channels/message_channel.rb:5:in `subscribed'
MessageChannel transmitting {:type=>"confirm_subscription", :server_id=>2}
MessageChannel is transmitting the subscription confirmation
MessageChannel is streaming from server_2
MessageChannel#receive({"server_id"=>2, "content"=>"Hey", "parent_id"=>nil})
  [1m[36mServer Load (0.6ms)[0m  [1m[34mSELECT "servers".* FROM "servers" WHERE "servers"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/channels/message_channel.rb:38:in `receive'
  [1m[36mServerMember Load (0.4ms)[0m  [1m[34mSELECT "server_members".* FROM "server_members" WHERE "server_members"."server_id" = $1[0m  [["server_id", 2]]
  â†³ app/channels/message_channel.rb:38:in `receive'
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" IN ($1, $2)[0m  [["id", 2], ["id", 3]]
  â†³ app/channels/message_channel.rb:38:in `receive'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ app/channels/message_channel.rb:64:in `handle_create'
  [1m[36mMessage Create (2.8ms)[0m  [1m[32mINSERT INTO "messages" ("content", "user_id", "server_id", "parent_message_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["content", "Hey"], ["user_id", 2], ["server_id", 2], ["parent_message_id", nil], ["created_at", "2024-11-06 00:17:15.920584"], ["updated_at", "2024-11-06 00:17:15.920584"]]
  â†³ app/channels/message_channel.rb:64:in `handle_create'
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/channels/message_channel.rb:64:in `handle_create'
[ActionCable] Broadcasting to server_2: {:type=>"message", :id=>15, :content=>"Hey", :user_id=>2, :server_id=>2, :parent_message_id=>nil, :created_at=>Wed, 06 Nov 2024 00:17:15.920584000 UTC +00:00, :user=>{:id=>2, :username=>"user2"}}
MessageChannel transmitting {"type"=>"message", "id"=>15, "content"=>"Hey", "user_id"=>2, "server_id"=>2, "parent_message_id"=>nil, "created_at"=>"2024-11-06T00:17:15.920Z", "user"=>{"id"=>2, "username"=>"user2"}} (via streamed from server_2)
MessageChannel transmitting {"type"=>"message", "id"=>15, "content"=>"Hey", "user_id"=>2, "server_id"=>2, "parent_message_id"=>nil, "created_at"=>"2024-11-06T00:17:15.920Z", "user"=>{"id"=>2, "username"=>"user2"}} (via streamed from server_2)
MessageChannel#receive({"server_id"=>2, "content"=>"Yo", "parent_id"=>nil})
  [1m[36mServer Load (0.6ms)[0m  [1m[34mSELECT "servers".* FROM "servers" WHERE "servers"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/channels/message_channel.rb:38:in `receive'
  [1m[36mServerMember Load (0.7ms)[0m  [1m[34mSELECT "server_members".* FROM "server_members" WHERE "server_members"."server_id" = $1[0m  [["server_id", 2]]
  â†³ app/channels/message_channel.rb:38:in `receive'
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" IN ($1, $2)[0m  [["id", 2], ["id", 3]]
  â†³ app/channels/message_channel.rb:38:in `receive'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ app/channels/message_channel.rb:64:in `handle_create'
  [1m[36mMessage Create (1.5ms)[0m  [1m[32mINSERT INTO "messages" ("content", "user_id", "server_id", "parent_message_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["content", "Yo"], ["user_id", 3], ["server_id", 2], ["parent_message_id", nil], ["created_at", "2024-11-06 00:17:19.517429"], ["updated_at", "2024-11-06 00:17:19.517429"]]
  â†³ app/channels/message_channel.rb:64:in `handle_create'
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/channels/message_channel.rb:64:in `handle_create'
[ActionCable] Broadcasting to server_2: {:type=>"message", :id=>16, :content=>"Yo", :user_id=>3, :server_id=>2, :parent_message_id=>nil, :created_at=>Wed, 06 Nov 2024 00:17:19.517429000 UTC +00:00, :user=>{:id=>3, :username=>"user3"}}
MessageChannel transmitting {"type"=>"message", "id"=>16, "content"=>"Yo", "user_id"=>3, "server_id"=>2, "parent_message_id"=>nil, "created_at"=>"2024-11-06T00:17:19.517Z", "user"=>{"id"=>3, "username"=>"user3"}} (via streamed from server_2)
MessageChannel transmitting {"type"=>"message", "id"=>16, "content"=>"Yo", "user_id"=>3, "server_id"=>2, "parent_message_id"=>nil, "created_at"=>"2024-11-06T00:17:19.517Z", "user"=>{"id"=>3, "username"=>"user3"}} (via streamed from server_2)
Finished "/cable" [WebSocket] for ::1 at 2024-11-05 19:19:57 -0500
MessageChannel stopped streaming from server_2
Finished "/cable" [WebSocket] for ::1 at 2024-11-05 19:19:57 -0500
MessageChannel stopped streaming from server_2
Started GET "/me" for ::1 at 2024-11-05 19:21:46 -0500
Processing by UsersController#show as */*
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:8:in `set_current_user'
  [1m[36mServer Load (9.6ms)[0m  [1m[34mSELECT "servers".* FROM "servers" INNER JOIN "server_members" ON "servers"."id" = "server_members"."server_id" WHERE "server_members"."user_id" = $1[0m  [["user_id", 3]]
  â†³ app/models/user.rb:13:in `as_json'
Completed 200 OK in 46ms (Views: 19.0ms | ActiveRecord: 10.1ms (2 queries, 0 cached) | GC: 0.6ms)


Started GET "/servers/2" for ::1 at 2024-11-05 19:21:46 -0500
Processing by ServersController#show as */*
  Parameters: {"id"=>"2"}
  [1m[36mUser Load (1.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:8:in `set_current_user'
  [1m[36mServer Load (0.4ms)[0m  [1m[34mSELECT "servers".* FROM "servers" WHERE "servers"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/servers_controller.rb:82:in `set_server'
  [1m[36mUser Exists? (1.6ms)[0m  [1m[34mSELECT 1 AS one FROM "users" INNER JOIN "server_members" ON "users"."id" = "server_members"."user_id" WHERE "server_members"."server_id" = $1 AND "users"."id" = $2 LIMIT $3[0m  [["server_id", 2], ["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/servers_controller.rb:99:in `is_member_of_server?'
  [1m[36mUser Load (1.0ms)[0m  [1m[34mSELECT "users".* FROM "users" INNER JOIN "server_members" ON "users"."id" = "server_members"."user_id" WHERE "server_members"."server_id" = $1[0m  [["server_id", 2]]
  â†³ app/controllers/servers_controller.rb:15:in `show'
  [1m[36mMessage Load (0.4ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."server_id" = $1[0m  [["server_id", 2]]
  â†³ app/controllers/servers_controller.rb:15:in `show'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/servers_controller.rb:15:in `show'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/servers_controller.rb:15:in `show'
Completed 200 OK in 170ms (Views: 37.6ms | ActiveRecord: 4.6ms (7 queries, 1 cached) | GC: 0.9ms)


Started GET "/servers/2" for ::1 at 2024-11-05 19:21:47 -0500
Processing by ServersController#show as */*
  Parameters: {"id"=>"2"}
Started GET "/cable" for ::1 at 2024-11-05 19:21:47 -0500
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:8:in `set_current_user'
  [1m[36mServer Load (0.1ms)[0m  [1m[34mSELECT "servers".* FROM "servers" WHERE "servers"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/servers_controller.rb:82:in `set_server'
  [1m[36mUser Exists? (1.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" INNER JOIN "server_members" ON "users"."id" = "server_members"."user_id" WHERE "server_members"."server_id" = $1 AND "users"."id" = $2 LIMIT $3[0m  [["server_id", 2], ["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/servers_controller.rb:99:in `is_member_of_server?'
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" INNER JOIN "server_members" ON "users"."id" = "server_members"."user_id" WHERE "server_members"."server_id" = $1[0m  [["server_id", 2]]
  â†³ app/controllers/servers_controller.rb:15:in `show'
  [1m[36mMessage Load (0.3ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."server_id" = $1[0m  [["server_id", 2]]
  â†³ app/controllers/servers_controller.rb:15:in `show'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/servers_controller.rb:15:in `show'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
Started GET "/cable" [WebSocket] for ::1 at 2024-11-05 19:21:47 -0500
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
  â†³ app/controllers/servers_controller.rb:15:in `show'
Completed 200 OK in 19ms (Views: 13.1ms | ActiveRecord: 2.6ms (7 queries, 1 cached) | GC: 0.6ms)


  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/channels/application_cable/connection.rb:12:in `find_verified_user'
Registered connection (Z2lkOi8vbWVzc2VuZ2VyL1VzZXIvMw)
  [1m[36mServer Load (0.2ms)[0m  [1m[34mSELECT "servers".* FROM "servers" WHERE "servers"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/channels/message_channel.rb:4:in `subscribed'
  [1m[36mUser Exists? (0.9ms)[0m  [1m[34mSELECT 1 AS one FROM "users" INNER JOIN "server_members" ON "users"."id" = "server_members"."user_id" WHERE "server_members"."server_id" = $1 AND "users"."id" = $2 LIMIT $3[0m  [["server_id", 2], ["id", 3], ["LIMIT", 1]]
  â†³ app/channels/message_channel.rb:5:in `subscribed'
MessageChannel transmitting {:type=>"confirm_subscription", :server_id=>2}
MessageChannel is transmitting the subscription confirmation
MessageChannel is streaming from server_2
Started GET "/me" for ::1 at 2024-11-05 19:21:47 -0500
Processing by UsersController#show as */*
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:8:in `set_current_user'
  [1m[36mServer Load (0.6ms)[0m  [1m[34mSELECT "servers".* FROM "servers" INNER JOIN "server_members" ON "servers"."id" = "server_members"."server_id" WHERE "server_members"."user_id" = $1[0m  [["user_id", 2]]
  â†³ app/models/user.rb:13:in `as_json'
Completed 200 OK in 10ms (Views: 5.7ms | ActiveRecord: 0.8ms (2 queries, 0 cached) | GC: 0.3ms)


Started GET "/servers/2" for ::1 at 2024-11-05 19:21:47 -0500
Processing by ServersController#show as */*
  Parameters: {"id"=>"2"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:8:in `set_current_user'
  [1m[36mServer Load (0.2ms)[0m  [1m[34mSELECT "servers".* FROM "servers" WHERE "servers"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/servers_controller.rb:82:in `set_server'
  [1m[36mUser Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM "users" INNER JOIN "server_members" ON "users"."id" = "server_members"."user_id" WHERE "server_members"."server_id" = $1 AND "users"."id" = $2 LIMIT $3[0m  [["server_id", 2], ["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/servers_controller.rb:99:in `is_member_of_server?'
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" INNER JOIN "server_members" ON "users"."id" = "server_members"."user_id" WHERE "server_members"."server_id" = $1[0m  [["server_id", 2]]
  â†³ app/controllers/servers_controller.rb:15:in `show'
  [1m[36mMessage Load (0.2ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."server_id" = $1[0m  [["server_id", 2]]
  â†³ app/controllers/servers_controller.rb:15:in `show'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/servers_controller.rb:15:in `show'
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/servers_controller.rb:15:in `show'
Completed 200 OK in 17ms (Views: 9.8ms | ActiveRecord: 1.6ms (7 queries, 1 cached) | GC: 0.3ms)


Started GET "/servers/2" for ::1 at 2024-11-05 19:21:47 -0500
Processing by ServersController#show as */*
  Parameters: {"id"=>"2"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:8:in `set_current_user'
  [1m[36mServer Load (0.1ms)[0m  [1m[34mSELECT "servers".* FROM "servers" WHERE "servers"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/servers_controller.rb:82:in `set_server'
  [1m[36mUser Exists? (1.0ms)[0m  [1m[34mSELECT 1 AS one FROM "users" INNER JOIN "server_members" ON "users"."id" = "server_members"."user_id" WHERE "server_members"."server_id" = $1 AND "users"."id" = $2 LIMIT $3[0m  [["server_id", 2], ["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/servers_controller.rb:99:in `is_member_of_server?'
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT "users".* FROM "users" INNER JOIN "server_members" ON "users"."id" = "server_members"."user_id" WHERE "server_members"."server_id" = $1[0m  [["server_id", 2]]
  â†³ app/controllers/servers_controller.rb:15:in `show'
  [1m[36mMessage Load (0.2ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."server_id" = $1[0m  [["server_id", 2]]
  â†³ app/controllers/servers_controller.rb:15:in `show'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/servers_controller.rb:15:in `show'
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/servers_controller.rb:15:in `show'
Completed 200 OK in 12ms (Views: 6.1ms | ActiveRecord: 2.3ms (7 queries, 1 cached) | GC: 0.1ms)


Started GET "/cable" for ::1 at 2024-11-05 19:21:47 -0500
Started GET "/cable" [WebSocket] for ::1 at 2024-11-05 19:21:47 -0500
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/channels/application_cable/connection.rb:12:in `find_verified_user'
Registered connection (Z2lkOi8vbWVzc2VuZ2VyL1VzZXIvMg)
  [1m[36mServer Load (0.3ms)[0m  [1m[34mSELECT "servers".* FROM "servers" WHERE "servers"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/channels/message_channel.rb:4:in `subscribed'
  [1m[36mUser Exists? (0.6ms)[0m  [1m[34mSELECT 1 AS one FROM "users" INNER JOIN "server_members" ON "users"."id" = "server_members"."user_id" WHERE "server_members"."server_id" = $1 AND "users"."id" = $2 LIMIT $3[0m  [["server_id", 2], ["id", 2], ["LIMIT", 1]]
  â†³ app/channels/message_channel.rb:5:in `subscribed'
MessageChannel transmitting {:type=>"confirm_subscription", :server_id=>2}
MessageChannel is streaming from server_2
MessageChannel is transmitting the subscription confirmation
Unsubscribing from channel: {"channel":"MessageChannel","server_id":2}
MessageChannel stopped streaming from server_2
Unsubscribing from channel: {"channel":"MessageChannel","server_id":2}
MessageChannel stopped streaming from server_2
Finished "/cable" [WebSocket] for ::1 at 2024-11-05 19:23:16 -0500
Finished "/cable" [WebSocket] for ::1 at 2024-11-05 19:23:16 -0500
Started GET "/me" for ::1 at 2024-11-05 19:23:17 -0500
Started GET "/me" for ::1 at 2024-11-05 19:23:17 -0500
Processing by UsersController#show as */*
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:8:in `set_current_user'
  [1m[36mServer Load (0.5ms)[0m  [1m[34mSELECT "servers".* FROM "servers" INNER JOIN "server_members" ON "servers"."id" = "server_members"."server_id" WHERE "server_members"."user_id" = $1[0m  [["user_id", 3]]
  â†³ app/models/user.rb:13:in `as_json'
Completed 200 OK in 6ms (Views: 2.0ms | ActiveRecord: 1.0ms (2 queries, 0 cached) | GC: 0.0ms)


Processing by UsersController#show as */*
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:8:in `set_current_user'
  [1m[36mServer Load (0.4ms)[0m  [1m[34mSELECT "servers".* FROM "servers" INNER JOIN "server_members" ON "servers"."id" = "server_members"."server_id" WHERE "server_members"."user_id" = $1[0m  [["user_id", 2]]
  â†³ app/models/user.rb:13:in `as_json'
Completed 200 OK in 3ms (Views: 1.3ms | ActiveRecord: 0.6ms (2 queries, 0 cached) | GC: 0.0ms)


Started GET "/me" for ::1 at 2024-11-05 19:23:25 -0500
Processing by UsersController#show as */*
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:8:in `set_current_user'
  [1m[36mServer Load (0.7ms)[0m  [1m[34mSELECT "servers".* FROM "servers" INNER JOIN "server_members" ON "servers"."id" = "server_members"."server_id" WHERE "server_members"."user_id" = $1[0m  [["user_id", 3]]
  â†³ app/models/user.rb:13:in `as_json'
Completed 200 OK in 9ms (Views: 4.3ms | ActiveRecord: 1.0ms (2 queries, 0 cached) | GC: 0.0ms)


Started GET "/servers/2" for ::1 at 2024-11-05 19:23:25 -0500
Started GET "/me" for ::1 at 2024-11-05 19:23:25 -0500
Processing by UsersController#show as */*
Processing by ServersController#show as */*
  Parameters: {"id"=>"2"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:8:in `set_current_user'
  [1m[36mServer Load (1.3ms)[0m  [1m[34mSELECT "servers".* FROM "servers" INNER JOIN "server_members" ON "servers"."id" = "server_members"."server_id" WHERE "server_members"."user_id" = $1[0m  [["user_id", 2]]
  â†³ app/models/user.rb:13:in `as_json'
Completed 200 OK in 14ms (Views: 6.2ms | ActiveRecord: 1.6ms (2 queries, 0 cached) | GC: 1.2ms)


  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:8:in `set_current_user'
  [1m[36mServer Load (0.9ms)[0m  [1m[34mSELECT "servers".* FROM "servers" WHERE "servers"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/servers_controller.rb:82:in `set_server'
  [1m[36mUser Exists? (2.5ms)[0m  [1m[34mSELECT 1 AS one FROM "users" INNER JOIN "server_members" ON "users"."id" = "server_members"."user_id" WHERE "server_members"."server_id" = $1 AND "users"."id" = $2 LIMIT $3[0m  [["server_id", 2], ["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/servers_controller.rb:99:in `is_member_of_server?'
Started GET "/servers/2" for ::1 at 2024-11-05 19:23:25 -0500
  [1m[36mUser Load (2.2ms)[0m  [1m[34mSELECT "users".* FROM "users" INNER JOIN "server_members" ON "users"."id" = "server_members"."user_id" WHERE "server_members"."server_id" = $1[0m  [["server_id", 2]]
  â†³ app/controllers/servers_controller.rb:15:in `show'
  [1m[36mMessage Load (0.7ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."server_id" = $1[0m  [["server_id", 2]]
  â†³ app/controllers/servers_controller.rb:15:in `show'
Processing by ServersController#show as */*
  Parameters: {"id"=>"2"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/servers_controller.rb:15:in `show'
  [1m[36mUser Load (2.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:8:in `set_current_user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/servers_controller.rb:15:in `show'
Completed 200 OK in 83ms (Views: 35.2ms | ActiveRecord: 22.3ms (7 queries, 1 cached) | GC: 3.1ms)


  [1m[36mServer Load (0.5ms)[0m  [1m[34mSELECT "servers".* FROM "servers" WHERE "servers"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/servers_controller.rb:82:in `set_server'
Started GET "/servers/2" for ::1 at 2024-11-05 19:23:25 -0500
  [1m[36mUser Exists? (4.5ms)[0m  [1m[34mSELECT 1 AS one FROM "users" INNER JOIN "server_members" ON "users"."id" = "server_members"."user_id" WHERE "server_members"."server_id" = $1 AND "users"."id" = $2 LIMIT $3[0m  [["server_id", 2], ["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/servers_controller.rb:99:in `is_member_of_server?'
Started GET "/cable" for ::1 at 2024-11-05 19:23:25 -0500
  [1m[36mUser Load (2.6ms)[0m  [1m[34mSELECT "users".* FROM "users" INNER JOIN "server_members" ON "users"."id" = "server_members"."user_id" WHERE "server_members"."server_id" = $1[0m  [["server_id", 2]]
  â†³ app/controllers/servers_controller.rb:15:in `show'
Processing by ServersController#show as */*
  Parameters: {"id"=>"2"}
  [1m[36mMessage Load (2.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."server_id" = $1[0m  [["server_id", 2]]
  â†³ app/controllers/servers_controller.rb:15:in `show'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/servers_controller.rb:15:in `show'
  [1m[36mUser Load (5.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:8:in `set_current_user'
Started GET "/cable" [WebSocket] for ::1 at 2024-11-05 19:23:25 -0500
  [1m[36mUser Load (5.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/servers_controller.rb:15:in `show'
Completed 200 OK in 78ms (Views: 38.4ms | ActiveRecord: 18.0ms (7 queries, 1 cached) | GC: 0.6ms)


  [1m[36mServer Load (4.3ms)[0m  [1m[34mSELECT "servers".* FROM "servers" WHERE "servers"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/servers_controller.rb:82:in `set_server'
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
Started GET "/servers/2" for ::1 at 2024-11-05 19:23:25 -0500
  [1m[36mUser Exists? (2.0ms)[0m  [1m[34mSELECT 1 AS one FROM "users" INNER JOIN "server_members" ON "users"."id" = "server_members"."user_id" WHERE "server_members"."server_id" = $1 AND "users"."id" = $2 LIMIT $3[0m  [["server_id", 2], ["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/servers_controller.rb:99:in `is_member_of_server?'
  [1m[36mUser Load (5.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/channels/application_cable/connection.rb:12:in `find_verified_user'
  [1m[36mUser Load (4.2ms)[0m  [1m[34mSELECT "users".* FROM "users" INNER JOIN "server_members" ON "users"."id" = "server_members"."user_id" WHERE "server_members"."server_id" = $1[0m  [["server_id", 2]]
  â†³ app/controllers/servers_controller.rb:15:in `show'
Registered connection (Z2lkOi8vbWVzc2VuZ2VyL1VzZXIvMw)
  [1m[36mMessage Load (7.7ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."server_id" = $1[0m  [["server_id", 2]]
  â†³ app/controllers/servers_controller.rb:15:in `show'
  [1m[36mUser Load (1.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/servers_controller.rb:15:in `show'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/servers_controller.rb:15:in `show'
Completed 200 OK in 87ms (Views: 28.2ms | ActiveRecord: 24.6ms (7 queries, 1 cached) | GC: 0.5ms)


  [1m[36mServer Load (0.9ms)[0m  [1m[34mSELECT "servers".* FROM "servers" WHERE "servers"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/channels/message_channel.rb:4:in `subscribed'
Processing by ServersController#show as */*
  [1m[36mUser Exists? (3.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" INNER JOIN "server_members" ON "users"."id" = "server_members"."user_id" WHERE "server_members"."server_id" = $1 AND "users"."id" = $2 LIMIT $3[0m  [["server_id", 2], ["id", 3], ["LIMIT", 1]]
  Parameters: {"id"=>"2"}
  â†³ app/channels/message_channel.rb:5:in `subscribed'
MessageChannel transmitting {:type=>"confirm_subscription", :server_id=>2}
MessageChannel is transmitting the subscription confirmation
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:8:in `set_current_user'
Started GET "/cable" for ::1 at 2024-11-05 19:23:25 -0500
MessageChannel is streaming from server_2
  [1m[36mServer Load (0.8ms)[0m  [1m[34mSELECT "servers".* FROM "servers" WHERE "servers"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/servers_controller.rb:82:in `set_server'
  [1m[36mUser Exists? (0.7ms)[0m  [1m[34mSELECT 1 AS one FROM "users" INNER JOIN "server_members" ON "users"."id" = "server_members"."user_id" WHERE "server_members"."server_id" = $1 AND "users"."id" = $2 LIMIT $3[0m  [["server_id", 2], ["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/servers_controller.rb:99:in `is_member_of_server?'
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT "users".* FROM "users" INNER JOIN "server_members" ON "users"."id" = "server_members"."user_id" WHERE "server_members"."server_id" = $1[0m  [["server_id", 2]]
  â†³ app/controllers/servers_controller.rb:15:in `show'
Started GET "/cable" [WebSocket] for ::1 at 2024-11-05 19:23:25 -0500
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
  [1m[36mMessage Load (0.9ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."server_id" = $1[0m  [["server_id", 2]]
  â†³ app/controllers/servers_controller.rb:15:in `show'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/servers_controller.rb:15:in `show'
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/channels/application_cable/connection.rb:12:in `find_verified_user'
Registered connection (Z2lkOi8vbWVzc2VuZ2VyL1VzZXIvMg)
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/servers_controller.rb:15:in `show'
Completed 200 OK in 36ms (Views: 20.9ms | ActiveRecord: 3.7ms (7 queries, 1 cached) | GC: 0.6ms)


  [1m[36mServer Load (1.9ms)[0m  [1m[34mSELECT "servers".* FROM "servers" WHERE "servers"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/channels/message_channel.rb:4:in `subscribed'
  [1m[36mUser Exists? (0.7ms)[0m  [1m[34mSELECT 1 AS one FROM "users" INNER JOIN "server_members" ON "users"."id" = "server_members"."user_id" WHERE "server_members"."server_id" = $1 AND "users"."id" = $2 LIMIT $3[0m  [["server_id", 2], ["id", 2], ["LIMIT", 1]]
  â†³ app/channels/message_channel.rb:5:in `subscribed'
MessageChannel transmitting {:type=>"confirm_subscription", :server_id=>2}
MessageChannel is transmitting the subscription confirmation
MessageChannel is streaming from server_2
Finished "/cable" [WebSocket] for ::1 at 2024-11-05 19:26:27 -0500
MessageChannel stopped streaming from server_2
Started GET "/me" for ::1 at 2024-11-05 19:26:27 -0500
Processing by UsersController#show as */*
  [1m[36mUser Load (1.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:8:in `set_current_user'
  [1m[36mServer Load (9.7ms)[0m  [1m[34mSELECT "servers".* FROM "servers" INNER JOIN "server_members" ON "servers"."id" = "server_members"."server_id" WHERE "server_members"."user_id" = $1[0m  [["user_id", 3]]
  â†³ app/models/user.rb:13:in `as_json'
Completed 200 OK in 26ms (Views: 7.6ms | ActiveRecord: 10.9ms (2 queries, 0 cached) | GC: 1.2ms)


Started GET "/servers/2" for ::1 at 2024-11-05 19:26:27 -0500
Processing by ServersController#show as */*
  Parameters: {"id"=>"2"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:8:in `set_current_user'
  [1m[36mServer Load (0.2ms)[0m  [1m[34mSELECT "servers".* FROM "servers" WHERE "servers"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/servers_controller.rb:82:in `set_server'
  [1m[36mUser Exists? (2.6ms)[0m  [1m[34mSELECT 1 AS one FROM "users" INNER JOIN "server_members" ON "users"."id" = "server_members"."user_id" WHERE "server_members"."server_id" = $1 AND "users"."id" = $2 LIMIT $3[0m  [["server_id", 2], ["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/servers_controller.rb:99:in `is_member_of_server?'
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" INNER JOIN "server_members" ON "users"."id" = "server_members"."user_id" WHERE "server_members"."server_id" = $1[0m  [["server_id", 2]]
  â†³ app/controllers/servers_controller.rb:15:in `show'
  [1m[36mMessage Load (1.1ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."server_id" = $1[0m  [["server_id", 2]]
  â†³ app/controllers/servers_controller.rb:15:in `show'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/servers_controller.rb:15:in `show'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/servers_controller.rb:15:in `show'
Completed 200 OK in 20ms (Views: 8.6ms | ActiveRecord: 4.7ms (7 queries, 1 cached) | GC: 0.4ms)


Started GET "/servers/2" for ::1 at 2024-11-05 19:26:27 -0500
Processing by ServersController#show as */*
  Parameters: {"id"=>"2"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:8:in `set_current_user'
  [1m[36mServer Load (0.2ms)[0m  [1m[34mSELECT "servers".* FROM "servers" WHERE "servers"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/servers_controller.rb:82:in `set_server'
Started GET "/cable" for ::1 at 2024-11-05 19:26:27 -0500
  [1m[36mUser Exists? (1.5ms)[0m  [1m[34mSELECT 1 AS one FROM "users" INNER JOIN "server_members" ON "users"."id" = "server_members"."user_id" WHERE "server_members"."server_id" = $1 AND "users"."id" = $2 LIMIT $3[0m  [["server_id", 2], ["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/servers_controller.rb:99:in `is_member_of_server?'
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT "users".* FROM "users" INNER JOIN "server_members" ON "users"."id" = "server_members"."user_id" WHERE "server_members"."server_id" = $1[0m  [["server_id", 2]]
  â†³ app/controllers/servers_controller.rb:15:in `show'
  [1m[36mMessage Load (0.7ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."server_id" = $1[0m  [["server_id", 2]]
  â†³ app/controllers/servers_controller.rb:15:in `show'
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/servers_controller.rb:15:in `show'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/servers_controller.rb:15:in `show'
Completed 200 OK in 21ms (Views: 9.8ms | ActiveRecord: 3.5ms (7 queries, 1 cached) | GC: 0.7ms)


Started GET "/cable" [WebSocket] for ::1 at 2024-11-05 19:26:27 -0500
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/channels/application_cable/connection.rb:12:in `find_verified_user'
Registered connection (Z2lkOi8vbWVzc2VuZ2VyL1VzZXIvMw)
  [1m[36mServer Load (0.2ms)[0m  [1m[34mSELECT "servers".* FROM "servers" WHERE "servers"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/channels/message_channel.rb:4:in `subscribed'
  [1m[36mUser Exists? (0.8ms)[0m  [1m[34mSELECT 1 AS one FROM "users" INNER JOIN "server_members" ON "users"."id" = "server_members"."user_id" WHERE "server_members"."server_id" = $1 AND "users"."id" = $2 LIMIT $3[0m  [["server_id", 2], ["id", 3], ["LIMIT", 1]]
  â†³ app/channels/message_channel.rb:5:in `subscribed'
MessageChannel transmitting {:type=>"confirm_subscription", :server_id=>2}
MessageChannel is transmitting the subscription confirmation
MessageChannel is streaming from server_2
